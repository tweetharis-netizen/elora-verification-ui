"use strict";(()=>{var e={};e.id=2264,e.ids=[2264],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4645:e=>{e.exports=require("pdfkit")},4234:(e,t,r)=>{r.r(t),r.d(t,{config:()=>c,default:()=>s,routeModule:()=>u});var n={};r.r(n),r.d(n,{default:()=>handler});var a=r(1802),i=r(7153),o=r(6249),l=r(4946);let p=r(4645),d=p?.default||p;function clampStr(e,t=2e5){if("string"!=typeof e)return"";let r=e.trim();return r.length<=t?r:r.slice(0,t)}async function handler(e,t){let r=await (0,l.Ug)(e,t);if(r){if("POST"!==e.method)return t.setHeader("Allow","POST"),t.status(405).json({error:"Method not allowed"});try{let r=clampStr(e.body?.title||"Elora Export",120),n=clampStr(e.body?.content||"",2e5);t.setHeader("Content-Type","application/pdf"),t.setHeader("Content-Disposition",`attachment; filename="${function(e){let t=String(e||"").replace(/[^a-z0-9 _-]/gi,"").replace(/\s+/g,"-").slice(0,60);return t||"Elora-Export"}(r)}.pdf"`);let a=new d({size:"A4",margins:{top:54,bottom:54,left:54,right:54}});a.pipe(t),a.fontSize(18).text(r,{underline:!1}),a.moveDown(1),a.fontSize(11);let i=n.split("\n");for(let e of i){let t=e.replace(/\r/g,"");if(!t.trim()){a.moveDown(.6);continue}/^[-*]\s+/.test(t.trim())?a.text(`â€¢ ${t.trim().replace(/^[-*]\s+/,"")}`):a.text(t)}a.end()}catch(e){try{t.headersSent?t.end():t.status(500).json({error:"Failed to generate PDF."})}catch{}}}}let s=(0,o.l)(n,"default"),c=(0,o.l)(n,"config"),u=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/export-pdf",pathname:"/api/export-pdf",bundlePath:"",filename:""},userland:n})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[4222,4946],()=>__webpack_exec__(4234));module.exports=r})();