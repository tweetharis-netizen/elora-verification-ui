"use strict";(()=>{var e={};e.id=5262,e.ids=[5262],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1815:(e,r,t)=>{t.r(r),t.d(r,{config:()=>d,default:()=>u,routeModule:()=>c});var o={};t.r(o),t.d(o,{default:()=>handler});var a=t(1802),n=t(7153),i=t(6249),s=t(4946);async function handler(e,r){if("GET"!==e.method&&"POST"!==e.method)return r.setHeader("Allow","GET, POST"),r.status(405).json({ok:!1,error:"method_not_allowed"});let t=await (0,s.Ug)(e,r);if(!t)return;let o=function(e){let r=Array.isArray(e?.query?.code)?e.query.code[0]:e?.query?.code,t=e?.body?.code;return String(t||r||"").trim()}(e);if(!o)return r.status(400).json({ok:!1,error:"missing_code"});let a=(0,s.cQ)(),n=(0,s.pX)(e);if(!n)return r.status(401).json({ok:!1,error:"missing_session"});try{let e=await fetch(`${a}/api/teacher/redeem`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({code:o}),cache:"no-store"}),t=await e.json().catch(()=>null);if(!e.ok||!t?.ok){let o=String(t?.error||"invalid_code");return r.status(e.status||401).json({ok:!1,error:o})}return r.status(200).json({ok:!0,role:t?.role||"teacher"})}catch{return r.status(502).json({ok:!1,error:"backend_unreachable"})}}let u=(0,i.l)(o,"default"),d=(0,i.l)(o,"config"),c=new a.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/teacher-invite",pathname:"/api/teacher-invite",bundlePath:"",filename:""},userland:o})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[4222,4946],()=>__webpack_exec__(1815));module.exports=t})();