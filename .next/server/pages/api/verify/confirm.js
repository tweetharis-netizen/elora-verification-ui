"use strict";(()=>{var e={};e.id=2471,e.ids=[2471],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6634:(e,r,t)=>{t.r(r),t.d(r,{config:()=>c,default:()=>s,routeModule:()=>d});var i={};t.r(i),t.d(i,{default:()=>handler});var n=t(1802),a=t(7153),o=t(6249);async function handler(e,r){let t=(process.env.NEXT_PUBLIC_ELORA_BACKEND_URL||"https://elora-website.vercel.app").replace(/\/$/,""),i="string"==typeof e.query.token?e.query.token:"";if(!i)return r.redirect("/verify?error=invalid");try{let e=await fetch(`${t}/api/verification/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i})}),n=await e.json().catch(()=>null);if(!e.ok||!n?.ok){let e=n?.error?String(n.error):"invalid";return r.redirect(`/verify?error=${encodeURIComponent(e)}`)}let a=n?.sessionToken||n?.sessionJwt||"";if(!a)return r.redirect("/verify?error=invalid");return function(e,r,t,i={}){let n=[`${r}=${encodeURIComponent(t)}`];n.push(`Path=${i.path||"/"}`),void 0!==i.maxAge&&n.push(`Max-Age=${i.maxAge}`),i.httpOnly&&n.push("HttpOnly"),i.secure&&n.push("Secure"),i.sameSite&&n.push(`SameSite=${i.sameSite}`),e.setHeader("Set-Cookie",n.join("; "))}(r,"elora_session",a,{httpOnly:!0,secure:!0,sameSite:"Lax",maxAge:2592e3}),r.redirect(`/verified?email=${encodeURIComponent(n.email||"")}`)}catch{return r.redirect("/verify?error=backend_unreachable")}}let s=(0,o.l)(i,"default"),c=(0,o.l)(i,"config"),d=new n.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/verify/confirm",pathname:"/api/verify/confirm",bundlePath:"",filename:""},userland:i})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[4222],()=>__webpack_exec__(6634));module.exports=t})();