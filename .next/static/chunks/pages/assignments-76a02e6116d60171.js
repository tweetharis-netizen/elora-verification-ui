(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{5693:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/assignments",function(){return a(7999)}])},7142:function(e,t,a){"use strict";a.d(t,{tz:function(){return generateRubric},vK:function(){return createAssignment},vS:function(){return getUserAssignments}});var i=a(1034),s=a(5266);async function createAssignment(e){var t,a,r;let{classId:n,teacherId:l,title:d,description:o,dueDate:c,points:m,rubric:u=null,attachments:p=[],settings:x={}}=e;if(!s.db)throw Error("Firestore not initialized");let h={classId:n,teacherId:l,title:d,description:o,dueDate:c,points:m,rubric:u,attachments:p,settings:{allowLateSubmissions:null===(t=x.allowLateSubmissions)||void 0===t||t,allowPeerReview:null!==(a=x.allowPeerReview)&&void 0!==a&&a,plagiarismCheck:null===(r=x.plagiarismCheck)||void 0===r||r,...x},status:"draft",createdAt:(0,i.Bt)(),updatedAt:(0,i.Bt)(),publishedAt:null,versions:[]},b=(0,i.JU)((0,i.hJ)(s.db,"assignments"));return await (0,i.pl)(b,h),{id:b.id,...h}}async function getClassAssignments(e){if(!s.db)return[];let t=(0,i.IO)((0,i.hJ)(s.db,"assignments"),(0,i.ar)("classId","==",e),(0,i.Xo)("dueDate","desc")),a=await (0,i.PL)(t);return a.docs.map(e=>({id:e.id,...e.data()}))}async function generateRubric(e,t,a){return{criteria:[{name:"Content & Understanding",description:"Demonstrates understanding of the topic",levels:[{name:"Excellent",points:.4*a,description:"Exceptional understanding"},{name:"Good",points:.3*a,description:"Good understanding"},{name:"Satisfactory",points:.2*a,description:"Basic understanding"},{name:"Needs Improvement",points:.1*a,description:"Limited understanding"}]},{name:"Quality & Effort",description:"Overall quality and effort demonstrated",levels:[{name:"Excellent",points:.3*a,description:"Outstanding effort"},{name:"Good",points:.2*a,description:"Good effort"},{name:"Satisfactory",points:.15*a,description:"Adequate effort"},{name:"Needs Improvement",points:.05*a,description:"Minimal effort"}]}]}}async function getTeacherAssignments(e){if(!s.db)return[];let t=(0,i.IO)((0,i.hJ)(s.db,"assignments"),(0,i.ar)("teacherId","==",e),(0,i.Xo)("createdAt","desc")),a=await (0,i.PL)(t);return a.docs.map(e=>({id:e.id,...e.data()}))}async function getUserAssignments(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!s.db)return[];try{if("educator"===t)return await getTeacherAssignments(e);if("student"===t||"parent"===t){if(!a||0===a.length)return[];let e=a.map(e=>getClassAssignments(e)),t=await Promise.all(e),i=new Map;return t.flat().forEach(e=>{i.has(e.id)||i.set(e.id,e)}),Array.from(i.values()).sort((e,t)=>new Date(t.dueDate)-new Date(e.dueDate))}return[]}catch(e){return console.error("Error in getUserAssignments:",e),[]}}},7999:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AssignmentsPage}});var i=a(5893),s=a(7294),r=a(3495),n=a(8260),l=a(1664),d=a.n(l),o=a(6600),c=a(1526);function RubricBuilder(e){let{initialRubric:t=null,onSave:a,onCancel:n}=e,[l,d]=(0,s.useState)((null==t?void 0:t.criteria)||[{id:Date.now(),name:"",description:"",weight:25,levels:[{name:"Excellent",points:4,description:""},{name:"Good",points:3,description:""},{name:"Satisfactory",points:2,description:""},{name:"Needs Improvement",points:1,description:""}]}]),removeCriterion=e=>{d(l.filter(t=>t.id!==e))},updateCriterion=(e,t,a)=>{d(l.map(i=>i.id===e?{...i,[t]:a}:i))},updateLevel=(e,t,a,i)=>{d(l.map(s=>s.id===e?{...s,levels:s.levels.map((e,s)=>s===t?{...e,[a]:i}:e)}:s))},o=l.reduce((e,t)=>e+(Number(t.weight)||0),0);return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-text-primary",children:"Rubric Builder"}),(0,i.jsx)("p",{className:"text-text-secondary mt-1",children:"Define grading criteria and performance levels"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-sm text-text-secondary",children:"Total Weight:"}),(0,i.jsxs)("span",{className:"text-lg font-bold ".concat(100===o?"text-secondary-600":"text-warning"),children:[o,"%"]})]})]}),(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsx)(c.M,{children:l.map((e,t)=>(0,i.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"card p-6 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[(0,i.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,i.jsx)("input",{type:"text",placeholder:"Criterion name (e.g., Content & Understanding)",value:e.name,onChange:t=>updateCriterion(e.id,"name",t.target.value),className:"input text-lg font-semibold"}),(0,i.jsx)("textarea",{placeholder:"Description of what this criterion evaluates...",value:e.description,onChange:t=>updateCriterion(e.id,"description",t.target.value),className:"input min-h-[60px]",rows:2}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-text-secondary",children:"Weight:"}),(0,i.jsx)("input",{type:"number",min:"0",max:"100",value:e.weight,onChange:t=>updateCriterion(e.id,"weight",Number(t.target.value)),className:"input w-20 text-center"}),(0,i.jsx)("span",{className:"text-sm text-text-secondary",children:"%"})]})]}),l.length>1&&(0,i.jsx)("button",{onClick:()=>removeCriterion(e.id),className:"btn btn-ghost text-error hover:bg-red-50 dark:hover:bg-red-900/20",children:(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-3 border-t border-border-primary",children:e.levels.map((t,a)=>(0,i.jsxs)("div",{className:"bg-neutral-50 dark:bg-neutral-800/50 rounded-lg p-4 space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("input",{type:"text",placeholder:"Level name",value:t.name,onChange:t=>updateLevel(e.id,a,"name",t.target.value),className:"input-sm flex-1 mr-2"}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("input",{type:"number",min:"0",value:t.points,onChange:t=>updateLevel(e.id,a,"points",Number(t.target.value)),className:"input-sm w-16 text-center"}),(0,i.jsx)("span",{className:"text-xs text-text-tertiary",children:"pts"})]})]}),(0,i.jsx)("textarea",{placeholder:"Description of this performance level...",value:t.description,onChange:t=>updateLevel(e.id,a,"description",t.target.value),className:"input-sm min-h-[50px] text-xs",rows:2})]},a))})]},e.id))})}),(0,i.jsxs)("button",{onClick:()=>{d([...l,{id:Date.now(),name:"",description:"",weight:25,levels:[{name:"Excellent",points:4,description:""},{name:"Good",points:3,description:""},{name:"Satisfactory",points:2,description:""},{name:"Needs Improvement",points:1,description:""}]}])},className:"btn btn-outline w-full",children:[(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Criterion"]}),(0,i.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border-primary",children:[(0,i.jsx)("button",{onClick:n,className:"btn btn-outline flex-1",children:"Cancel"}),(0,i.jsx)("button",{onClick:()=>{a({criteria:l})},className:"btn btn-primary flex-1",disabled:100!==o||l.some(e=>!e.name),children:"Save Rubric"})]}),100!==o&&(0,i.jsx)("p",{className:"text-warning text-sm text-center",children:"⚠️ Total weight must equal 100%"})]})}var m=a(7142);let u={US_CommonCore_Math:{K:[{id:"CCSS.MATH.K.CC.A.1",domain:"Counting & Cardinality",description:"Count to 100 by ones and by tens",keywords:["counting","numbers"]},{id:"CCSS.MATH.K.CC.B.4",domain:"Counting & Cardinality",description:"Understand the relationship between numbers and quantities",keywords:["number sense","quantity"]},{id:"CCSS.MATH.K.OA.A.1",domain:"Operations",description:"Represent addition and subtraction",keywords:["addition","subtraction","basic operations"]}],1:[{id:"CCSS.MATH.1.OA.A.1",domain:"Operations",description:"Use addition and subtraction within 20",keywords:["addition","subtraction","facts"]},{id:"CCSS.MATH.1.NBT.A.1",domain:"Number & Operations",description:"Extend counting sequence to 120",keywords:["counting","place value"]},{id:"CCSS.MATH.1.MD.A.1",domain:"Measurement",description:"Order  three objects by length",keywords:["measurement","length","comparison"]}],2:[{id:"CCSS.MATH.2.OA.A.1",domain:"Operations",description:"Use addition and subtraction within 100",keywords:["addition","subtraction","two-digit"]},{id:"CCSS.MATH.2.NBT.A.1",domain:"Number & Operations",description:"Understand place value",keywords:["place value","hundreds","tens","ones"]},{id:"CCSS.MATH.2.MD.C.8",domain:"Measurement",description:"Solve money problems",keywords:["money","dollars","cents"]}],3:[{id:"CCSS.MATH.3.OA.A.3",domain:"Operations",description:"Use multiplication and division within 100",keywords:["multiplication","division","facts"]},{id:"CCSS.MATH.3.NF.A.1",domain:"Fractions",description:"Understand fractions as numbers",keywords:["fractions","parts of whole"]},{id:"CCSS.MATH.3.MD.A.2",domain:"Measurement",description:"Measure and estimate liquid volumes and masses",keywords:["measurement","volume","mass"]}],4:[{id:"CCSS.MATH.4.OA.A.3",domain:"Operations",description:"Solve multistep word problems",keywords:["word problems","multi-step","operations"]},{id:"CCSS.MATH.4.NF.B.3",domain:"Fractions",description:"Understand decimal notation for fractions",keywords:["decimals","fractions","place value"]},{id:"CCSS.MATH.4.G.A.1",domain:"Geometry",description:"Draw and identify lines and angles",keywords:["geometry","lines","angles"]}],5:[{id:"CCSS.MATH.5.NBT.A.1",domain:"Number & Operations",description:"Recognize place value patterns",keywords:["place value","patterns","powers of 10"]},{id:"CCSS.MATH.5.NF.A.1",domain:"Fractions",description:"Add and subtract fractions with unlike denominators",keywords:["fractions","addition","subtraction","unlike denominators"]},{id:"CCSS.MATH.5.MD.C.5",domain:"Measurement",description:"Relate volume to multiplication and addition",keywords:["volume","measurement","multiplication"]}]},Singapore_Primary_Math:{P1:[{id:"SG.P1.NUM.1",domain:"Numbers",description:"Numbers up to 100",keywords:["counting","numbers","place value"]},{id:"SG.P1.NUM.2",domain:"Numbers",description:"Addition and subtraction within 100",keywords:["addition","subtraction","basic operations"]},{id:"SG.P1.MEA.1",domain:"Measurement",description:"Length and mass",keywords:["measurement","length","mass","comparison"]}],P2:[{id:"SG.P2.NUM.1",domain:"Numbers",description:"Numbers up to 1000",keywords:["place value","thousands"]},{id:"SG.P2.NUM.2",domain:"Numbers",description:"Multiplication and division",keywords:["multiplication","division","times tables"]},{id:"SG.P2.FRA.1",domain:"Fractions",description:"Basic fractions (halves, quarters)",keywords:["fractions","parts","whole"]}],P3:[{id:"SG.P3.NUM.1",domain:"Numbers",description:"Numbers up to 10,000",keywords:["place value","large numbers"]},{id:"SG.P3.FRA.1",domain:"Fractions",description:"Equivalent fractions",keywords:["equivalent fractions","simplification"]},{id:"SG.P3.MEA.1",domain:"Measurement",description:"Time and money",keywords:["time","money","calculation"]}],P4:[{id:"SG.P4.NUM.1",domain:"Numbers",description:"Numbers up to 100,000",keywords:["place value","rounding"]},{id:"SG.P4.FRA.1",domain:"Fractions",description:"Addition and subtraction of fractions",keywords:["fractions","operations"]},{id:"SG.P4.DEC.1",domain:"Decimals",description:"Decimals up to 2 decimal places",keywords:["decimals","place value"]}],P5:[{id:"SG.P5.FRA.1",domain:"Fractions",description:"Multiplication and division of fractions",keywords:["fractions","multiplication","division"]},{id:"SG.P5.PER.1",domain:"Percentage",description:"Percentage",keywords:["percentage","conversion"]},{id:"SG.P5.RAT.1",domain:"Ratio",description:"Basic ratio",keywords:["ratio","proportion"]}],P6:[{id:"SG.P6.RAT.1",domain:"Ratio",description:"Advanced ratio and proportion",keywords:["ratio","proportion","problem solving"]},{id:"SG.P6.ALG.1",domain:"Algebra",description:"Simple algebraic expressions",keywords:["algebra","expressions","variables"]},{id:"SG.P6.GEO.1",domain:"Geometry",description:"Area and perimeter of complex shapes",keywords:["area","perimeter","geometry"]}]},UK_National_Math:{"Year 1":[{id:"UK.Y1.NUM.1",domain:"Number",description:"Count to and across 100",keywords:["counting","numbers"]},{id:"UK.Y1.NUM.2",domain:"Number",description:"Addition and subtraction facts to 20",keywords:["addition","subtraction","number bonds"]}],"Year 2":[{id:"UK.Y2.NUM.1",domain:"Number",description:"Recall multiplication and division facts for 2, 5, and 10",keywords:["multiplication","division","times tables"]},{id:"UK.Y2.FRA.1",domain:"Fractions",description:"Recognize simple fractions",keywords:["fractions","halves","quarters","thirds"]}],"Year 3":[{id:"UK.Y3.NUM.1",domain:"Number",description:"Recall multiplication and division facts for 3, 4, and 8",keywords:["multiplication","division","times tables"]},{id:"UK.Y3.FRA.1",domain:"Fractions",description:"Add and subtract fractions with same denominator",keywords:["fractions","addition","subtraction"]}]}};function AssignmentWizard(e){let{onSave:t,onCancel:a,classData:n}=e,[l,d]=(0,s.useState)(1),[o,p]=(0,s.useState)({title:"",description:"",dueDate:"",points:100,topic:"",type:"assignment",rubric:null,attachments:[],curriculumStandards:[],settings:{allowLateSubmissions:!0,latePenalty:10,enablePeerReview:!1,checkPlagiarism:!0,allowResubmission:!1}}),[x,h]=(0,s.useState)(!1),updateField=(e,t)=>{p({...o,[e]:t})},updateSetting=(e,t)=>{p({...o,settings:{...o.settings,[e]:t}})},handleGenerateRubric=async()=>{h(!0);try{let e=await (0,m.tz)(o.title,o.description,o.points);updateField("rubric",e)}catch(e){console.error("Failed to generate rubric:",e)}h(!1)};return(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsxs)("span",{className:"text-sm font-medium text-text-secondary",children:["Step ",l," of ",4]}),(0,i.jsxs)("span",{className:"text-sm text-text-tertiary",children:[Math.round(l/4*100),"% Complete"]})]}),(0,i.jsx)("div",{className:"h-2 bg-neutral-200 dark:bg-neutral-700 rounded-full overflow-hidden",children:(0,i.jsx)(r.E.div,{className:"h-full bg-gradient-to-r from-primary-500 to-secondary-500",initial:{width:0},animate:{width:"".concat(l/4*100,"%")},transition:{duration:.3}})}),(0,i.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-4",children:["Basic Info","Details","Rubric","Settings"].map((e,t)=>(0,i.jsx)("div",{className:"text-center text-xs font-medium ".concat(t+1===l?"text-primary-600":t+1<l?"text-secondary-600":"text-text-tertiary"),children:e},e))})]}),(0,i.jsxs)(c.M,{mode:"wait",children:[1===l&&(0,i.jsxs)(r.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-text-primary",children:"Basic Information"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Assignment Title *"}),(0,i.jsx)("input",{type:"text",value:o.title,onChange:e=>updateField("title",e.target.value),className:"input text-lg",placeholder:"e.g., Fractions Practice Worksheet",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Type"}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-3",children:["assignment","quiz","project"].map(e=>(0,i.jsx)("button",{onClick:()=>updateField("type",e),className:"p-4 rounded-xl border-2 transition-all ".concat(o.type===e?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-border-primary hover:border-primary-300"),children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-2xl mb-2",children:["assignment"===e&&"\uD83D\uDCDD","quiz"===e&&"\uD83D\uDCCA","project"===e&&"\uD83C\uDFA8"]}),(0,i.jsx)("div",{className:"font-medium text-text-primary capitalize",children:e})]})},e))})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Due Date *"}),(0,i.jsx)("input",{type:"datetime-local",value:o.dueDate,onChange:e=>updateField("dueDate",e.target.value),className:"input",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Total Points *"}),(0,i.jsx)("input",{type:"number",value:o.points,onChange:e=>updateField("points",Number(e.target.value)),className:"input",min:"1",required:!0})]})]})]},"step1"),2===l&&(0,i.jsxs)(r.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-text-primary",children:"Assignment Details"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Topic/Subject Area"}),(0,i.jsx)("input",{type:"text",value:o.topic,onChange:e=>updateField("topic",e.target.value),className:"input",placeholder:"e.g., Fractions, Addition, Algebra"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Instructions *"}),(0,i.jsx)("textarea",{value:o.description,onChange:e=>updateField("description",e.target.value),className:"input min-h-[150px]",placeholder:"Provide clear instructions for students...",rows:6,required:!0}),(0,i.jsx)("p",{className:"text-xs text-text-tertiary mt-1",children:"Be specific about what students should do and how they'll be evaluated"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("label",{className:"label mb-0",children:"Curriculum Standards"}),(0,i.jsxs)("button",{onClick:()=>{if(!n)return;let e=[o.topic,...o.description.split(" ").filter(e=>e.length>4)],t=function(e){let{curriculum:t,level:a,keywords:i=[]}=e,s=u[t];if(!s)return[];let r=s[a];return r?0===i.length?r:r.filter(e=>{let t="".concat(e.description," ").concat(e.keywords.join(" ")).toLowerCase();return i.some(e=>t.includes(e.toLowerCase()))}):[]}({curriculum:"US_CommonCore_Math",level:n.level||"K",keywords:e});updateField("curriculumStandards",t.map(e=>e.id))},className:"btn btn-sm btn-outline",disabled:!o.topic,children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Auto-Find"]})]}),(0,i.jsx)("div",{className:"text-sm text-text-secondary",children:o.curriculumStandards.length>0?(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:o.curriculumStandards.map(e=>(0,i.jsx)("span",{className:"px-2 py-1 bg-primary-100 dark:bg-primary-900/20 rounded text-primary-700 dark:text-primary-300",children:e},e))}):(0,i.jsx)("p",{className:"text-text-tertiary italic",children:"No standards selected"})})]})]},"step2"),3===l&&(0,i.jsxs)(r.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-text-primary",children:"Grading Rubric"}),!o.rubric&&(0,i.jsx)("button",{onClick:handleGenerateRubric,disabled:x||!o.title,className:"btn btn-outline",children:x?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Generating..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"AI Generate"]})})]}),o.rubric?(0,i.jsx)(RubricBuilder,{initialRubric:o.rubric,onSave:e=>updateField("rubric",e),onCancel:()=>updateField("rubric",null)}):(0,i.jsxs)("div",{className:"card p-12 text-center",children:[(0,i.jsx)("div",{className:"w-20 h-20 rounded-full bg-neutral-100 dark:bg-neutral-800 flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)("svg",{className:"w-10 h-10 text-neutral-400",fill:"none",viewBox:"0 0 24 24 ",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"No Rubric Yet"}),(0,i.jsx)("p",{className:"text-text-secondary mb-6",children:"Create a rubric to provide clear grading criteria, or use AI to generate one based on your assignment."}),(0,i.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,i.jsx)("button",{onClick:()=>updateField("rubric",{criteria:[]}),className:"btn btn-primary",children:"Create Manually"}),(0,i.jsx)("button",{onClick:handleGenerateRubric,disabled:x||!o.title,className:"btn btn-outline",children:"Generate with AI"})]})]})]},"step3"),4===l&&(0,i.jsxs)(r.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-text-primary",children:"Assignment Settings"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-text-primary",children:"Allow Late Submissions"}),(0,i.jsx)("p",{className:"text-sm text-text-secondary",children:"Students can submit after the due date"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)("input",{type:"checkbox",checked:o.settings.allowLateSubmissions,onChange:e=>updateSetting("allowLateSubmissions",e.target.checked),className:"sr-only peer"}),(0,i.jsx)("div",{className:"w-11 h-6 bg-neutral-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-neutral-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-neutral-600 peer-checked:bg-primary-600"})]})]}),o.settings.allowLateSubmissions&&(0,i.jsxs)("div",{className:"ml-4 pl-4 border-l-2 border-primary-300",children:[(0,i.jsx)("label",{className:"label",children:"Late Penalty (%)"}),(0,i.jsx)("input",{type:"number",value:o.settings.latePenalty,onChange:e=>updateSetting("latePenalty",Number(e.target.value)),className:"input w-32",min:"0",max:"100"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-text-primary",children:"Check for Plagiarism"}),(0,i.jsx)("p",{className:"text-sm text-text-secondary",children:"Automatically check submissions for similarity"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)("input",{type:"checkbox",checked:o.settings.checkPlagiarism,onChange:e=>updateSetting("checkPlagiarism",e.target.checked),className:"sr-only peer"}),(0,i.jsx)("div",{className:"w-11 h-6 bg-neutral-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-neutral-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-neutral-600 peer-checked:bg-primary-600"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-text-primary",children:"Enable Peer Review"}),(0,i.jsx)("p",{className:"text-sm text-text-secondary",children:"Students review each other's work"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)("input",{type:"checkbox",checked:o.settings.enablePeerReview,onChange:e=>updateSetting("enablePeerReview",e.target.checked),className:"sr-only peer"}),(0,i.jsx)("div",{className:"w-11 h-6 bg-neutral-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-neutral-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-neutral-600 peer-checked:bg-primary-600"})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-text-primary",children:"Allow Resubmission"}),(0,i.jsx)("p",{className:"text-sm text-text-secondary",children:"Students can submit multiple times"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)("input",{type:"checkbox",checked:o.settings.allowResubmission,onChange:e=>updateSetting("allowResubmission",e.target.checked),className:"sr-only peer"}),(0,i.jsx)("div",{className:"w-11 h-6 bg-neutral-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-neutral-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-neutral-600 peer-checked:bg-primary-600"})]})]})]})]},"step4")]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-border-primary",children:[(0,i.jsx)("button",{onClick:a,className:"btn btn-ghost text-text-secondary",children:"Cancel"}),(0,i.jsxs)("div",{className:"flex gap-3",children:[l>1&&(0,i.jsxs)("button",{onClick:()=>d(l-1),className:"btn btn-outline",children:[(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),l<4?(0,i.jsxs)("button",{onClick:()=>d(l+1),disabled:!o.title||!o.description||!o.dueDate,className:"btn btn-primary",children:["Next",(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):(0,i.jsxs)("button",{onClick:()=>{t(o)},disabled:!o.title||!o.description||!o.dueDate,className:"btn btn-primary",children:[(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Create Assignment"]})]})]})]})}var p=a(6353),x=a(8454),h=a(7290),b=a(7483);function AssignmentsPage(){let{user:e}=(0,h.q)(),t=(0,b.z)(),[a,l]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[g,f]=(0,s.useState)(!0),[v,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)("all");(0,s.useEffect)(()=>{loadData()},[e]);let loadData=async()=>{if(e){f(!0);try{let[t,a]=await Promise.all([(0,m.vS)(e.uid),(0,x.nW)(e.uid)]);l(t),u(a)}catch(e){console.error("Failed to load data:",e),t.error("Failed to load assignments")}f(!1)}},handleCreateAssignment=async a=>{try{await (0,m.vK)({...a,teacherId:e.uid}),t.success("Assignment created successfully!"),y(!1),loadData()}catch(e){console.error("Failed to create assignment:",e),t.error("Failed to create assignment")}},w=a.filter(e=>"all"===j||("published"===j?"published"===e.status:"draft"!==j||"draft"===e.status));return g?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{}),(0,i.jsx)("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900",children:(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,i.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(e=>(0,i.jsx)("div",{className:"skeleton h-32 rounded-2xl"},e))})})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{}),(0,i.jsx)("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:"Assignments"}),(0,i.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 mt-1",children:"Create and manage your assignments"})]}),(0,i.jsxs)("button",{onClick:()=>y(!0),className:"btn btn-primary group",children:[(0,i.jsx)("svg",{className:"w-5 h-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Assignment"]})]}),(0,i.jsx)("div",{className:"flex items-center gap-2 mb-6",children:["all","published","draft"].map(e=>(0,i.jsx)("button",{onClick:()=>N(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(j===e?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"bg-white dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),0===w.length?(0,i.jsx)(p.hw,{onCreate:()=>y(!0)}):(0,i.jsx)("div",{className:"space-y-4",children:w.map((e,t)=>{let a=new Date>new Date(e.dueDate);return(0,i.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:(0,i.jsx)(d(),{href:"/assignments/".concat(e.id),children:(0,i.jsx)("div",{className:"group bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 p-6 hover:shadow-xl hover:shadow-primary-500/10 transition-all cursor-pointer",children:(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[(0,i.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg ".concat("published"===e.status?"bg-gradient-to-br from-secondary-500 to-tertiary-500 shadow-secondary-500/25":"bg-gradient-to-br from-neutral-400 to-neutral-500 shadow-neutral-500/25"),children:(0,i.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:e.title}),(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("published"===e.status?"bg-secondary-100 dark:bg-secondary-900/30 text-secondary-700 dark:text-secondary-300":"bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300"),children:e.status})]}),(0,i.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-4 line-clamp-2",children:e.description}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-neutral-600 dark:text-neutral-400",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,i.jsxs)("span",{className:a?"text-error font-semibold":"",children:["Due: ",(0,n.Z)(new Date(e.dueDate),"MMM dd, h:mm a")]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),(0,i.jsxs)("span",{children:[e.points," points"]})]}),e.className&&(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,i.jsx)("span",{children:e.className})]})]})]})]})})})},e.id)})})]})}),v&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-modal-backdrop flex items-center justify-center p-4",children:(0,i.jsx)("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,i.jsx)(AssignmentWizard,{onSave:handleCreateAssignment,onCancel:()=>y(!1),classData:c[0]})})})]})}}},function(e){e.O(0,[260,299,774,888,179],function(){return e(e.s=5693)}),_N_E=e.O()}]);