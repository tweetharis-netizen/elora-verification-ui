(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{8117:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return s(1074)}])},1074:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return SettingsPage}});var a=s(5893),r=s(1664),l=s.n(r),i=s(7294),n=s(1163),d=s(3833);let o=[{id:"student",title:"Student",desc:"Learn step-by-step. ‘Check my answer’ uses attempts (answer on attempt 3)."},{id:"parent",title:"Parent",desc:"Plain language coaching. What to say and do at home."},{id:"educator",title:"Educator",desc:"Teacher workflows. Locked behind verification + invite code for teacher tools."}];function SettingsPage(){var e,t,s;let r=(0,n.useRouter)(),c=String((null===(e=r.query)||void 0===e?void 0:e.focus)||""),[m,x]=(0,i.useState)("system"),[h,u]=(0,i.useState)(1),[f,p]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),[j,N]=(0,i.useState)("student"),[g,y]=(0,i.useState)(""),[k,w]=(0,i.useState)(""),[S,C]=(0,i.useState)(!1),[E,T]=(0,i.useState)(""),_=(0,i.useRef)(null),V=(0,i.useMemo)(()=>(0,d.Hk)(),[f,v]);async function redeem(){if(T(""),!f){T("Verify your email first, then redeem a teacher invite code.");return}let e=k.trim();if(!e){T("Enter an invite code.");return}C(!0);try{let t=await (0,d.e6)(e);if(!t.ok){T("invalid_invite"===t.error?"Invite code not accepted.":"Could not redeem code.");return}(0,d.rE)(e),b(!0),T("Teacher tools unlocked ✅")}finally{C(!1)}}async function clearTeacherTools(){T(""),C(!0);try{await (0,d.P3)(),b(!1),(0,d.rE)(""),T("Teacher tools cleared.")}finally{C(!1)}}return(0,i.useEffect)(()=>{let e=(0,d.Gg)();if(e.verified&&"student"===e.role&&!e.studentCode){let t="ELORA-"+Math.random().toString(36).substring(2,6).toUpperCase();e.studentCode=t,(0,d.Aj)(e)}x(e.theme||"system"),u("number"==typeof e.fontScale?e.fontScale:1),p(!!e.verified),b(!!e.teacher),w(e.teacherCode||""),N(String(e.role||"student")),y(e.studentCode||""),(0,d.S0)().then(()=>{let e=(0,d.Gg)();p(!!e.verified),b(!!e.teacher),w(e.teacherCode||""),N(String(e.role||"student"))})},[]),(0,i.useEffect)(()=>{if("role"!==c||!_.current)return;let e=window.setTimeout(()=>{_.current.scrollIntoView({behavior:"smooth",block:"start"})},120);return()=>window.clearTimeout(e)},[c]),(0,a.jsx)("div",{className:"elora-page",children:(0,a.jsx)("div",{className:"elora-container",children:(0,a.jsxs)("div",{className:"elora-card relative overflow-hidden p-6 md:p-8",children:[(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -inset-24 bg-gradient-to-br from-indigo-500/15 via-sky-400/10 to-fuchsia-500/15 blur-3xl"}),(0,a.jsx)("div",{className:"absolute inset-0 elora-grain"})]}),(0,a.jsxs)("div",{className:"relative flex flex-wrap items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"elora-h1 text-4xl md:text-5xl font-black",children:"Settings"}),(0,a.jsx)("p",{className:"elora-muted mt-2 max-w-[66ch]",children:"Clean, calm preferences that apply across Elora."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"elora-chip","data-variant":f?"good":"warn",children:f?"Email verified":"Not verified"}),(0,a.jsx)("span",{className:"elora-chip","data-variant":v?"good":"warn",children:v?"Teacher unlocked":"Teacher locked"})]})]}),f?null:(0,a.jsx)("div",{className:"relative mt-6 elora-card p-4 md:p-5",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-extrabold",children:"Verification required"}),(0,a.jsx)("div",{className:"elora-muted text-sm mt-1",children:"Verify once and Elora stays unlocked across refreshes."})]}),(0,a.jsx)(l(),{className:"elora-btn elora-btn-primary",href:"/verify",children:"Verify email"})]})}),(0,a.jsxs)("div",{className:"relative mt-8 grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)("section",{ref:_,className:"elora-card p-5 md:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-extrabold",children:"Role"}),(0,a.jsx)("p",{className:"elora-muted mt-1 text-sm",children:"Pick the perspective Elora should use by default."})]}),(0,a.jsx)(l(),{className:"elora-btn",href:"/assistant",children:"Open Assistant"})]}),(0,a.jsx)("div",{className:"mt-5 grid gap-3",children:o.map(e=>{let t=j===e.id;return(0,a.jsxs)("button",{type:"button",onClick:()=>(function(e){let t=String(e||"student");if("educator"===t&&!f){T("Please verify your email first to access Educator tools.");return}N(t),(0,d.gD)(t),T("")})(e.id),className:["text-left elora-card p-4 transition",t?"ring-2 ring-indigo-500/40":"hover:opacity-[0.98]"].join(" "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("div",{className:"font-extrabold",children:e.title}),(0,a.jsx)("span",{className:"elora-chip","data-variant":t?"good":"warn",children:t?"Selected":"Select"})]}),(0,a.jsx)("div",{className:"elora-muted text-sm mt-2",children:e.desc}),"educator"!==e.id||f?null:(0,a.jsx)("div",{className:"mt-2 text-sm font-extrabold text-amber-600 dark:text-amber-500",children:"Verification required for this role."})]},e.id)})})]}),(0,a.jsxs)("section",{className:"elora-card p-5 md:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-extrabold",children:"Sharing & Groups"}),(0,a.jsx)("p",{className:"elora-muted mt-1 text-sm",children:"Link accounts to track progress together."}),(0,a.jsxs)("div",{className:"mt-6 space-y-6",children:["student"===j&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-extrabold",children:"Your Sharing Code"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Share this with your parents so they can see your progress."}),f?(0,a.jsxs)("div",{className:"mt-3 p-4 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl flex items-center justify-between",children:[(0,a.jsx)("code",{className:"text-lg font-black text-indigo-500",children:g}),(0,a.jsx)("button",{className:"text-xs font-bold text-slate-500 underline",onClick:()=>navigator.clipboard.writeText(g),children:"Copy"})]}):(0,a.jsxs)("div",{className:"mt-3 p-4 border border-dashed border-amber-300 dark:border-amber-700/50 rounded-xl bg-amber-50/30 dark:bg-amber-950/20",children:[(0,a.jsx)("div",{className:"text-xs font-bold text-amber-700 dark:text-amber-300",children:"Verification Required"}),(0,a.jsx)("p",{className:"text-[10px] text-amber-600 dark:text-amber-400/80 mt-1",children:"Verify your email to generate a sharing code and link with parents."}),(0,a.jsx)(l(),{href:"/verify",className:"inline-block mt-3 text-[10px] font-black uppercase tracking-widest text-indigo-500 hover:underline",children:"Verify Now →"})]})]}),"parent"===j&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-extrabold",children:"Linked Student"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Link your child's account using their sharing code in the Dashboard."}),(0,a.jsx)("div",{className:"mt-3 p-4 border border-dashed border-slate-300 dark:border-slate-700 rounded-xl text-center",children:(0,a.jsx)("div",{className:"text-xs font-bold text-slate-400",children:"Head to Dashboard to link a code"})})]}),"student"!==j&&"parent"!==j&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-extrabold",children:"Classroom Identity"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Customize how your classroom appears on the Dashboard."}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsx)("input",{className:"elora-input",placeholder:"e.g. 7th Grade Science",defaultValue:(null===(s=(0,d.Gg)())||void 0===s?void 0:null===(t=s.classroom)||void 0===t?void 0:t.name)||"My Classroom",onBlur:e=>{let t=(0,d.Gg)();t.classroom||(t.classroom={name:""}),t.classroom.name=e.target.value,(0,d.Aj)(t)}}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)("button",{onClick:()=>{if(confirm("Are you sure? This will remove all students from your roster.")){let e=(0,d.Gg)();e.linkedStudents=[],(0,d.Aj)(e),window.location.reload()}},className:"text-xs font-bold text-red-500 hover:underline",children:"Reset Class Roster"})})]})]})]})]}),(0,a.jsxs)("section",{className:"elora-card p-5 md:p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-extrabold",children:"Preferences"}),(0,a.jsx)("p",{className:"elora-muted mt-1 text-sm",children:"Theme and font size apply across the whole UI."}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("div",{className:"text-sm font-extrabold",children:"Theme"}),(0,a.jsx)("div",{className:"mt-3 elora-segmented",role:"tablist","aria-label":"Theme",children:[{id:"system",label:"System"},{id:"dark",label:"Dark"},{id:"light",label:"Light"}].map(e=>(0,a.jsx)("button",{className:e.id===m?"active":"",onClick:()=>{var t;x(t=e.id),(0,d.Dc)(t),T("")},type:"button",children:e.label},e.id))})]}),(0,a.jsxs)("div",{className:"mt-7",children:[(0,a.jsx)("div",{className:"text-sm font-extrabold",children:"Font size"}),(0,a.jsx)("div",{className:"elora-muted mt-1 text-sm",children:"Use this if the UI feels too small on your device."}),(0,a.jsx)("input",{className:"mt-4 w-full",type:"range",min:.85,max:1.4,step:.01,value:h,onChange:e=>(function(e){let t=Math.min(1.4,Math.max(.85,Number(e)||1));u(t),(0,d.k4)(t),T("")})(e.target.value)}),(0,a.jsxs)("div",{className:"mt-2 text-sm",children:["Scale: ",(0,a.jsxs)("span",{className:"font-extrabold",children:[h.toFixed(2),"x"]})]})]})]}),(0,a.jsxs)("section",{className:"elora-card p-5 md:p-6 lg:col-span-2",children:[(0,a.jsx)("h2",{className:"text-lg font-extrabold",children:"Access"}),(0,a.jsx)("p",{className:"elora-muted mt-1 text-sm",children:"Teacher tools are optional and locked behind an invite code."}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("div",{className:"text-sm font-extrabold",children:"Teacher invite code"}),(0,a.jsx)("span",{className:"elora-chip","data-variant":v?"good":"warn",children:v?"Unlocked":"Locked"})]}),(0,a.jsx)("p",{className:"elora-muted mt-2 text-sm",children:"Unlock teacher-only tools (lesson plans, worksheets, exports). Not required for normal Assistant use."}),(0,a.jsxs)("div",{className:"mt-4 grid gap-3",children:[(0,a.jsx)("input",{className:"elora-input",value:k,onChange:e=>w(e.target.value),placeholder:f?"Enter invite code (e.g., GENESIS2026)":"Verify first",disabled:!f||S}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsx)("button",{className:"elora-btn elora-btn-primary",onClick:redeem,disabled:!f||S,type:"button",children:S?"Working…":"Redeem"}),v?(0,a.jsx)("button",{className:"elora-btn elora-btn-danger",onClick:clearTeacherTools,disabled:S,type:"button",children:"Clear teacher"}):null]}),E?(0,a.jsx)("div",{className:"text-sm font-extrabold",children:E}):null]}),V?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-7 elora-divider"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-extrabold",children:"Sign out"}),(0,a.jsx)("div",{className:"elora-muted text-sm mt-1",children:"Clears your verification session on this device."})]}),(0,a.jsx)("button",{className:"elora-btn elora-btn-danger",onClick:async()=>{T(""),C(!0);try{await (0,d.kS)()}finally{(0,d.gD)("student"),(0,d.rE)(""),b(!1),p(!1),C(!1),T("Signed out."),window.location.href="/"}},disabled:S,type:"button",children:"Log out"})]})]}):null]})]})]})]})})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8117)}),_N_E=e.O()}]);