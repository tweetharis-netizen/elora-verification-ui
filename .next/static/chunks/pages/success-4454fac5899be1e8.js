(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{9869:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/success",function(){return n(5528)}])},5528:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return Success}});var t=n(5893),r=n(7294),a=n(1163),s=n(3833);function Success(){let e=(0,a.useRouter)(),[i,n]=(0,r.useState)("Finalizing verification…");return(0,r.useEffect)(()=>{var i;if(!e.isReady)return;let t=String((null===(i=e.query)||void 0===i?void 0:i.code)||"").trim();if(!t){n("Missing verification code. Try verifying again.");return}let run=async()=>{try{let i=await fetch("/api/verification/exchange",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})}),r=await i.json().catch(()=>null);if(!i.ok||!(null==r?void 0:r.ok))throw Error((null==r?void 0:r.error)||"Exchange failed.");await (0,s.S0)();let a=(0,s.Gg)();if(a.pendingInvite){let e=String(a.pendingInvite).trim();n("Verified. Applying teacher invite…");let i=await (0,s.e6)(e);await (0,s.S0)();let t=(0,s.Gg)();t.pendingInvite="",(0,s.Aj)(t),(null==i?void 0:i.ok)?n("Verified + teacher tools unlocked. Redirecting…"):n("Verified, but invite invalid. Redirecting…")}else n("Verified. Redirecting…");setTimeout(()=>e.push("/assistant"),700)}catch(e){n((null==e?void 0:e.message)||"Failed to finalize verification.")}};run()},[e.isReady,e.query,e]),(0,t.jsx)("div",{className:"mx-auto max-w-xl px-4",children:(0,t.jsxs)("div",{className:"elora-card p-6 sm:p-8",children:[(0,t.jsx)("h1",{className:"text-[1.3rem] font-black",children:"✅ Success"}),(0,t.jsx)("p",{className:"mt-2 elora-muted",children:i})]})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9869)}),_N_E=e.O()}]);