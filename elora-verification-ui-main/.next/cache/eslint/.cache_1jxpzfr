[{"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\analytics.js":"1","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\assistant.js":"2","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\chat\\batch.js":"3","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\chat\\clear.js":"4","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\chat\\get.js":"5","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\chat\\set.js":"6","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export\\doc.js":"7","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export\\slides.js":"8","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export-docx.js":"9","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export-pdf.js":"10","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export-slides.js":"11","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export-worksheet.js":"12","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\google\\auth.js":"13","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\google\\callback.js":"14","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\logout.js":"15","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\rubric\\generate.js":"16","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\send-verification-email.js":"17","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\session\\clear.js":"18","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\session\\set.js":"19","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\session\\status.js":"20","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\teacher\\activate.js":"21","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\teacher\\clear.js":"22","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\teacher-invite.js":"23","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verification\\confirm.js":"24","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verification\\exchange.js":"25","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verification\\send.js":"26","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verification\\status.js":"27","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verify\\confirm.js":"28","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verify\\send.js":"29","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verify-email-token.js":"30","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\assignments\\index.js":"31","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\assignments\\[assignmentId].js":"32","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\assistant.js":"33","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\classes\\index.js":"34","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\classes\\[classId].js":"35","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\classes.js":"36","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\dashboard\\educator.js":"37","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\dashboard\\index.js":"38","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\dashboard\\learner.js":"39","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\demo.js":"40","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\grades\\index.js":"41","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\help.js":"42","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\index.js":"43","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\invite.js":"44","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\onboarding.js":"45","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\settings.js":"46","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\story.js":"47","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\success.js":"48","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\verified.js":"49","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\verify.js":"50","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\_app.js":"51","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\analytics\\InterventionAlerts.js":"52","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\analytics\\PerformanceHeatmap.js":"53","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\AssignmentComponents.js":"54","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\assignments\\AssignmentWizard.js":"55","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\assignments\\GradingInterface.js":"56","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\chat\\PersonalitySelector.js":"57","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\classes\\ClassRoster.js":"58","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\AssignmentWizard.js":"59","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\ClassWizard.js":"60","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\DashboardShared.js":"61","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\DashboardUI.js":"62","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\ParentModule.js":"63","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\QuizGenerator.js":"64","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\StudentModule.js":"65","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\TeacherModule.js":"66","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\TeacherOverview.js":"67","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\TeacherSidebar.js":"68","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\TeacherVideoExplorer.js":"69","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\VoiceAssistant.js":"70","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\DashboardPreview.js":"71","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\EloraStats.js":"72","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ErrorBoundary.js":"73","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\GradingModal.js":"74","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\HeroScene.js":"75","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\landing\\FeatureHighlights.js":"76","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\landing\\FounderStory.js":"77","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\landing\\HeroSection.js":"78","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Layout.js":"79","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Modal.js":"80","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\MotionPolyfill.js":"81","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Navbar.js":"82","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Navigation.js":"83","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Notifications.js":"84","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\parent\\ProgressDashboard.js":"85","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\PersonaFeatures.js":"86","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\RoleIllustration.js":"87","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\RubricBuilder.js":"88","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\SimpleCharts.js":"89","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\student\\SubmissionForm.js":"90","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\SubmissionModal.js":"91","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ThemeToggle.js":"92","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\TrustedByBar.js":"93","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ui\\ConfirmationFeedback.js":"94","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ui\\EmptyStates.js":"95","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ui\\ErrorMessages.js":"96","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ui\\LoadingStates.js":"97","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\chatThreads.js":"98","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\contentModeration.js":"99","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\contexts\\AppContext.js":"100","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\contexts\\NotificationContext.js":"101","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\curriculum\\standards.js":"102","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\dashboard-utils.js":"103","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\demo-data.js":"104","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\demoData.js":"105","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firebase.js":"106","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\analytics.js":"107","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\assignments.js":"108","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\classes.js":"109","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\messaging.js":"110","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\resources.js":"111","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\submissions.js":"112","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\formatting.js":"113","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\plagiarismCheck.js":"114","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\promptTemplates.js":"115","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\server\\emailVerification.js":"116","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\server\\teacher.js":"117","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\server\\verification.js":"118","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\session.js":"119","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\videoLibrary.js":"120"},{"size":6840,"mtime":1770041765804,"results":"121","hashOfConfig":"122"},{"size":23394,"mtime":1770041765868,"results":"123","hashOfConfig":"122"},{"size":3613,"mtime":1770041765911,"results":"124","hashOfConfig":"122"},{"size":807,"mtime":1770041765918,"results":"125","hashOfConfig":"122"},{"size":873,"mtime":1770041765923,"results":"126","hashOfConfig":"122"},{"size":2594,"mtime":1770118619276,"results":"127","hashOfConfig":"122"},{"size":303,"mtime":1770041765935,"results":"128","hashOfConfig":"122"},{"size":303,"mtime":1770041765939,"results":"129","hashOfConfig":"122"},{"size":2626,"mtime":1770041765872,"results":"130","hashOfConfig":"122"},{"size":2055,"mtime":1770041765878,"results":"131","hashOfConfig":"122"},{"size":1885,"mtime":1770041765883,"results":"132","hashOfConfig":"122"},{"size":410,"mtime":1770041765887,"results":"133","hashOfConfig":"122"},{"size":576,"mtime":1770041765943,"results":"134","hashOfConfig":"122"},{"size":664,"mtime":1770041765951,"results":"135","hashOfConfig":"122"},{"size":1321,"mtime":1770041765893,"results":"136","hashOfConfig":"122"},{"size":2732,"mtime":1770041765956,"results":"137","hashOfConfig":"122"},{"size":47,"mtime":1770041765896,"results":"138","hashOfConfig":"122"},{"size":491,"mtime":1770041765962,"results":"139","hashOfConfig":"122"},{"size":475,"mtime":1770041765967,"results":"140","hashOfConfig":"122"},{"size":734,"mtime":1770041765972,"results":"141","hashOfConfig":"122"},{"size":1717,"mtime":1770041765976,"results":"142","hashOfConfig":"122"},{"size":1339,"mtime":1770041765982,"results":"143","hashOfConfig":"122"},{"size":1759,"mtime":1770041765902,"results":"144","hashOfConfig":"122"},{"size":2814,"mtime":1770041765987,"results":"145","hashOfConfig":"122"},{"size":1318,"mtime":1770041765992,"results":"146","hashOfConfig":"122"},{"size":1228,"mtime":1770041765996,"results":"147","hashOfConfig":"122"},{"size":575,"mtime":1770041766002,"results":"148","hashOfConfig":"122"},{"size":1668,"mtime":1770041766006,"results":"149","hashOfConfig":"122"},{"size":51,"mtime":1770041766011,"results":"150","hashOfConfig":"122"},{"size":50,"mtime":1770041765907,"results":"151","hashOfConfig":"122"},{"size":12926,"mtime":1770041766021,"results":"152","hashOfConfig":"122"},{"size":14220,"mtime":1770445066546,"results":"153","hashOfConfig":"122"},{"size":92583,"mtime":1770445047182,"results":"154","hashOfConfig":"122"},{"size":12461,"mtime":1770041766031,"results":"155","hashOfConfig":"122"},{"size":12774,"mtime":1770445139007,"results":"156","hashOfConfig":"122"},{"size":15259,"mtime":1770445198071,"results":"157","hashOfConfig":"122"},{"size":1140,"mtime":1770041766037,"results":"158","hashOfConfig":"122"},{"size":11962,"mtime":1770207133646,"results":"159","hashOfConfig":"122"},{"size":207,"mtime":1770041766048,"results":"160","hashOfConfig":"122"},{"size":13614,"mtime":1770445234222,"results":"161","hashOfConfig":"122"},{"size":23041,"mtime":1770445260037,"results":"162","hashOfConfig":"122"},{"size":4829,"mtime":1770041765825,"results":"163","hashOfConfig":"122"},{"size":898,"mtime":1770041765829,"results":"164","hashOfConfig":"122"},{"size":2273,"mtime":1770041765835,"results":"165","hashOfConfig":"122"},{"size":967,"mtime":1770041765839,"results":"166","hashOfConfig":"122"},{"size":17422,"mtime":1770445271881,"results":"167","hashOfConfig":"122"},{"size":10709,"mtime":1770445384439,"results":"168","hashOfConfig":"122"},{"size":2281,"mtime":1770041765853,"results":"169","hashOfConfig":"122"},{"size":1173,"mtime":1770365298586,"results":"170","hashOfConfig":"122"},{"size":5643,"mtime":1770397318576,"results":"171","hashOfConfig":"122"},{"size":1695,"mtime":1770396950649,"results":"172","hashOfConfig":"122"},{"size":10827,"mtime":1770041765557,"results":"173","hashOfConfig":"122"},{"size":8910,"mtime":1770041765562,"results":"174","hashOfConfig":"122"},{"size":16043,"mtime":1770389510772,"results":"175","hashOfConfig":"122"},{"size":28449,"mtime":1770457388268,"results":"176","hashOfConfig":"122"},{"size":16598,"mtime":1770465328831,"results":"177","hashOfConfig":"122"},{"size":4045,"mtime":1770125334578,"results":"178","hashOfConfig":"122"},{"size":21338,"mtime":1770041765582,"results":"179","hashOfConfig":"122"},{"size":10113,"mtime":1770122316493,"results":"180","hashOfConfig":"122"},{"size":10742,"mtime":1770122333815,"results":"181","hashOfConfig":"122"},{"size":2330,"mtime":1770041765598,"results":"182","hashOfConfig":"122"},{"size":6738,"mtime":1770124072843,"results":"183","hashOfConfig":"122"},{"size":8871,"mtime":1770445598782,"results":"184","hashOfConfig":"122"},{"size":7158,"mtime":1770445786650,"results":"185","hashOfConfig":"122"},{"size":17452,"mtime":1770433506010,"results":"186","hashOfConfig":"122"},{"size":9199,"mtime":1770433538874,"results":"187","hashOfConfig":"122"},{"size":7997,"mtime":1770433813646,"results":"188","hashOfConfig":"122"},{"size":7255,"mtime":1770122270604,"results":"189","hashOfConfig":"122"},{"size":5996,"mtime":1770122335148,"results":"190","hashOfConfig":"122"},{"size":8310,"mtime":1770122665462,"results":"191","hashOfConfig":"122"},{"size":3432,"mtime":1770379107789,"results":"192","hashOfConfig":"122"},{"size":5291,"mtime":1770433883065,"results":"193","hashOfConfig":"122"},{"size":2207,"mtime":1770041765480,"results":"194","hashOfConfig":"122"},{"size":11231,"mtime":1770466963937,"results":"195","hashOfConfig":"122"},{"size":3792,"mtime":1770041765490,"results":"196","hashOfConfig":"122"},{"size":3297,"mtime":1770433946996,"results":"197","hashOfConfig":"122"},{"size":6457,"mtime":1770434185891,"results":"198","hashOfConfig":"122"},{"size":5250,"mtime":1770126291637,"results":"199","hashOfConfig":"122"},{"size":163,"mtime":1770041765494,"results":"200","hashOfConfig":"122"},{"size":1886,"mtime":1770383858388,"results":"201","hashOfConfig":"122"},{"size":996,"mtime":1770434424594,"results":"202","hashOfConfig":"122"},{"size":11819,"mtime":1770380443882,"results":"203","hashOfConfig":"122"},{"size":15534,"mtime":1770380182887,"results":"204","hashOfConfig":"122"},{"size":1940,"mtime":1770041765519,"results":"205","hashOfConfig":"122"},{"size":16494,"mtime":1770435197535,"results":"206","hashOfConfig":"122"},{"size":10204,"mtime":1770041765523,"results":"207","hashOfConfig":"122"},{"size":3168,"mtime":1770041765528,"results":"208","hashOfConfig":"122"},{"size":10369,"mtime":1770432479148,"results":"209","hashOfConfig":"122"},{"size":1891,"mtime":1770379240311,"results":"210","hashOfConfig":"122"},{"size":12800,"mtime":1770041765668,"results":"211","hashOfConfig":"122"},{"size":7531,"mtime":1770389499729,"results":"212","hashOfConfig":"122"},{"size":2960,"mtime":1770041765548,"results":"213","hashOfConfig":"122"},{"size":3249,"mtime":1770041765552,"results":"214","hashOfConfig":"122"},{"size":9923,"mtime":1770041765672,"results":"215","hashOfConfig":"122"},{"size":10727,"mtime":1770436155798,"results":"216","hashOfConfig":"122"},{"size":11230,"mtime":1770041765684,"results":"217","hashOfConfig":"122"},{"size":6440,"mtime":1770041765688,"results":"218","hashOfConfig":"122"},{"size":10034,"mtime":1770041765693,"results":"219","hashOfConfig":"122"},{"size":7179,"mtime":1770041765698,"results":"220","hashOfConfig":"122"},{"size":3037,"mtime":1770041765741,"results":"221","hashOfConfig":"122"},{"size":4451,"mtime":1770041765744,"results":"222","hashOfConfig":"122"},{"size":10127,"mtime":1770041765751,"results":"223","hashOfConfig":"122"},{"size":10584,"mtime":1770041765702,"results":"224","hashOfConfig":"122"},{"size":4095,"mtime":1770122048243,"results":"225","hashOfConfig":"122"},{"size":7951,"mtime":1770436733178,"results":"226","hashOfConfig":"122"},{"size":1734,"mtime":1770118618437,"results":"227","hashOfConfig":"122"},{"size":10179,"mtime":1770041765756,"results":"228","hashOfConfig":"122"},{"size":7642,"mtime":1770041765760,"results":"229","hashOfConfig":"122"},{"size":6584,"mtime":1770041765766,"results":"230","hashOfConfig":"122"},{"size":6163,"mtime":1770041765770,"results":"231","hashOfConfig":"122"},{"size":6989,"mtime":1770041765774,"results":"232","hashOfConfig":"122"},{"size":7098,"mtime":1770041765779,"results":"233","hashOfConfig":"122"},{"size":1620,"mtime":1770041765717,"results":"234","hashOfConfig":"122"},{"size":5168,"mtime":1770436775780,"results":"235","hashOfConfig":"122"},{"size":9278,"mtime":1770041765726,"results":"236","hashOfConfig":"122"},{"size":1157,"mtime":1770041765785,"results":"237","hashOfConfig":"122"},{"size":3019,"mtime":1770041765789,"results":"238","hashOfConfig":"122"},{"size":2849,"mtime":1770041765794,"results":"239","hashOfConfig":"122"},{"size":9305,"mtime":1770121998587,"results":"240","hashOfConfig":"122"},{"size":6692,"mtime":1770041765735,"results":"241","hashOfConfig":"122"},{"filePath":"242","messages":"243","suppressedMessages":"244","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"245"},"12lvi4b",{"filePath":"246","messages":"247","suppressedMessages":"248","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"249","messages":"250","suppressedMessages":"251","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"252","messages":"253","suppressedMessages":"254","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"255","messages":"256","suppressedMessages":"257","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"258","messages":"259","suppressedMessages":"260","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"261","messages":"262","suppressedMessages":"263","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"264","messages":"265","suppressedMessages":"266","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"267","messages":"268","suppressedMessages":"269","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"270","messages":"271","suppressedMessages":"272","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"273","messages":"274","suppressedMessages":"275","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"276","messages":"277","suppressedMessages":"278","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"279","messages":"280","suppressedMessages":"281","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"282","messages":"283","suppressedMessages":"284","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"285","messages":"286","suppressedMessages":"287","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"288","messages":"289","suppressedMessages":"290","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"291","messages":"292","suppressedMessages":"293","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"294","messages":"295","suppressedMessages":"296","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"297","messages":"298","suppressedMessages":"299","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"300","messages":"301","suppressedMessages":"302","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"303","messages":"304","suppressedMessages":"305","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"306","messages":"307","suppressedMessages":"308","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"309","messages":"310","suppressedMessages":"311","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"312","messages":"313","suppressedMessages":"314","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"315","messages":"316","suppressedMessages":"317","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"318","messages":"319","suppressedMessages":"320","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"321","messages":"322","suppressedMessages":"323","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"324","messages":"325","suppressedMessages":"326","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"327","messages":"328","suppressedMessages":"329","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"330","messages":"331","suppressedMessages":"332","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"333","messages":"334","suppressedMessages":"335","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"336"},{"filePath":"337","messages":"338","suppressedMessages":"339","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"340"},{"filePath":"341","messages":"342","suppressedMessages":"343","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"344"},{"filePath":"345","messages":"346","suppressedMessages":"347","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"348"},{"filePath":"349","messages":"350","suppressedMessages":"351","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"352"},{"filePath":"353","messages":"354","suppressedMessages":"355","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"356","messages":"357","suppressedMessages":"358","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"359","messages":"360","suppressedMessages":"361","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"362","messages":"363","suppressedMessages":"364","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"365","messages":"366","suppressedMessages":"367","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"368","messages":"369","suppressedMessages":"370","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"371","messages":"372","suppressedMessages":"373","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"374","messages":"375","suppressedMessages":"376","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"377","messages":"378","suppressedMessages":"379","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"380","messages":"381","suppressedMessages":"382","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"383"},{"filePath":"384","messages":"385","suppressedMessages":"386","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"387","messages":"388","suppressedMessages":"389","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"390","messages":"391","suppressedMessages":"392","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"393","messages":"394","suppressedMessages":"395","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"396","messages":"397","suppressedMessages":"398","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"399","messages":"400","suppressedMessages":"401","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"402","messages":"403","suppressedMessages":"404","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"405","messages":"406","suppressedMessages":"407","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"408","messages":"409","suppressedMessages":"410","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"411","messages":"412","suppressedMessages":"413","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"414","messages":"415","suppressedMessages":"416","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"417","messages":"418","suppressedMessages":"419","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"420","messages":"421","suppressedMessages":"422","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"423","messages":"424","suppressedMessages":"425","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"426","messages":"427","suppressedMessages":"428","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"429","messages":"430","suppressedMessages":"431","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"432","messages":"433","suppressedMessages":"434","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"435","messages":"436","suppressedMessages":"437","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"438","messages":"439","suppressedMessages":"440","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"441","messages":"442","suppressedMessages":"443","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"444","messages":"445","suppressedMessages":"446","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"447","messages":"448","suppressedMessages":"449","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"450","messages":"451","suppressedMessages":"452","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"453","messages":"454","suppressedMessages":"455","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"456","messages":"457","suppressedMessages":"458","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"459","messages":"460","suppressedMessages":"461","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"462"},{"filePath":"463","messages":"464","suppressedMessages":"465","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"466","messages":"467","suppressedMessages":"468","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"469","messages":"470","suppressedMessages":"471","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"472","messages":"473","suppressedMessages":"474","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"475","messages":"476","suppressedMessages":"477","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"478","messages":"479","suppressedMessages":"480","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"481","messages":"482","suppressedMessages":"483","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"484","messages":"485","suppressedMessages":"486","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"487","messages":"488","suppressedMessages":"489","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"490","messages":"491","suppressedMessages":"492","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"493","messages":"494","suppressedMessages":"495","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"496","messages":"497","suppressedMessages":"498","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"499"},{"filePath":"500","messages":"501","suppressedMessages":"502","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"503","messages":"504","suppressedMessages":"505","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"506"},{"filePath":"507","messages":"508","suppressedMessages":"509","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"510","messages":"511","suppressedMessages":"512","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"513","messages":"514","suppressedMessages":"515","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"516","messages":"517","suppressedMessages":"518","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"519","messages":"520","suppressedMessages":"521","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"522"},{"filePath":"523","messages":"524","suppressedMessages":"525","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"526","messages":"527","suppressedMessages":"528","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"529","messages":"530","suppressedMessages":"531","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"532","messages":"533","suppressedMessages":"534","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"535","messages":"536","suppressedMessages":"537","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"538","messages":"539","suppressedMessages":"540","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"541","messages":"542","suppressedMessages":"543","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"544","messages":"545","suppressedMessages":"546","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"547","messages":"548","suppressedMessages":"549","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"550","messages":"551","suppressedMessages":"552","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"553"},{"filePath":"554","messages":"555","suppressedMessages":"556","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"557","messages":"558","suppressedMessages":"559","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"560","messages":"561","suppressedMessages":"562","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"563","messages":"564","suppressedMessages":"565","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"566","messages":"567","suppressedMessages":"568","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"569","messages":"570","suppressedMessages":"571","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"572","messages":"573","suppressedMessages":"574","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"575","messages":"576","suppressedMessages":"577","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"578","messages":"579","suppressedMessages":"580","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"581","messages":"582","suppressedMessages":"583","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"584","messages":"585","suppressedMessages":"586","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"587","messages":"588","suppressedMessages":"589","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"590","messages":"591","suppressedMessages":"592","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"593","messages":"594","suppressedMessages":"595","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"596","messages":"597","suppressedMessages":"598","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"599","messages":"600","suppressedMessages":"601","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"602","messages":"603","suppressedMessages":"604","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"605","messages":"606","suppressedMessages":"607","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"608","messages":"609","suppressedMessages":"610","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"611","messages":"612","suppressedMessages":"613","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\analytics.js",["614","615"],[],"// pages/analytics.js\n// Analytics dashboard page\n\nimport { useState, useEffect } from 'react';\nimport PerformanceHeatmap from '../components/analytics/PerformanceHeatmap';\nimport InterventionAlerts from '../components/analytics/InterventionAlerts';\nimport { getPerformanceHeatmap, detectInterventions } from '../lib/firestore/analytics';\nimport { getUserClasses } from '../lib/firestore/classes';\nimport { useApp } from '../lib/contexts/AppContext';\nimport { useNotifications } from '../lib/contexts/NotificationContext';\n\nexport default function AnalyticsPage() {\n    const { user } = useApp();\n    const notify = useNotifications();\n\n    const [classes, setClasses] = useState([]);\n    const [selectedClass, setSelectedClass] = useState(null);\n    const [heatmapData, setHeatmapData] = useState([]);\n    const [interventions, setInterventions] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        loadClasses();\n    }, [user]);\n\n    useEffect(() => {\n        if (selectedClass) {\n            loadAnalytics();\n        }\n    }, [selectedClass]);\n\n    const loadClasses = async () => {\n        if (!user) return;\n        try {\n            const classesData = await getUserClasses(user.uid);\n            setClasses(classesData);\n            if (classesData.length > 0) {\n                setSelectedClass(classesData[0].id);\n            }\n        } catch (error) {\n            console.error('Failed to load classes:', error);\n            notify.error('Failed to load classes');\n        }\n        setLoading(false);\n    };\n\n    const loadAnalytics = async () => {\n        try {\n            const [heatmap, alerts] = await Promise.all([\n                getPerformanceHeatmap(selectedClass),\n                detectInterventions(selectedClass),\n            ]);\n            setHeatmapData(heatmap);\n            setInterventions(alerts);\n        } catch (error) {\n            console.error('Failed to load analytics:', error);\n            notify.error('Failed to load analytics');\n        }\n    };\n\n    const handleDismissIntervention = (id) => {\n        setInterventions(interventions.filter(i => i.id !== id));\n        notify.success('Alert dismissed');\n    };\n\n    const handleTakeAction = (intervention) => {\n        notify.success(`Action logged for ${intervention.studentName}`);\n    };\n\n    if (loading) {\n        return (\n            <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                    <div className=\"skeleton h-64 rounded-2xl mb-6\" />\n                    <div className=\"skeleton h-96 rounded-2xl\" />\n                </div>\n            </div>\n        );\n    }\n\n    if (classes.length === 0) {\n        return (\n            <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center\">\n                <div className=\"text-center\">\n                    <svg className=\"w-24 h-24 text-neutral-300 dark:text-neutral-700 mx-auto mb-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                    </svg>\n                    <h2 className=\"text-2xl font-bold text-neutral-900 dark:text-white mb-2\">No Classes Yet</h2>\n                    <p className=\"text-neutral-600 dark:text-neutral-400 mb-6\">Create a class to view analytics</p>\n                    <button onClick={() => window.location.href = '/classes'} className=\"btn btn-primary\">\n                        Create Class\n                    </button>\n                </div>\n            </div>\n        );\n    }\n\n    const currentClass = classes.find(c => c.id === selectedClass);\n\n    return (\n        <div className=\"min-h-screen bg-premium transition-colors duration-500\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                {/* Header */}\n                <div className=\"mb-8\">\n                    <h1 className=\"text-3xl font-bold text-premium mb-4\">Analytics</h1>\n\n                    {/* Class Selector */}\n                    <select\n                        value={selectedClass}\n                        onChange={(e) => setSelectedClass(e.target.value)}\n                        className=\"input max-w-sm\"\n                    >\n                        {classes.map((classItem) => (\n                            <option key={classItem.id} value={classItem.id}>\n                                {classItem.name}\n                            </option>\n                        ))}\n                    </select>\n                </div>\n\n                {/* Intervention Alerts */}\n                {interventions.length > 0 && (\n                    <div className=\"mb-8\">\n                        <InterventionAlerts\n                            interventions={interventions}\n                            students={currentClass?.students || []}\n                            onDismiss={handleDismissIntervention}\n                            onTakeAction={handleTakeAction}\n                        />\n                    </div>\n                )}\n\n                {/* Performance Heatmap */}\n                <div className=\"bg-premium-card rounded-2xl border-premium p-6 shadow-premium-sm\">\n                    <h2 className=\"text-xl font-bold text-premium mb-6\">Performance Heatmap</h2>\n                    {heatmapData.length > 0 ? (\n                        <PerformanceHeatmap\n                            heatmapData={heatmapData}\n                            students={currentClass?.students || []}\n                        />\n                    ) : (\n                        <div className=\"text-center py-12\">\n                            <svg className=\"w-16 h-16 text-neutral-300 dark:text-neutral-700 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                            </svg>\n                            <h3 className=\"text-lg font-semibold text-neutral-900 dark:text-white mb-2\">No Data Yet</h3>\n                            <p className=\"text-neutral-600 dark:text-neutral-400\">\n                                Analytics will appear once students complete assignments\n                            </p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\assistant.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\chat\\batch.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\chat\\clear.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\chat\\get.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\chat\\set.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export\\doc.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export\\slides.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export-docx.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export-pdf.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export-slides.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\export-worksheet.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\google\\auth.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\google\\callback.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\logout.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\rubric\\generate.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\send-verification-email.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\session\\clear.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\session\\set.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\session\\status.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\teacher\\activate.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\teacher\\clear.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\teacher-invite.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verification\\confirm.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verification\\exchange.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verification\\send.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verification\\status.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verify\\confirm.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verify\\send.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\api\\verify-email-token.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\assignments\\index.js",["616"],[],"// pages/assignments/index.js\n// Assignments list page with create wizard\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { format } from 'date-fns';\nimport Link from 'next/link';\nimport AssignmentWizard from '../../components/assignments/AssignmentWizard';\nimport { EmptyAssignments } from '../../components/ui/EmptyStates';\nimport { createAssignment, getUserAssignments } from '../../lib/firestore/assignments';\nimport { getUserClasses } from '../../lib/firestore/classes';\nimport { useApp } from '../../lib/contexts/AppContext';\nimport { useNotifications } from '../../lib/contexts/NotificationContext';\n\nexport default function AssignmentsPage() {\n    const { user } = useApp();\n    const notify = useNotifications();\n    const [assignments, setAssignments] = useState([]);\n    const [classes, setClasses] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [showWizard, setShowWizard] = useState(false);\n    const [filter, setFilter] = useState('all'); // all, published, draft\n\n    useEffect(() => {\n        loadData();\n    }, [user]);\n\n    const loadData = async () => {\n        if (!user) return;\n        setLoading(true);\n        try {\n            const [assignmentsData, classesData] = await Promise.all([\n                getUserAssignments(user.uid),\n                getUserClasses(user.uid),\n            ]);\n            setAssignments(assignmentsData);\n            setClasses(classesData);\n        } catch (error) {\n            console.error('Failed to load data:', error);\n            notify.error('Failed to load assignments');\n        }\n        setLoading(false);\n    };\n\n    const handleCreateAssignment = async (data) => {\n        try {\n            await createAssignment({ ...data, teacherId: user.uid });\n            notify.success('Assignment created successfully!');\n            setShowWizard(false);\n            loadData();\n        } catch (error) {\n            console.error('Failed to create assignment:', error);\n            notify.error('Failed to create assignment');\n        }\n    };\n\n    const filteredAssignments = assignments.filter(a => {\n        if (filter === 'all') return true;\n        if (filter === 'published') return a.status === 'published';\n        if (filter === 'draft') return a.status === 'draft';\n        return true;\n    });\n\n    if (loading) {\n        return (\n            <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                    <div className=\"space-y-4\">\n                        {[1, 2, 3, 4].map((i) => (\n                            <div key={i} className=\"skeleton h-32 rounded-2xl\" />\n                        ))}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-premium transition-colors duration-500 pb-20\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                {/* Header */}\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold text-premium\">Assignments</h1>\n                        <p className=\"text-secondary mt-1\">\n                            Create and manage your assignments\n                        </p>\n                    </div>\n                    <button\n                        onClick={() => setShowWizard(true)}\n                        className=\"btn btn-primary group\"\n                    >\n                        <svg className=\"w-5 h-5 transition-transform group-hover:rotate-90\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                        </svg>\n                        Create Assignment\n                    </button>\n                </div>\n\n                {/* Filter Tabs */}\n                <div className=\"flex items-center gap-2 mb-6\">\n                    {['all', 'published', 'draft'].map((f) => (\n                        <button\n                            key={f}\n                            onClick={() => setFilter(f)}\n                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${filter === f\n                                ? 'bg-primary-500 text-white shadow-premium-md scale-105'\n                                : 'bg-premium-card text-secondary border-premium hover:bg-neutral-100 dark:hover:bg-neutral-800'\n                                }`}\n                        >\n                            {f.charAt(0).toUpperCase() + f.slice(1)}\n                        </button>\n                    ))}\n                </div>\n\n                {/* Assignments List */}\n                {filteredAssignments.length === 0 ? (\n                    <EmptyAssignments onCreate={() => setShowWizard(true)} />\n                ) : (\n                    <div className=\"space-y-4\">\n                        {filteredAssignments.map((assignment, idx) => {\n                            const isPastDue = new Date() > new Date(assignment.dueDate);\n\n                            return (\n                                <motion.div\n                                    key={assignment.id}\n                                    initial={{ opacity: 0, y: 20 }}\n                                    animate={{ opacity: 1, y: 0 }}\n                                    transition={{ delay: idx * 0.05 }}\n                                >\n                                    <Link href={`/assignments/${assignment.id}`}>\n                                        <div className=\"group bg-premium-card rounded-2xl border-premium p-6 hover:shadow-premium-xl hover:scale-[1.01] transition-all cursor-pointer shadow-premium-sm\">\n                                            <div className=\"flex items-start gap-4\">\n                                                {/* Icon */}\n                                                <div className={`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg ${assignment.status === 'published'\n                                                    ? 'bg-gradient-to-br from-secondary-500 to-tertiary-500 shadow-secondary-500/25'\n                                                    : 'bg-gradient-to-br from-neutral-400 to-neutral-500 shadow-neutral-500/25'\n                                                    }`}>\n                                                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                                                    </svg>\n                                                </div>\n\n                                                {/* Content */}\n                                                <div className=\"flex-1 min-w-0\">\n                                                    <div className=\"flex items-start justify-between gap-4 mb-2\">\n                                                        <h3 className=\"text-lg font-bold text-premium group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors\">\n                                                            {assignment.title}\n                                                        </h3>\n                                                        <span className={`px-3 py-1 rounded-full text-xs font-semibold ${assignment.status === 'published'\n                                                            ? 'bg-secondary-100 dark:bg-secondary-900/30 text-secondary-700 dark:text-secondary-300'\n                                                            : 'bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300'\n                                                            }`}>\n                                                            {assignment.status}\n                                                        </span>\n                                                    </div>\n\n                                                    <p className=\"text-sm text-neutral-600 dark:text-neutral-400 mb-4 line-clamp-2\">\n                                                        {assignment.description}\n                                                    </p>\n\n                                                    {/* Meta Info */}\n                                                    <div className=\"flex flex-wrap items-center gap-4 text-sm text-neutral-600 dark:text-neutral-400\">\n                                                        <div className=\"flex items-center gap-1.5\">\n                                                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                                                            </svg>\n                                                            <span className={isPastDue ? 'text-error font-semibold' : ''}>\n                                                                Due: {format(new Date(assignment.dueDate), 'MMM dd, h:mm a')}\n                                                            </span>\n                                                        </div>\n                                                        <div className=\"flex items-center gap-1.5\">\n                                                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z\" />\n                                                            </svg>\n                                                            <span>{assignment.points} points</span>\n                                                        </div>\n                                                        {assignment.className && (\n                                                            <div className=\"flex items-center gap-1.5\">\n                                                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                                                                </svg>\n                                                                <span>{assignment.className}</span>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </Link>\n                                </motion.div>\n                            );\n                        })}\n                    </div>\n                )}\n                {showWizard && (\n                    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-modal-backdrop flex items-center justify-center p-4\">\n                        <div className=\"bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n                            <AssignmentWizard\n                                onSave={handleCreateAssignment}\n                                onCancel={() => setShowWizard(false)}\n                                classData={classes[0]} // TODO: Let user select class\n                            />\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\assignments\\[assignmentId].js",["617"],[],"// pages/assignments/[assignmentId].js\n// Assignment detail and grading page\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { motion } from 'framer-motion';\nimport { format } from 'date-fns';\nimport Navigation from '../../components/Navigation';\nimport GradingInterface from '../../components/assignments/GradingInterface';\nimport SubmissionForm from '../../components/student/SubmissionForm';\nimport { getAssignmentById, getSubmissions, gradeSubmission } from '../../lib/firestore/assignments';\nimport { useApp } from '../../lib/contexts/AppContext';\nimport { useNotifications } from '../../lib/contexts/NotificationContext';\n\nexport default function AssignmentDetailPage() {\n    const router = useRouter();\n    const { assignmentId } = router.query;\n    const { user, session } = useApp();\n    const notify = useNotifications();\n\n    const [assignment, setAssignment] = useState(null);\n    const [submissions, setSubmissions] = useState([]);\n    const [currentSubmissionIndex, setCurrentSubmissionIndex] = useState(0);\n    const [loading, setLoading] = useState(true);\n    const [view, setView] = useState('overview'); // overview, grade, submit\n\n    const isTeacher = session?.role === 'teacher' || session?.role === 'educator';\n\n    useEffect(() => {\n        if (assignmentId) loadAssignmentData();\n    }, [assignmentId]);\n\n    const loadAssignmentData = async () => {\n        setLoading(true);\n        try {\n            const assignmentData = await getAssignmentById(assignmentId);\n            setAssignment(assignmentData);\n\n            if (isTeacher) {\n                const submissionsData = await getSubmissions(assignmentId);\n                setSubmissions(submissionsData);\n            }\n        } catch (error) {\n            console.error('Failed to load assignment:', error);\n            notify.error('Failed to load assignment');\n        }\n        setLoading(false);\n    };\n\n    const handleGrade = async (gradeData) => {\n        try {\n            const submission = submissions[currentSubmissionIndex];\n            await gradeSubmission(assignmentId, submission.id, gradeData);\n            notify.success('Grade saved successfully!');\n\n            // Move to next submission\n            if (currentSubmissionIndex < submissions.length - 1) {\n                setCurrentSubmissionIndex(currentSubmissionIndex + 1);\n            }\n\n            loadAssignmentData();\n        } catch (error) {\n            console.error('Failed to grade submission:', error);\n            notify.error('Failed to save grade');\n        }\n    };\n\n    const handleSubmitAssignment = async () => {\n        notify.success('Assignment submitted successfully!');\n        loadAssignmentData();\n    };\n\n    if (loading) {\n        return (\n            <>\n                <Navigation />\n                <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900\">\n                    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                        <div className=\"skeleton h-96 rounded-2xl\" />\n                    </div>\n                </div>\n            </>\n        );\n    }\n\n    if (!assignment) {\n        return (\n            <>\n                <Navigation />\n                <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                        <h2 className=\"text-2xl font-bold text-neutral-900 dark:text-white mb-2\">Assignment Not Found</h2>\n                        <button onClick={() => router.push('/assignments')} className=\"btn btn-primary mt-4\">\n                            Back to Assignments\n                        </button>\n                    </div>\n                </div>\n            </>\n        );\n    }\n\n    const currentSubmission = submissions[currentSubmissionIndex];\n    const mySubmission = submissions.find(s => s.studentId === user?.uid);\n\n    return (\n        <>\n            <Navigation />\n            <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                    {/* Header */}\n                    <div className=\"bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 p-6 mb-6\">\n                        <div className=\"flex items-start justify-between mb-4\">\n                            <div className=\"flex-1\">\n                                <h1 className=\"text-3xl font-bold text-neutral-900 dark:text-white mb-2\">{assignment.title}</h1>\n                                <p className=\"text-neutral-600 dark:text-neutral-400\">{assignment.description}</p>\n                            </div>\n                            <span className={`px-4 py-2 rounded-full text-sm font-semibold ${assignment.status === 'published'\n                                ? 'bg-secondary-100 dark:bg-secondary-900/30 text-secondary-700 dark:text-secondary-300'\n                                : 'bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300'\n                                }`}>\n                                {assignment.status}\n                            </span>\n                        </div>\n\n                        {/* Assignment Meta */}\n                        <div className=\"flex flex-wrap items-center gap-6 text-sm text-neutral-600 dark:text-neutral-400\">\n                            <div className=\"flex items-center gap-2\">\n                                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                                </svg>\n                                <span>Due: {format(new Date(assignment.dueDate), 'MMM dd, yyyy h:mm a')}</span>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z\" />\n                                </svg>\n                                <span>{assignment.points} points</span>\n                            </div>\n                            {isTeacher && (\n                                <div className=\"flex items-center gap-2\">\n                                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                                    </svg>\n                                    <span>{submissions.length} submissions</span>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n\n                    {/* View Selector for Teachers */}\n                    {isTeacher && (\n                        <div className=\"flex items-center gap-2 mb-6\">\n                            <button\n                                onClick={() => setView('overview')}\n                                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${view === 'overview'\n                                    ? 'bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300'\n                                    : 'bg-white dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400'\n                                    }`}\n                            >\n                                Overview\n                            </button>\n                            <button\n                                onClick={() => setView('grade')}\n                                disabled={submissions.length === 0}\n                                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${view === 'grade'\n                                    ? 'bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300'\n                                    : 'bg-white dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400'\n                                    } disabled:opacity-50 disabled:cursor-not-allowed`}\n                            >\n                                Grade Submissions\n                            </button>\n                        </div>\n                    )}\n\n                    {/* Content */}\n                    {isTeacher ? (\n                        <>\n                            {view === 'overview' && (\n                                <div className=\"space-y-4\">\n                                    {submissions.length === 0 ? (\n                                        <div className=\"bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 p-12 text-center\">\n                                            <svg className=\"w-16 h-16 text-neutral-300 dark:text-neutral-700 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                                            </svg>\n                                            <h3 className=\"text-lg font-semibold text-neutral-900 dark:text-white mb-2\">No Submissions Yet</h3>\n                                            <p className=\"text-neutral-600 dark:text-neutral-400\">Students haven&apos;t submitted their work yet</p>\n                                        </div>\n                                    ) : (\n                                        submissions.map((submission) => (\n                                            <div key={submission.id} className=\"bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 p-6\">\n                                                <div className=\"flex items-center justify-between\">\n                                                    <div>\n                                                        <h3 className=\"font-semibold text-neutral-900 dark:text-white\">{submission.studentName}</h3>\n                                                        <p className=\"text-sm text-neutral-600 dark:text-neutral-400\">\n                                                            Submitted {format(new Date(submission.submittedAt), 'MMM dd, h:mm a')}\n                                                        </p>\n                                                    </div>\n                                                    {submission.grade !== null ? (\n                                                        <div className=\"text-right\">\n                                                            <div className=\"text-2xl font-bold text-secondary-600 dark:text-secondary-400\">\n                                                                {submission.grade}\n                                                            </div>\n                                                            <div className=\"text-sm text-neutral-600 dark:text-neutral-400\">\n                                                                / {assignment.points}\n                                                            </div>\n                                                        </div>\n                                                    ) : (\n                                                        <span className=\"px-3 py-1 rounded-full text-xs font-semibold bg-warning-100 dark:bg-warning-900/30 text-warning-700 dark:text-warning-300\">\n                                                            Not Graded\n                                                        </span>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        ))\n                                    )}\n                                </div>\n                            )}\n\n                            {view === 'grade' && currentSubmission && (\n                                <GradingInterface\n                                    submission={currentSubmission}\n                                    assignment={assignment}\n                                    onGrade={handleGrade}\n                                    onNext={() => setCurrentSubmissionIndex(Math.min(currentSubmissionIndex + 1, submissions.length - 1))}\n                                    onPrevious={() => setCurrentSubmissionIndex(Math.max(currentSubmissionIndex - 1, 0))}\n                                    currentIndex={currentSubmissionIndex}\n                                    totalSubmissions={submissions.length}\n                                />\n                            )}\n                        </>\n                    ) : (\n                        <div className=\"bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 p-6\">\n                            <SubmissionForm\n                                assignment={assignment}\n                                existingSubmission={mySubmission}\n                                studentId={user?.uid}\n                                onSubmit={handleSubmitAssignment}\n                            />\n                        </div>\n                    )}\n                </div>\n            </div>\n        </>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\assistant.js",["618"],["619","620","621","622","623"],"import Head from \"next/head\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Modal from \"../components/Modal\";\nimport {\n  activateTeacher,\n  getSession,\n  isTeacher,\n  refreshVerifiedFromServer,\n  saveSession,\n  setGuest as storeGuest,\n} from \"@/lib/session\";\nimport {\n  clearThread,\n  createThread,\n  deleteThread,\n  ensureThreadsForUser,\n  getActiveThreadId,\n  getChatUserKey,\n  getThreadMessages,\n  getThreadMeta,\n  listThreads,\n  renameThread,\n  setActiveThreadId,\n  togglePinThread,\n  upsertThreadMessages,\n} from \"../lib/chatThreads\";\nimport { getRecommendations } from \"../lib/videoLibrary\";\nimport { motion, AnimatePresence } from \"../components/MotionPolyfill\";\n\nfunction cn(...inputs) {\n  return inputs.filter(Boolean).join(\" \");\n}\n\nconst COUNTRIES = [\"Singapore\", \"United States\", \"United Kingdom\", \"Australia\", \"Malaysia\", \"Canada\", \"New Zealand\", \"India\", \"Nigeria\", \"Other\"];\nconst SUBJECTS = [\"General\", \"Math\", \"Science\", \"Physics\", \"Chemistry\", \"Biology\", \"English\", \"History\", \"Geography\", \"Computing\", \"Literature\", \"Economics\"];\n\nconst ROLE_LABEL = {\n  student: \"Student\",\n  parent: \"Parent\",\n  educator: \"Educator\",\n};\n\nconst ROLE_QUICK_ACTIONS = {\n  educator: [\n    { id: \"explain\", label: \"Explain a concept\", hint: \"Classroom-ready explanation + one example\" },\n    { id: \"lesson\", label: \"Plan a lesson\", hint: \"Objectives, timings, checks, differentiation\" },\n    { id: \"assignment\", label: \"New Assignment\", hint: \"AI-generated student tasks \" },\n    { id: \"worksheet\", label: \"Create worksheet\", hint: \"Student + Teacher versions\" },\n    { id: \"assessment\", label: \"Generate assessment\", hint: \"Marks + marking scheme\" },\n    { id: \"slides\", label: \"Design slides\", hint: \"Deck outline + teacher notes\" },\n    { id: \"resources\", label: \"Find Resources\", hint: \"Videos, PDFs, articles for class\" },\n  ],\n  student: [\n    { id: \"explain\", label: \"Explain it\", hint: \"Simple steps, beginner friendly\" },\n    { id: \"quiz\", label: \"Generate Quiz\", hint: \"Test my knowledge right now \" },\n    { id: \"flashcards\", label: \"Make Flashcards\", hint: \"AI-powered study set \" },\n    { id: \"check\", label: \"Check my answer\", hint: \"Hints first. Answer unlocks on attempt 3.\" },\n    { id: \"study\", label: \"Study plan\", hint: \"Small steps, realistic plan\" },\n  ],\n  parent: [\n    { id: \"explain\", label: \"Explain to me\", hint: \"Plain language, no jargon\" },\n    { id: \"tutor\", label: \"Tutor Mode\", hint: \"Help me coach my child \" },\n    { id: \"curriculum\", label: \"Topic Roadmap\", hint: \"See the journey ahead \" },\n    { id: \"message\", label: \"Write a message\", hint: \"To teacher or school\" },\n  ],\n};\n\nconst REFINEMENT_CHIPS = {\n  explain: [\n    { id: \"simpler\", label: \"Make it simpler\" },\n    { id: \"example\", label: \"Add an example\" },\n    { id: \"steps\", label: \"Show steps\" },\n    { id: \"check\", label: \"Add a quick check question\" },\n  ],\n  lesson: [\n    { id: \"diff\", label: \"Add differentiation\" },\n    { id: \"timing\", label: \"Add timings\" },\n    { id: \"check\", label: \"Add checks for understanding\" },\n    { id: \"resources\", label: \"Add resources\" },\n  ],\n  worksheet: [\n    { id: \"easier\", label: \"Make it easier\" },\n    { id: \"harder\", label: \"Make it harder\" },\n    { id: \"answers\", label: \"Add teacher answers\" },\n    { id: \"variants\", label: \"Add A/B versions\" },\n  ],\n  assessment: [\n    { id: \"markscheme\", label: \"Add mark scheme\" },\n    { id: \"variants\", label: \"Add variants\" },\n    { id: \"harder\", label: \"Make it harder\" },\n    { id: \"easier\", label: \"Make it easier\" },\n  ],\n  slides: [\n    { id: \"outline\", label: \"Tighten outline\" },\n    { id: \"hooks\", label: \"Add hook\" },\n    { id: \"examples\", label: \"Add examples\" },\n    { id: \"notes\", label: \"Add teacher notes\" },\n  ],\n  check: [\n    { id: \"more-steps\", label: \"Show more steps\" },\n    { id: \"simpler\", label: \"Make it simpler\" },\n    { id: \"example\", label: \"Add an example\" },\n  ],\n  study: [\n    { id: \"shorter\", label: \"Make it shorter\" },\n    { id: \"steps\", label: \"Show steps\" },\n    { id: \"check\", label: \"Add a check question\" },\n  ],\n  coach: [\n    { id: \"simpler\", label: \"Make it simpler\" },\n    { id: \"steps\", label: \"Give steps\" },\n    { id: \"check\", label: \"Add a check question\" },\n  ],\n  message: [\n    { id: \"shorter\", label: \"Make it shorter\" },\n    { id: \"simpler\", label: \"Make it simpler\" },\n  ],\n  custom: [\n    { id: \"simpler\", label: \"Make it simpler\" },\n    { id: \"example\", label: \"Add an example\" },\n    { id: \"steps\", label: \"Show steps\" },\n  ],\n};\n\nconst STARTER_SUGGESTION_POOLS = {\n  educator: ({ country, level, subject, topic }) => {\n    const safeCountry = country || \"your country\";\n    const safeLevel = level || \"your current level\";\n    const safeSubject = subject || \"your subject\";\n    const safeTopic = topic || \"a tricky topic your class is currently on\";\n\n    return [\n      `Draft a ${safeLevel} ${safeSubject} lesson on ${safeTopic} using I Do / We Do / You Do, including key questions to ask and common misconceptions to watch for.`,\n      `Create a 10-minute Do Now + 25-minute main task + 5-minute exit ticket for ${safeLevel} ${safeSubject} on ${safeTopic}, with printable prompts.`,\n      `Generate a quick formative check for ${safeTopic}: 6 questions (2 easy, 2 medium, 2 stretch) with answers and what each question diagnoses.`,\n      `Write teacher feedback comments for 3 common student errors on ${safeTopic} (one sentence each) plus a targeted next step for improvement.`,\n      `Build a rubric for ${safeSubject} work on ${safeTopic} (4 bands) with concrete descriptors and a sample Band 3 exemplar answer.`,\n      `Differentiate ${safeTopic} for 3 groups (support / core / challenge): provide 3 tasks per group and a short teacher script for transitions.`,\n      `Make a mini-quiz (8 questions) on ${safeTopic} aligned to ${safeLevel} ${safeSubject} in ${safeCountry}, with a mark scheme and reteach plan based on results.`,\n      `Turn ${safeTopic} into a worked example set: 1 fully-worked example + 3 gradually harder practice questions + a self-check answer key.`,\n    ];\n  },\n  parent: ({ country, level, subject, topic }) => {\n    const safeCountry = country || \"our country\";\n    const safeLevel = level || \"my childs level\";\n    const safeSubject = subject || \"schoolwork\";\n    const safeTopic = topic || \"what theyre learning this week\";\n\n    return [\n      `Explain ${safeTopic} in plain parent-friendly language, then give me a 2-minute car ride explanation I can say to my child at ${safeLevel}.`,\n      `Give me 3 at-home mini-activities to support ${safeSubject} on ${safeTopic} (10 minutes each, no printing, uses common household items).`,\n      `Write 6 gentle conversation starters about ${safeTopic} that feel supportive (not like a test)  good for dinner or bedtime chats.`,\n      `Create a simple checklist I can use to help with ${safeSubject} homework on ${safeTopic} without taking over (what to ask, what not to say).`,\n      `Draft a calm frustration reset script for when homework gets tense, plus 3 options to step back while still keeping progress moving.`,\n      `Make a 1-week routine for ${safeLevel} (${safeCountry}) to build confidence in ${safeSubject}: 3 short sessions tied to ${safeTopic} with specific steps.`,\n      `Give me 5 praise phrases that reward effort and strategy during ${safeTopic} practice (and 3 follow-up questions that encourage thinking).`,\n      `Turn ${safeTopic} into a quick real-life example I can use at home, then give me 3 questions to check understanding in a low-pressure way.`,\n    ];\n  },\n  student: ({ level, subject, topic }) => {\n    const safeLevel = level || \"my level\";\n    const safeSubject = subject || \"my subject\";\n    const safeTopic = topic || \"a topic Im stuck on\";\n\n    return [\n      `Teach me ${safeTopic} for ${safeSubject} at ${safeLevel} in 4 short steps, then ask me 2 quick check questions (wait for my answers).`,\n      `Make me a 20-minute study sprint for ${safeTopic}: warm-up  2 focused drills  1 mixed question  quick recap.`,\n      `Give me 6 practice questions on ${safeTopic} at ${safeLevel} and mark them one-by-one after I answer each (no spoilers).`,\n      `Ill paste my working for ${safeTopic}. First highlight what I did correctly, then show the first wrong step and how to fix it.`,\n      `Help me revise ${safeTopic} for an exam: 5-bullet summary, 3 must know rules, and 3 exam-style questions with a marking guide.`,\n      `Create a 7-day spaced revision plan for ${safeTopic} with tiny daily tasks (510 minutes) and a self-test on day 7.`,\n      `Explain my mistake: Ill paste a wrong answer about ${safeTopic}  tell me the misconception and give 2 similar questions to practice.`,\n      `Make a teach-back script so I can explain ${safeTopic} to a friend in 60 seconds, then quiz me with 3 short questions.`,\n    ];\n  },\n};\n\nfunction stableHashToUint32(input) {\n  // Simple non-crypto hash for deterministic UI randomness\n  const s = String(input || \"\");\n  let h = 2166136261;\n  for (let i = 0; i < s.length; i++) {\n    h ^= s.charCodeAt(i);\n    h = Math.imul(h, 16777619);\n  }\n  return h >>> 0;\n}\n\nfunction mulberry32(seed) {\n  let t = seed >>> 0;\n  return () => {\n    t += 0x6d2b79f5;\n    let x = t;\n    x = Math.imul(x ^ (x >>> 15), x | 1);\n    x ^= x + Math.imul(x ^ (x >>> 7), x | 61);\n    return ((x ^ (x >>> 14)) >>> 0) / 4294967296;\n  };\n}\n\nfunction seededShuffle(arr, rnd) {\n  const a = [...arr];\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(rnd() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\n\nfunction LockedFeatureOverlay({ children, isVerified }) {\n  if (isVerified) return children;\n\n  return (\n    <div className=\"relative group cursor-not-allowed inline-flex\">\n      <div className=\"blur-[1px] opacity-70 pointer-events-none transition-all group-hover:blur-[2px]\">\n        {children}\n      </div>\n      <div className=\"absolute inset-0 z-10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n        <div className=\"bg-slate-900/90 dark:bg-white/90 backdrop-blur-md px-3 py-1.5 rounded-lg shadow-2xl border border-white/10 dark:border-slate-200 scale-90\">\n          <Link href=\"/verify\" className=\"text-[10px] font-black text-white dark:text-slate-900 whitespace-nowrap leading-none no-underline\">\n            Verify to Unlock \n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction pickStarterSuggestions({ seed, role, country, level, subject, topic }) {\n  const key = role === \"educator\" || role === \"teacher\" ? \"educator\" : role === \"parent\" ? \"parent\" : \"student\";\n  const poolFn = STARTER_SUGGESTION_POOLS[key] || STARTER_SUGGESTION_POOLS.student;\n  const pool = poolFn({ country, level, subject, topic }) || [];\n  if (!pool.length) return [];\n\n  const rnd = mulberry32(stableHashToUint32(seed));\n  const shuffled = seededShuffle(pool, rnd);\n\n  const maxCount = Math.min(5, shuffled.length);\n  const minCount = Math.min(3, maxCount);\n  const countRange = maxCount - minCount;\n  const count = minCount + (countRange > 0 ? Math.floor(rnd() * (countRange + 1)) : 0);\n\n  return shuffled.slice(0, count);\n}\n\nconst PREVIEW_DISMISS_KEY = \"elora_preview_notice_dismissed_v1\";\nconst PREFS_OPEN_KEY = \"elora_assistant_prefs_open_v1\";\n\nfunction stripInternalTags(text) {\n  return String(text || \"\")\n    .replace(/<\\s*internal\\s*>[\\s\\S]*?<\\s*\\/\\s*internal\\s*>/gi, \"\")\n    .replace(/<\\s*internal\\s*\\/\\s*>/gi, \"\")\n    .replace(/<\\s*internal\\s*>/gi, \"\")\n    .trim();\n}\n\nfunction cleanAssistantText(text) {\n  let t = stripInternalTags(text || \"\");\n  t = t.replace(/```[\\s\\S]*?```/g, \"\");\n  t = t.replace(/`+/g, \"\");\n  t = t.replace(/^\\s{0,3}#{1,6}\\s+/gm, \"\");\n  t = t.replace(/\\*\\*([^*]+)\\*\\*/g, \"$1\");\n  t = t.replace(/\\*([^*]+)\\*/g, \"$1\");\n  t = t.replace(/__([^_]+)__/g, \"$1\");\n  t = t.replace(/_([^_]+)_/g, \"$1\");\n  t = t.replace(/^\\s*>\\s?/gm, \"\");\n  t = t.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, \"$1\");\n  t = t.replace(/^\\s*([-*_])\\1\\1+\\s*$/gm, \"\");\n  t = t.replace(/<quiz_data>[\\s\\S]*?<\\/quiz_data>/gi, \"\");\n  t = t.replace(/\\n{3,}/g, \"\\n\\n\").trim();\n  return t;\n}\n\nfunction inferActionFromMessage(text) {\n  const t = String(text || \"\").toLowerCase();\n  if (!t.trim()) return null;\n\n  if (\n    t.includes(\"check my answer\") ||\n    t.includes(\"is this correct\") ||\n    t.includes(\"is it correct\") ||\n    t.includes(\"am i correct\") ||\n    t.includes(\"did i get it right\") ||\n    t.includes(\"right or wrong\") ||\n    t.includes(\"correct or not\") ||\n    /\\bmy answer\\b/.test(t) ||\n    /\\banswer\\s*:\\s*/.test(t) ||\n    /\\b=\\s*-?\\d/.test(t)\n  ) {\n    return \"check\";\n  }\n\n  if (t.includes(\"lesson plan\")) return \"lesson\";\n  if (t.includes(\"worksheet\")) return \"worksheet\";\n  if (t.includes(\"assessment\") || t.includes(\"test\") || t.includes(\"quiz\")) return \"assessment\";\n  if (t.includes(\"slides\") || t.includes(\"powerpoint\")) return \"slides\";\n\n  return null;\n}\n\nfunction getCountryLevels(country) {\n  const c = String(country || \"\").toLowerCase();\n\n  if (c.includes(\"singapore\")) {\n    return [\n      \"Primary School\",\n      \"Secondary School\",\n      \"Junior College / Pre-U\",\n      \"Polytechnic / ITE\",\n      \"University\",\n    ];\n  }\n\n  if (c.includes(\"united states\") || c === \"us\" || c.includes(\"usa\")) {\n    return [\n      \"Elementary School\",\n      \"Middle School\",\n      \"High School\",\n      \"College / University\",\n    ];\n  }\n\n  if (c.includes(\"united kingdom\") || c.includes(\"uk\") || c.includes(\"britain\") || c.includes(\"england\")) {\n    return [\n      \"Primary School\",\n      \"Secondary School\",\n      \"Sixth Form / College\",\n      \"University\",\n    ];\n  }\n\n  if (c.includes(\"australia\")) {\n    return [\n      \"Primary School\",\n      \"Secondary School\",\n      \"University / TAFE\",\n    ];\n  }\n\n  if (c.includes(\"malaysia\")) {\n    return [\n      \"Primary School (Standard 1-6)\",\n      \"Secondary School (Form 1-5)\",\n      \"Pre-University / STPM\",\n      \"University\",\n    ];\n  }\n\n  return [\"Primary School\", \"Secondary School\", \"Tertiary / Higher Ed\", \"Adult Learning\"];\n}\n\nasync function compressImageToDataUrl(file, { maxDim = 1400, quality = 0.82 } = {}) {\n  const readAsDataUrl = (f) =>\n    new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onerror = () => reject(new Error(\"read_failed\"));\n      reader.onload = () => resolve(String(reader.result || \"\"));\n      reader.readAsDataURL(f);\n    });\n\n  const rawUrl = await readAsDataUrl(file);\n\n  const img = await new Promise((resolve, reject) => {\n    const i = new Image();\n    i.onload = () => resolve(i);\n    i.onerror = () => reject(new Error(\"image_decode_failed\"));\n    i.src = rawUrl;\n  });\n\n  const w = img.width || 1;\n  const h = img.height || 1;\n\n  const scale = Math.min(1, maxDim / Math.max(w, h));\n  const outW = Math.max(1, Math.round(w * scale));\n  const outH = Math.max(1, Math.round(h * scale));\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = outW;\n  canvas.height = outH;\n\n  const ctx = canvas.getContext(\"2d\", { alpha: false });\n  if (!ctx) throw new Error(\"canvas_failed\");\n  ctx.drawImage(img, 0, 0, outW, outH);\n\n  const outMime = \"image/jpeg\";\n  const outUrl = canvas.toDataURL(outMime, quality);\n\n  if (outUrl.length > 6_000_000) {\n    const smaller = canvas.toDataURL(outMime, 0.68);\n    if (smaller.length > 6_000_000) throw new Error(\"image_too_large\");\n    return { dataUrl: smaller, mime: outMime, name: file.name || \"image.jpg\" };\n  }\n\n  return { dataUrl: outUrl, mime: outMime, name: file.name || \"image.jpg\" };\n}\n\nconst InteractiveQuiz = ({ data, onComplete }) => {\n  const [answers, setAnswers] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  const [score, setScore] = useState(0);\n\n  if (!data?.questions) return null;\n\n  const totalQuestions = data.questions.length;\n  const answeredCount = Object.keys(answers).length;\n  const progressPercent = (answeredCount / totalQuestions) * 100;\n\n  const handleFinish = () => {\n    let s = 0;\n    const submissionDetails = data.questions.map(q => ({\n      question: q.question,\n      studentAnswer: answers[q.id],\n      correctAnswer: q.answer,\n      isCorrect: answers[q.id] === q.answer\n    }));\n\n    data.questions.forEach(q => {\n      if (answers[q.id] === q.answer) s++;\n    });\n\n    setScore(s);\n    setSubmitted(true);\n\n    // Sync to Session (Global Classroom)\n    const currentSession = getSession();\n    const submission = {\n      id: `sub_${Date.now()}`,\n      studentName: currentSession.email?.split('@')[0] || \"Guest Student\",\n      quizTitle: data.title || \"Quick Knowledge Check\",\n      score: s,\n      total: totalQuestions,\n      details: submissionDetails,\n      timestamp: new Date().toISOString()\n    };\n\n    if (!currentSession.classroom) currentSession.classroom = {};\n    if (!currentSession.classroom.submissions) currentSession.classroom.submissions = [];\n    currentSession.classroom.submissions = [submission, ...currentSession.classroom.submissions];\n    saveSession(currentSession);\n\n    if (onComplete) onComplete(s, totalQuestions);\n  };\n\n  return (\n    <div className=\"mt-8 mb-4 space-y-6 animate-reveal\">\n      <div className=\"p-8 rounded-[3rem] bg-indigo-500/5 dark:bg-indigo-500/10 border border-indigo-500/20 shadow-2xl overflow-hidden relative\">\n        <div className=\"absolute top-0 left-0 h-1.5 bg-indigo-500/20 w-full\">\n          <div className=\"h-full bg-indigo-500 transition-all duration-500\" style={{ width: `${progressPercent}%` }} />\n        </div>\n\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h4 className=\"text-xl font-black text-slate-900 dark:text-white leading-tight\">{data.title || \"AI Knowledge Check\"}</h4>\n            <p className=\"text-[10px] font-black uppercase tracking-widest text-indigo-500 mt-1\">Question {answeredCount} of {totalQuestions}</p>\n          </div>\n          <div className=\"w-12 h-12 bg-indigo-600 text-white rounded-2xl flex items-center justify-center text-xl shadow-lg shadow-indigo-500/20\"></div>\n        </div>\n\n        <div className=\"space-y-10\">\n          {data.questions.map((q, idx) => (\n            <div key={q.id} className=\"space-y-4 group\">\n              <div className=\"flex gap-4\">\n                <span className=\"w-8 h-8 rounded-full bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 flex items-center justify-center text-xs font-bold shrink-0 border border-neutral-200 dark:border-neutral-700\">{idx + 1}</span>\n                <p className=\"text-[15px] font-medium text-neutral-800 dark:text-neutral-200 leading-relaxed pt-1\">{q.question}</p>\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 pl-12\">\n                {q.options?.map(opt => {\n                  const isSelected = answers[q.id] === opt;\n                  const isCorrect = submitted && opt === q.answer;\n                  const isWrong = submitted && isSelected && opt !== q.answer;\n\n                  return (\n                    <button\n                      key={opt}\n                      disabled={submitted}\n                      onClick={() => setAnswers({ ...answers, [q.id]: opt })}\n                      className={cn(\n                        \"group/opt p-4 rounded-lg border text-sm font-medium transition-all text-left relative overflow-hidden\",\n                        isSelected\n                          ? \"border-neutral-900 bg-neutral-900 text-white dark:border-neutral-100 dark:bg-neutral-100 dark:text-neutral-900 shadow-sm\"\n                          : \"border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 text-neutral-600 dark:text-neutral-400 hover:border-neutral-300 dark:hover:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800\",\n                        isCorrect && \"border-emerald-500 bg-emerald-50 text-emerald-900 dark:bg-emerald-900/20 dark:text-emerald-200\",\n                        isWrong && \"border-rose-500 bg-rose-50 text-rose-900 dark:bg-rose-900/20 dark:text-rose-200\"\n                      )}\n                    >\n                      <div className=\"relative z-10 flex items-center justify-between\">\n                        <span>{opt}</span>\n                        {isCorrect && <span className=\"text-lg\"></span>}\n                        {isWrong && <span className=\"text-lg\"></span>}\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {!submitted ? (\n          <button\n            onClick={handleFinish}\n            disabled={answeredCount < totalQuestions}\n            className=\"mt-8 w-full py-4 bg-neutral-900 dark:bg-neutral-50 text-white dark:text-neutral-900 rounded-lg font-semibold text-sm shadow-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-neutral-800 dark:hover:bg-neutral-200 transition-colors\"\n          >\n            Grade My Progress\n          </button>\n        ) : (\n          <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} className=\"mt-10 p-8 rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 text-center shadow-sm\">\n            <div className=\"text-5xl mb-4\">{score === totalQuestions ? \"\" : score > totalQuestions / 2 ? \"\" : \"\"}</div>\n            <div className=\"flex items-center justify-center gap-2 mb-6\">\n              <div className=\"w-2 h-2 rounded-full bg-emerald-500\" />\n              <span className=\"text-[10px] font-bold uppercase tracking-widest text-emerald-600 dark:text-emerald-500\">Live Synced to Teacher</span>\n            </div>\n            <div className=\"text-2xl font-bold text-neutral-900 dark:text-neutral-50 uppercase tracking-tight\">\n              Session Result: {score} / {totalQuestions}\n            </div>\n            <div className=\"mt-2 h-2 bg-neutral-100 dark:bg-neutral-800 rounded-full max-w-[200px] mx-auto overflow-hidden\">\n              <div className=\"h-full bg-neutral-900 dark:bg-neutral-50\" style={{ width: `${(score / totalQuestions) * 100}%` }} />\n            </div>\n            <p className=\"text-xs font-medium text-neutral-500 mt-6 max-w-sm mx-auto leading-relaxed\">\n              Analysis: {score === totalQuestions ? \"Perfect mastery! You've unlocked a momentum boost.\" : \"Solid effort. Elora has prepared specific review videos in the Resource Lab to help you bridge the gap.\"}\n            </p>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst AIResourceDrawer = ({ open, onClose, topic, subject }) => {\n  const [recs, setRecs] = useState([]);\n\n  useEffect(() => {\n    if (open) {\n      setRecs(getRecommendations(subject, topic));\n    }\n  }, [open, topic, subject]);\n\n  return (\n    <AnimatePresence>\n      {open && (\n        <>\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-neutral-900/40 backdrop-blur-sm z-[100]\"\n          />\n          <motion.div\n            initial={{ x: \"100%\" }}\n            animate={{ x: 0 }}\n            exit={{ x: \"100%\" }}\n            transition={{ type: \"spring\", damping: 30, stiffness: 300 }}\n            className=\"fixed top-0 right-0 h-full w-full max-w-md bg-white dark:bg-neutral-900 shadow-2xl z-[101] flex flex-col border-l border-neutral-200 dark:border-neutral-800\"\n          >\n            <div className=\"p-6 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-lg font-bold text-neutral-900 dark:text-white\">Resource Lab</h3>\n                <p className=\"text-[11px] font-medium uppercase tracking-wide text-neutral-500 mt-1\">AI Curated for &quot;{topic || subject}&quot;</p>\n              </div>\n              <button onClick={onClose} className=\"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg transition-colors text-neutral-500 hover:text-neutral-900 dark:hover:text-white\"></button>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar\">\n              {recs.length === 0 ? (\n                <div className=\"text-center py-20 space-y-4\">\n                  <div className=\"text-4xl\"></div>\n                  <p className=\"text-sm font-medium text-neutral-500\">Expanding the library... check back in a few seconds.</p>\n                </div>\n              ) : (\n                recs.map((rec, idx) => (\n                  <motion.a\n                    key={idx}\n                    href={rec.url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: idx * 0.05 }}\n                    className=\"block group p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 hover:bg-white dark:hover:bg-neutral-800 transition-all shadow-sm hover:shadow-md\"\n                  >\n                    <div className=\"aspect-video rounded-lg overflow-hidden mb-3 relative\">\n                      <Image\n                        src={rec.thumbnail || `https://images.unsplash.com/photo-1546410531-bb4caa1b4247?auto=format&fit=crop&q=80&w=400`}\n                        alt={rec.title}\n                        fill\n                        className=\"object-cover group-hover:scale-105 transition-transform duration-500\"\n                      />\n                      <div className=\"absolute inset-0 bg-neutral-900/0 group-hover:bg-neutral-900/10 transition-colors\" />\n                      <div className=\"absolute bottom-2 right-2 px-1.5 py-0.5 bg-neutral-900/90 backdrop-blur-sm text-[9px] font-bold text-white rounded\">LIVE</div>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <div className=\"text-[10px] font-bold uppercase tracking-wide text-neutral-500\">{rec.type || \"VIDEO\"}</div>\n                      <h4 className=\"text-sm font-bold text-neutral-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors leading-snug\">{rec.title}</h4>\n                      <p className=\"text-xs text-neutral-500 line-clamp-2 mt-1 leading-relaxed\">{rec.description}</p>\n                    </div>\n                  </motion.a>\n                ))\n              )}\n            </div>\n\n            <div className=\"p-6 bg-neutral-900 dark:bg-neutral-50 text-white dark:text-neutral-900\">\n              <p className=\"text-[10px] font-bold uppercase tracking-widest opacity-60 mb-2\">Mastery Tip</p>\n              <p className=\"text-xs font-medium leading-relaxed\">Watching visual breakdowns often improves retention by 40%. Try summarizing these in your own words.</p>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default function AssistantPage() {\n  const router = useRouter();\n\n  const [session, setSession] = useState(() => getSession());\n  const [role, setRole] = useState(() => session?.role || \"student\");\n  const [country, setCountry] = useState(() => session?.country || \"Singapore\");\n  const [level, setLevel] = useState(() => session?.level || \"Primary School\");\n  const [subject, setSubject] = useState(() => session?.subject || \"General\");\n  const [topic, setTopic] = useState(() => session?.topic || \"\");\n  const [action, setAction] = useState(() => session?.action || \"explain\");\n\n  // Advanced Prefs\n  const [constraints, setConstraints] = useState(\"None\");\n  const [contextMode, setContextMode] = useState(\"Focused\");\n  const [responseStyle, setResponseStyle] = useState(\"Normal\");\n  const [searchMode, setSearchMode] = useState(false);\n  const [customStyleText, setCustomStyleText] = useState(\"\");\n\n  // Chat State\n  const [chatUserKey, setChatUserKeyState] = useState(() => getChatUserKey(getSession()));\n  const [threads, setThreads] = useState([]);\n  const [activeChatId, setActiveChatIdState] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const [chatText, setChatText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [attempt, setAttempt] = useState(0);\n\n  // UI State\n  const [mounted, setMounted] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [chatMenuOpen, setChatMenuOpen] = useState(false);\n  const [copiedIdx, setCopiedIdx] = useState(-1);\n  const [stickToBottom, setStickToBottom] = useState(true);\n  const [showJump, setShowJump] = useState(false);\n  const [dismissPreviewNotice, setDismissPreviewNotice] = useState(false);\n  const [lastActionTime, setLastActionTime] = useState(Date.now());\n\n  // Modals\n  const [renameThreadId, setRenameThreadId] = useState(\"\");\n  const [renameValue, setRenameValue] = useState(\"\");\n  const [verifyGateOpen, setVerifyGateOpen] = useState(false);\n  const [teacherGateOpen, setTeacherGateOpen] = useState(false);\n  const [teacherGateStatus, setTeacherGateStatus] = useState(\"\");\n\n  // Resource Drawer\n  const [resourceDrawerOpen, setResourceDrawerOpen] = useState(false);\n\n  // Attachments\n  const [attachedImage, setAttachedImage] = useState(null);\n  const [attachErr, setAttachErr] = useState(\"\");\n\n  const listRef = useRef(null);\n\n  const verified = Boolean(session?.verified);\n  const classCode = session?.classroom?.code || \"\";\n  const canManageChats = verified;\n  const teacherOnlyBlocked = !session?.verified && role === \"educator\";\n\n  const assistantName = role === \"educator\" ? \"Assistant\" : \"Elora\";\n  const vision = true;\n\n  useEffect(() => {\n    setMounted(true);\n    if (typeof window !== \"undefined\") {\n      const open = window.localStorage.getItem(PREFS_OPEN_KEY) !== \"false\";\n      setSidebarOpen(open);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n\n    try {\n      const dismissed = window.localStorage.getItem(PREVIEW_DISMISS_KEY) === \"true\";\n      setDismissPreviewNotice(dismissed);\n    } catch {\n      setDismissPreviewNotice(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!verified) return;\n    if (typeof window === \"undefined\") return;\n    try {\n      window.localStorage.removeItem(PREVIEW_DISMISS_KEY);\n    } catch { }\n    setDismissPreviewNotice(false);\n  }, [verified]);\n\n  useEffect(() => {\n    // When country changes: ensure level is valid for that country.\n    const allowed = getCountryLevels(country);\n    if (!allowed.includes(level)) {\n      setLevel(allowed[0] || \"Primary 1\");\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [country]);\n\n  // Session events\n  useEffect(() => {\n    function onSessionEvent() {\n      const s = getSession();\n      setSession(s);\n      setRole(s?.role || \"student\");\n      setCountry(s?.country || \"Singapore\");\n\n      const allowed = getCountryLevels(s?.country || \"Singapore\");\n      const nextLevel = allowed.includes(s?.level) ? s.level : allowed[0] || \"Primary 1\";\n      setLevel(nextLevel);\n\n      setSubject(s?.subject || \"General\");\n      setTopic(s?.topic || \"\");\n      setAction(s?.action || \"explain\");\n    }\n\n    if (typeof window !== \"undefined\") {\n      window.addEventListener(\"elora:session\", onSessionEvent);\n    }\n    return () => {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"elora:session\", onSessionEvent);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!(role === \"student\" && action === \"check\")) {\n      setAttempt(0);\n    }\n  }, [role, action]);\n\n  useEffect(() => {\n    const el = listRef.current;\n    if (!el) return;\n    if (stickToBottom) el.scrollTop = el.scrollHeight;\n  }, [messages, loading, stickToBottom]);\n\n  function jumpToLatest() {\n    const el = listRef.current;\n    if (!el) return;\n    el.scrollTop = el.scrollHeight;\n    setStickToBottom(true);\n    setShowJump(false);\n  }\n\n  function dismissPreview() {\n    setDismissPreviewNotice(true);\n    if (typeof window !== \"undefined\") {\n      try {\n        window.localStorage.setItem(PREVIEW_DISMISS_KEY, \"true\");\n      } catch { }\n    }\n  }\n\n  async function copyToClipboard(text, idx) {\n    const value = String(text || \"\").trim();\n    if (!value) return;\n\n    try {\n      if (navigator?.clipboard?.writeText) {\n        await navigator.clipboard.writeText(value);\n      } else {\n        const ta = document.createElement(\"textarea\");\n        ta.value = value;\n        ta.setAttribute(\"readonly\", \"true\");\n        ta.style.position = \"fixed\";\n        ta.style.top = \"-9999px\";\n        document.body.appendChild(ta);\n        ta.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(ta);\n      }\n\n      setCopiedIdx(idx);\n      window.setTimeout(() => setCopiedIdx(-1), 900);\n    } catch {\n      // no-op\n    }\n  }\n\n  async function persistSessionPatch(patch) {\n    try {\n      // Note: Endpoint /api/session/set expects a token, not a patch.\n      // Persisting UI state via localStorage (getSession/saveSession) instead.\n    } catch {\n      // ignore\n    }\n  }\n\n  // Server chat endpoints store ONE chat; we keep using them only as a simple sync of active thread\n  async function saveServerChatIfVerified(currentSession, nextMessages) {\n    try {\n      if (!currentSession?.verified) return;\n      await fetch(\"/api/chat/set\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ messages: nextMessages }),\n      });\n    } catch {\n      // ignore\n    }\n  }\n\n  async function clearServerChatIfVerified(currentSession) {\n    try {\n      if (!currentSession?.verified) return;\n      await fetch(\"/api/chat/clear\", { method: \"POST\" });\n    } catch {\n      // ignore\n    }\n  }\n\n  function syncThreadsState(userKey) {\n    const ensured = ensureThreadsForUser(userKey);\n    const nextActive = ensured?.activeId || getActiveThreadId(userKey);\n\n    setThreads(listThreads(userKey));\n    setActiveChatIdState(nextActive);\n\n    const msgs = getThreadMessages(userKey, nextActive) || [];\n    setMessages(msgs);\n\n    if (verified) {\n      persistSessionPatch({ activeChatId: nextActive, messages: msgs });\n    }\n    return nextActive;\n  }\n\n  // Init: refresh verification, then load threads for correct identity (guest vs verified)\n  useEffect(() => {\n    let mounted = true;\n\n    (async () => {\n      await refreshVerifiedFromServer();\n      if (!mounted) return;\n\n      const s = getSession();\n      setSession(s);\n      setRole(s?.role || \"student\");\n\n      const allowed = getCountryLevels(s?.country || \"Singapore\");\n      setLevel(allowed.includes(s?.level) ? s.level : allowed[0] || \"Primary 1\");\n\n      const userKey = getChatUserKey(s);\n      setChatUserKeyState(userKey);\n\n      syncThreadsState(userKey);\n    })();\n\n    return () => {\n      mounted = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // When verification/email changes, switch identity (guest chats stay separate from verified)\n  useEffect(() => {\n    const s = getSession();\n    const nextKey = getChatUserKey(s);\n    if (nextKey === chatUserKey) return;\n\n    setChatUserKeyState(nextKey);\n    syncThreadsState(nextKey);\n    setAttempt(0);\n    setAttachedImage(null);\n    setAttachErr(\"\");\n    setChatMenuOpen(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [verified, session?.email]);\n\n  useEffect(() => {\n    persistSessionPatch({\n      role,\n      country,\n      level,\n      subject,\n      topic,\n      action,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [role, country, level, subject, topic, action]);\n\n  // Session Heartbeat for activeMinutes tracking\n  useEffect(() => {\n    const timer = setInterval(() => {\n      const s = getSession();\n      if (!s.usage) s.usage = { activeMinutes: 0 };\n      s.usage.activeMinutes = (Number(s.usage.activeMinutes) || 0) + 1;\n      s.usage.lastActive = new Date().toISOString();\n      saveSession(s);\n    }, 60000); // Every 1 minute\n\n    return () => clearInterval(timer);\n  }, []);\n\n  function setActiveThreadAndLoad(nextId) {\n    const id = setActiveThreadId(chatUserKey, nextId);\n    setActiveChatIdState(id);\n    setThreads(listThreads(chatUserKey));\n    const msgs = getThreadMessages(chatUserKey, id);\n    setMessages(msgs);\n    setAttempt(0);\n    setAttachedImage(null);\n    setAttachErr(\"\");\n    setChatMenuOpen(false);\n\n    persistSessionPatch({ activeChatId: id, messages: msgs });\n  }\n\n  function persistActiveMessages(nextMessages, { alsoSyncServer = true } = {}) {\n    setMessages(nextMessages);\n\n    // NO-MEMORY RULE for unverified users: Do not persist to storage or server.\n    if (!verified) return;\n\n    upsertThreadMessages(chatUserKey, activeChatId, nextMessages);\n    setThreads(listThreads(chatUserKey));\n\n    // Track usage on every message sent (only if Elora or User)\n    const isActuallyNew = nextMessages.length > messages.length;\n    if (isActuallyNew) {\n      const s = getSession();\n      if (!s.usage) s.usage = { messagesSent: 0, subjects: [], streak: 0 };\n      s.usage.messagesSent = (Number(s.usage.messagesSent) || 0) + 1;\n\n      // Update subjects explored\n      if (subject && !Array.isArray(s.usage.subjects)) s.usage.subjects = [];\n      if (subject && !s.usage.subjects.includes(subject)) {\n        s.usage.subjects.push(subject);\n      }\n\n      // Update session log (limited to last 50 for storage size)\n      if (!Array.isArray(s.usage.sessionLog)) s.usage.sessionLog = [];\n      const logEntry = { ts: new Date().toISOString(), subject: subject || \"General\", action: action };\n      s.usage.sessionLog = [logEntry, ...s.usage.sessionLog].slice(0, 50);\n\n      // Update last active\n      s.usage.lastActive = new Date().toISOString();\n\n      // Update streak\n      s.usage.streak = Math.max(Number(s.usage.streak) || 0, 1);\n\n      saveSession(s);\n    }\n\n    persistSessionPatch({ activeChatId, messages: nextMessages });\n\n    if (alsoSyncServer) {\n      const currentSession = getSession();\n      saveServerChatIfVerified(currentSession, nextMessages);\n    }\n  }\n\n  async function callElora({ messageOverride, baseMessages }) {\n    const currentSession = getSession();\n\n    const userText = String(messageOverride || chatText || \"\").trim();\n    if (!userText && !attachedImage?.dataUrl) return;\n\n    setLoading(true);\n\n    try {\n      if (role === \"educator\" && !currentSession?.verified) {\n        setVerifyGateOpen(true);\n        setLoading(false);\n        return;\n      }\n\n      if (teacherOnlyBlocked) {\n        setTeacherGateOpen(true);\n        setLoading(false);\n        return;\n      }\n\n      const attemptNext =\n        role === \"student\" && action === \"check\" ? Math.min(3, attempt + 1) : 0;\n\n      const timeSpent = (Date.now() - lastActionTime) / 1000;\n      const sentiment = (attemptNext > 1 || timeSpent > 60) ? \"supportive\" : \"standard\";\n\n      const payload = {\n        role,\n        action,\n        country,\n        level,\n        subject,\n        topic,\n        constraints,\n        contextMode,\n        responseStyle,\n        searchMode,\n        customStyleText,\n        attempt: attemptNext,\n        sentiment,\n        vision,\n        classCode,\n        message: userText,\n        messages: Array.isArray(baseMessages) ? baseMessages : messages,\n        teacherRules: currentSession.classroom?.teacherRules || \"\"\n      };\n\n      const r = await fetch(\"/api/assistant\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await r.json().catch(() => null);\n\n      const base = Array.isArray(baseMessages) ? baseMessages : messages;\n\n      if (!r.ok) {\n        const err = data?.error || data?.message || \"Request failed.\";\n        if (String(err).toLowerCase().includes(\"verify\")) setVerifyGateOpen(true);\n\n        const next = [...base, { from: \"elora\", text: `Error: ${String(err)}`, ts: Date.now() }];\n        persistActiveMessages(next, { alsoSyncServer: true });\n        setLoading(false);\n        return;\n      }\n\n      const outRaw = data?.reply || data?.text || data?.answer || \"\";\n      if (!outRaw) {\n        // Fallback if the engine returns empty but OK\n        const next = [...base, { from: \"elora\", text: \"I'm sorry, I couldn't generate a response. Please try rephrasing.\", ts: Date.now() }];\n        persistActiveMessages(next, { alsoSyncServer: true });\n        setLoading(false);\n        return;\n      }\n      const out = cleanAssistantText(outRaw);\n      const next = [...base, { from: \"elora\", text: out, ts: Date.now() }];\n\n      persistActiveMessages(next, { alsoSyncServer: true });\n\n      if (role === \"student\" && action === \"check\") {\n        setAttempt((a) => a + 1);\n      }\n\n      setAttachedImage(null);\n      setAttachErr(\"\");\n    } catch (err) {\n      console.error(\"AI Assistant Error:\", err);\n      const next = [\n        ...base,\n        {\n          from: \"elora\",\n          error: true,\n          type: \"recovery\",\n          text: ` System Error: ${err.message || \"Connection unstable\"}. Please try again.`,\n          message: err.message || \"Connection unstable\",\n          ts: Date.now()\n        },\n      ];\n      persistActiveMessages(next, { alsoSyncServer: false });\n    } finally {\n      setChatText(\"\");\n      setLoading(false);\n      setLastActionTime(Date.now());\n    }\n  }\n\n  async function sendChat() {\n    const trimmed = String(chatText || \"\").trim();\n    if ((!trimmed && !attachedImage?.dataUrl) || loading) return;\n\n    setLoading(true); // Pre-emptive lock\n    setAttachErr(\"\");\n\n    const inferred = inferActionFromMessage(trimmed);\n    if (inferred === \"check\" && action !== \"check\") {\n      setAction(\"check\");\n      setAttempt(0);\n      await persistSessionPatch({ action: \"check\" });\n    }\n\n    const userMsg = { from: \"user\", text: trimmed || \"(image)\", ts: Date.now() };\n\n    // Use functional update to ensure we have the absolute latest messages\n    setMessages(prev => {\n      const next = [...prev, userMsg];\n      persistActiveMessages(next, { alsoSyncServer: true });\n\n      // Delay the actual call slightly to ensure state has settled\n      setTimeout(() => {\n        callElora({ messageOverride: trimmed, baseMessages: next });\n      }, 0);\n\n      return next;\n    });\n  }\n\n  async function exportLast(type) {\n    const last = [...messages].reverse().find((m) => m?.from === \"elora\");\n    if (!last?.text) {\n      const next = [\n        ...messages,\n        { from: \"elora\", text: \"Nothing to export yet  ask me something first.\", ts: Date.now() },\n      ];\n      persistActiveMessages(next, { alsoSyncServer: false });\n      return;\n    }\n\n    if (!verified) {\n      setVerifyGateOpen(true);\n      const next = [\n        ...messages,\n        { from: \"elora\", text: \"Exports are locked until your email is verified.\", ts: Date.now() },\n      ];\n      persistActiveMessages(next, { alsoSyncServer: false });\n      return;\n    }\n\n    try {\n      const endpoint =\n        type === \"docx\" ? \"/api/export-docx\" : type === \"pptx\" ? \"/api/export-slides\" : \"/api/export-pdf\";\n\n      const content = cleanAssistantText(last.text);\n      const title = type === \"pptx\" ? \"Elora Slides\" : type === \"docx\" ? \"Elora Notes\" : \"Elora Export\";\n\n      const r = await fetch(endpoint, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ title, content }),\n      });\n\n      const ct = String(r.headers.get(\"content-type\") || \"\");\n      if (!r.ok || ct.includes(\"application/json\")) {\n        let err = `Export failed (HTTP ${r.status}).`;\n        let data = null;\n        try {\n          data = await r.json();\n        } catch { }\n        const code = String(data?.error || data?.message || \"\").trim();\n        if (r.status === 403 || code === \"not_verified\") {\n          setVerifyGateOpen(true);\n          err = \"Export blocked: verify your email to unlock exports.\";\n        } else if (code) {\n          err = `Export failed: ${code}`;\n        }\n        const next = [...messages, { from: \"elora\", text: err, ts: Date.now() }];\n        persistActiveMessages(next, { alsoSyncServer: false });\n        return;\n      }\n\n      const blob = await r.blob();\n      if (!blob || blob.size === 0) {\n        const next = [...messages, { from: \"elora\", text: \"Export failed: empty file returned.\", ts: Date.now() }];\n        persistActiveMessages(next, { alsoSyncServer: false });\n        return;\n      }\n\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = type === \"pptx\" ? \"elora.pptx\" : type === \"docx\" ? \"elora.docx\" : \"elora.pdf\";\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    } catch {\n      const next = [...messages, { from: \"elora\", text: \"Export failed due to a network error. Try again.\", ts: Date.now() }];\n      persistActiveMessages(next, { alsoSyncServer: false });\n    }\n  }\n\n  async function applyRefinement(chipId) {\n    const map = {\n      simpler: \"Make it simpler and more beginner-friendly.\",\n      example: \"Add one clear example that matches the topic.\",\n      steps: \"Show the steps clearly (short).\",\n      check: \"Give one quick check question at the end.\",\n      diff: \"Add differentiation: easier + harder extension.\",\n      timing: \"Add a simple timeline with approximate minutes.\",\n      resources: \"Add a short list of materials/resources.\",\n      easier: \"Make it easier while keeping the same topic.\",\n      harder: \"Make it harder and add a challenge question.\",\n      answers: \"Add a teacher answer key after the questions.\",\n      rubric: \"Add a short marking guide/rubric.\",\n      shorter: \"Make it shorter and more direct.\",\n      markscheme: \"Include a clear marking scheme.\",\n      variants: \"Add two variants (A/B) with the same skills tested.\",\n      outline: \"Tighten the slide outline into clear sections.\",\n      hooks: \"Add 1-2 engaging hooks or questions for the start.\",\n      examples: \"Add more examples that students can relate to.\",\n      notes: \"Add short teacher notes for each section.\",\n      \"more-steps\": \"Add more steps and explain the reasoning clearly.\",\n    };\n\n    const refinement = map[chipId] || \"Improve the answer.\";\n\n    const userMsg = { from: \"user\", text: refinement, ts: Date.now() };\n    const nextMessages = [...messages, userMsg];\n\n    persistActiveMessages(nextMessages, { alsoSyncServer: true });\n    await callElora({ messageOverride: refinement, baseMessages: nextMessages });\n  }\n\n  async function validateAndActivateInvite(code) {\n    const trimmed = (code || \"\").trim();\n    setTeacherGateStatus(\"\");\n\n    if (!trimmed) {\n      setTeacherGateStatus(\"Enter a code.\");\n      return false;\n    }\n    if (!verified) {\n      setTeacherGateStatus(\"Verify your email first.\");\n      return false;\n    }\n\n    try {\n      const act = await activateTeacher(trimmed);\n      if (!act?.ok) {\n        setTeacherGateStatus(\"Invalid code.\");\n        return false;\n      }\n\n      await refreshVerifiedFromServer();\n      const s = getSession();\n      setSession(s);\n\n      if (isTeacher()) {\n        setTeacherGateStatus(\"Teacher role active \");\n        return true;\n      }\n\n      setTeacherGateStatus(\"Code accepted, but teacher role not active. Refresh and try again.\");\n      return false;\n    } catch {\n      setTeacherGateStatus(\"Could not validate right now. Try again.\");\n      return false;\n    }\n  }\n\n  async function onPickImage(file) {\n    setAttachErr(\"\");\n    setAttachedImage(null);\n\n    if (!file) return;\n\n    if (!file.type || !file.type.startsWith(\"image/\")) {\n      setAttachErr(\"Images only (PNG/JPG/WebP).\");\n      return;\n    }\n\n    if (file.size > 5 * 1024 * 1024) {\n      setAttachErr(\"That image is too large. Try a smaller photo (max 5MB).\");\n      return;\n    }\n\n    try {\n      const out = await compressImageToDataUrl(file);\n      setAttachedImage(out);\n    } catch (e) {\n      const code = String(e?.message || \"\");\n      setAttachErr(\n        code === \"image_too_large\"\n          ? \"That image is too large to send. Try a closer crop.\"\n          : \"Couldnt attach that image. Try again.\"\n      );\n    }\n  }\n\n  function onNewChat() {\n    if (!canManageChats) {\n      setVerifyGateOpen(true);\n      return;\n    }\n    const name = `New Chat ${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;\n    const id = createThread(chatUserKey, name);\n    setActiveThreadAndLoad(id);\n  }\n\n  function onDeleteChat(id) {\n    deleteThread(chatUserKey, id);\n    const activeId = syncThreadsState(chatUserKey);\n    setActiveChatIdState(activeId);\n  }\n\n  function onRenameChatStart(thread) {\n    setRenameThreadId(thread.id);\n    setRenameValue(thread.name);\n  }\n\n  function onTogglePin(id) {\n    togglePinThread(chatUserKey, id);\n    setThreads(listThreads(chatUserKey));\n  }\n\n  function onRenameConfirm() {\n    if (renameValue.trim()) {\n      renameThread(chatUserKey, renameThreadId, renameValue.trim());\n      setThreads(listThreads(chatUserKey));\n      setRenameThreadId(\"\");\n    }\n  }\n\n  function onClearAll() {\n    clearThread(chatUserKey, activeChatId);\n    setMessages([]);\n    persistActiveMessages([], { alsoSyncServer: true });\n  }\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const el = listRef.current;\n      if (!el) return;\n\n      const isAtBottom = el.scrollHeight - el.scrollTop <= el.clientHeight + 1; // +1 for tolerance\n      setStickToBottom(isAtBottom);\n      setShowJump(!isAtBottom);\n    };\n\n    const el = listRef.current;\n    if (el) {\n      el.addEventListener(\"scroll\", handleScroll);\n      // Initial check\n      handleScroll();\n    }\n\n    return () => {\n      if (el) {\n        el.removeEventListener(\"scroll\", handleScroll);\n      }\n    };\n  }, [messages, loading]); // Re-run when messages or loading state changes to update scroll position\n\n  // Auto-scroll to bottom when new messages arrive and stickToBottom is true\n  useEffect(() => {\n    if (stickToBottom) {\n      jumpToLatest();\n    }\n  }, [messages, stickToBottom]);\n\n  // Handle keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        sendChat();\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [chatText, loading, attachedImage, messages, action, role, lastActionTime]); // Dependencies for sendChat\n\n  // Update chatUserKey when session changes (e.g., login/logout)\n  useEffect(() => {\n    const s = getSession();\n    const nextKey = getChatUserKey(s);\n    if (nextKey !== chatUserKey) {\n      setChatUserKeyState(nextKey);\n      syncThreadsState(nextKey);\n      setAttempt(0);\n      setAttachedImage(null);\n      setAttachErr(\"\");\n      setChatMenuOpen(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [session?.email, session?.verified]);\n\n  // Update session state when relevant props change\n  useEffect(() => {\n    const s = getSession();\n    const updatedSession = {\n      ...s,\n      role,\n      country,\n      level,\n      subject,\n      topic,\n      action,\n    };\n    saveSession(updatedSession);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [role, country, level, subject, topic, action]);\n\n  // Clear chat text when active chat changes\n  useEffect(() => {\n    setChatText(\"\");\n  }, [activeChatId]);\n\n  // Close resource drawer when topic/subject changes\n  useEffect(() => {\n    setResourceDrawerOpen(false);\n  }, [topic, subject]);\n\n  // Reset attempt count when action or role changes\n  useEffect(() => {\n    if (!(role === \"student\" && action === \"check\")) {\n      setAttempt(0);\n    }\n  }, [role, action]);\n\n  // Handle image attachment errors\n  useEffect(() => {\n    if (attachErr) {\n      const timer = setTimeout(() => setAttachErr(\"\"), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [attachErr]);\n\n  // Handle teacher gate status messages\n  useEffect(() => {\n    if (teacherGateStatus) {\n      const timer = setTimeout(() => setTeacherGateStatus(\"\"), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [teacherGateStatus]);\n\n  // Handle rename thread modal state\n  useEffect(() => {\n    if (renameThreadId && renameValue) {\n      // Focus input when modal opens\n      const input = document.getElementById(\"rename-input\");\n      if (input) input.focus();\n    }\n  }, [renameThreadId, renameValue]);\n\n  // Handle verification gate opening\n  useEffect(() => {\n    if (verifyGateOpen) {\n      // Optionally, log or track when the verification gate is shown\n    }\n  }, [verifyGateOpen]);\n\n  // Handle teacher gate opening\n  useEffect(() => {\n    if (teacherGateOpen) {\n      // Optionally, log or track when the teacher gate is shown\n    }\n  }, [teacherGateOpen]);\n\n  // Handle chat menu opening/closing\n  useEffect(() => {\n    if (chatMenuOpen) {\n      // Optionally, focus on the search input in the chat menu\n    }\n  }, [chatMenuOpen]);\n\n  // Handle dismiss preview notice\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      try {\n        window.localStorage.setItem(PREVIEW_DISMISS_KEY, dismissPreviewNotice ? \"true\" : \"false\");\n      } catch { }\n    }\n  }, [dismissPreviewNotice]);\n\n  // Reset loading state if component unmounts while loading\n  useEffect(() => {\n    return () => {\n      setLoading(false);\n    };\n  }, []);\n\n  if (!mounted) return <div className=\"min-h-screen bg-slate-950\" />;\n\n  return (\n    <div className=\"flex flex-col h-screen bg-premium text-premium selection:bg-primary-500/30 overflow-hidden font-sans transition-colors duration-500\">\n      <div className=\"flex flex-1 overflow-hidden relative\">\n        {/* Sidebar / Configuration */}\n        <AnimatePresence>\n          {sidebarOpen && (\n            <motion.div\n              initial={{ x: -100, opacity: 0 }}\n              animate={{ x: 0, opacity: 1 }}\n              exit={{ x: -100, opacity: 0 }}\n              className=\"w-full lg:w-80 h-full bg-premium-card border-r border-premium z-[40] fixed lg:relative flex flex-col shadow-premium-lg\"\n            >\n              <div className=\"p-8 border-b border-slate-100 dark:border-white/5\">\n                <div className=\"flex items-center justify-between mb-8 group/header\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 bg-indigo-600 rounded-2xl flex items-center justify-center text-xl shadow-xl shadow-indigo-500/20 group-hover/header:rotate-12 transition-transform duration-500\"></div>\n                    <div>\n                      <h1 className=\"text-xl font-black italic tracking-tighter\">ELORA</h1>\n                      <div className=\"flex items-center gap-1\">\n                        <div className=\"w-1 h-1 rounded-full bg-indigo-500 animate-pulse\" />\n                        <span className=\"text-[7px] font-black uppercase tracking-widest text-indigo-500/60\">Advanced Neural Link</span>\n                      </div>\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => {\n                      setSidebarOpen(false);\n                      try { window.localStorage.setItem(PREFS_OPEN_KEY, \"false\"); } catch { }\n                    }}\n                    className=\"lg:hidden p-2 text-slate-400 hover:text-slate-900 dark:hover:text-white transition-all\"\n                  >\n                    \n                  </button>\n                </div>\n\n                <div className=\"space-y-6\">\n                  <div className=\"space-y-3\">\n                    <label className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-2\">Personalization</label>\n\n                    <div className=\"space-y-4 p-4 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-100 dark:border-white/5 shadow-sm\">\n                      <div className=\"space-y-2\">\n                        <span className=\"text-[9px] font-black uppercase tracking-widest text-indigo-500 ml-1\">Syllabus Environment</span>\n                        <select\n                          value={country}\n                          onChange={(e) => setCountry(e.target.value)}\n                          className=\"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl px-3 py-2.5 text-[11px] font-bold focus:ring-2 ring-indigo-500/20 outline-none\"\n                        >\n                          {COUNTRIES.map(c => (\n                            <option key={c} value={c}>{c}</option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <span className=\"text-[9px] font-black uppercase tracking-widest text-indigo-500 ml-1\">Academic Grade</span>\n                        <select\n                          value={level}\n                          onChange={(e) => setLevel(e.target.value)}\n                          className=\"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl px-3 py-2.5 text-[11px] font-bold focus:ring-2 ring-indigo-500/20 outline-none\"\n                        >\n                          {getCountryLevels(country).map(l => (\n                            <option key={l} value={l}>{l}</option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <span className=\"text-[9px] font-black uppercase tracking-widest text-indigo-500 ml-1\">Target Subject</span>\n                        <select\n                          value={subject}\n                          onChange={(e) => setSubject(e.target.value)}\n                          className=\"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl px-3 py-2.5 text-[11px] font-bold focus:ring-2 ring-indigo-500/20 outline-none\"\n                        >\n                          {SUBJECTS.map(s => (\n                            <option key={s} value={s}>{s}</option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <span className=\"text-[9px] font-black uppercase tracking-widest text-indigo-500 ml-1\">Current Topic</span>\n                        <input\n                          type=\"text\"\n                          placeholder=\"e.g. Algebra I\"\n                          value={topic}\n                          onChange={(e) => setTopic(e.target.value)}\n                          className=\"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl px-3 py-2.5 text-[11px] font-bold focus:ring-2 ring-indigo-500/20 outline-none placeholder:text-slate-400\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar\">\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {Object.keys(ROLE_QUICK_ACTIONS).map((r) => (\n                    <button\n                      key={r}\n                      onClick={() => setRole(r)}\n                      className={cn(\n                        \"p-3 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all\",\n                        role === r\n                          ? \"bg-indigo-600 border-indigo-400 text-white shadow-xl shadow-indigo-500/20\"\n                          : \"bg-white dark:bg-slate-800/50 border-slate-100 dark:border-white/5 text-slate-400 hover:border-indigo-500/30\"\n                      )}\n                    >\n                      {r}\n                    </button>\n                  ))}\n                </div>\n\n                <div className=\"p-6 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 space-y-4 relative overflow-hidden group shadow-sm\">\n                  <div className=\"flex items-center justify-between relative z-10\">\n                    <span className=\"text-[10px] font-black uppercase tracking-widest text-indigo-600 dark:text-indigo-400\">Learning Mastery</span>\n                    <span className=\"text-[10px] font-bold text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded-full border border-slate-200 dark:border-slate-600\">Tier 8</span>\n                  </div>\n                  <div className=\"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden relative z-10\">\n                    <motion.div\n                      initial={{ width: 0 }}\n                      animate={{ width: \"68%\" }}\n                      transition={{ duration: 1.5, ease: \"easeOut\" }}\n                      className=\"h-full bg-indigo-600 dark:bg-indigo-500\"\n                    />\n                  </div>\n                  <div className=\"flex justify-between items-center text-[9px] font-bold text-slate-400 uppercase tracking-widest relative z-10\">\n                    <span>1,240 XP</span>\n                    <span>2,000 XP</span>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Main Chat Area */}\n        <div className=\"flex-1 flex flex-col min-w-0 bg-white dark:bg-slate-950 relative\">\n          {/* Header */}\n          <div className=\"h-20 flex items-center justify-between px-6 lg:px-8 border-b border-slate-100 dark:border-white/5 bg-white/80 dark:bg-slate-950/80 backdrop-blur-xl z-20 shrink-0\">\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => {\n                  const next = !sidebarOpen;\n                  setSidebarOpen(next);\n                  try { window.localStorage.setItem(PREFS_OPEN_KEY, String(next)); } catch { }\n                }}\n                className=\"lg:hidden p-3 hover:bg-slate-100 dark:hover:bg-white/5 rounded-2xl transition-all\"\n              >\n                <div className=\"w-5 h-0.5 bg-slate-900 dark:bg-white mb-1\" />\n                <div className=\"w-5 h-0.5 bg-slate-900 dark:bg-white mb-1\" />\n                <div className=\"w-3 h-0.5 bg-slate-900 dark:bg-white\" />\n              </button>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"lg:hidden w-8 h-8 bg-indigo-600 rounded-xl flex items-center justify-center text-sm shadow-xl\"></div>\n                <div>\n                  <h2 className=\"text-sm font-black tracking-tight\">{activeChatId ? threads.find(t => t.id === activeChatId)?.name || \"Current Session\" : \"New Link\"}</h2>\n                  <div className=\"flex items-center gap-1.5\">\n                    <div className=\"w-1 h-1 rounded-full bg-emerald-500 animate-pulse\" />\n                    <span className=\"text-[9px] font-black uppercase tracking-widest text-slate-400\">\n                      {loading ? \"Neural Analysis...\" : `Adapting to ${level} ${subject}`}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={() => setResourceDrawerOpen(true)}\n                className=\"hidden sm:flex items-center gap-2 px-4 py-2 bg-indigo-500/10 text-indigo-500 hover:bg-indigo-500/20 rounded-2xl transition-all font-black text-[10px] uppercase tracking-widest\"\n              >\n                <span>Resource Lab</span>\n                <span className=\"w-4 h-4 rounded-full bg-indigo-500 text-white flex items-center justify-center text-[8px]\"></span>\n              </button>\n\n              <div className=\"h-6 w-px bg-slate-100 dark:border-white/5 mx-2 hidden sm:block\" />\n\n              <button\n                onClick={() => setChatMenuOpen(!chatMenuOpen)}\n                className=\"p-3 hover:bg-slate-100 dark:hover:bg-white/5 rounded-2xl transition-all text-slate-400\"\n              >\n                \n              </button>\n            </div>\n          </div>\n\n          {/* Messages Area */}\n          <div\n            ref={listRef}\n            className=\"flex-1 overflow-y-auto overflow-x-hidden p-6 lg:p-10 space-y-10 custom-scrollbar scroll-smooth\"\n          >\n            {messages.length === 0 ? (\n              <div className=\"max-w-3xl mx-auto pt-10 sm:pt-20\">\n                <motion.div\n                  initial={{ opacity: 0, scale: 0.95 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  className=\"text-center space-y-8\"\n                >\n                  <div className=\"relative inline-block\">\n                    <div className=\"absolute inset-0 bg-indigo-500 blur-3xl opacity-20 animate-pulse\" />\n                    <div className=\"relative w-24 h-24 bg-indigo-600 rounded-[2.5rem] flex items-center justify-center text-4xl shadow-2xl shadow-indigo-500/40 mx-auto\"></div>\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    <h1 className=\"text-4xl font-black tracking-tight text-slate-900 dark:text-white leading-tight\">\n                      Ready to learn, <span className=\"text-indigo-600\">{session?.email?.split('@')[0] || \"Explorer\"}</span>?\n                    </h1>\n                    <p className=\"text-sm font-medium text-slate-500 dark:text-slate-400 max-w-sm mx-auto leading-relaxed\">\n                      I&apos;m Elora, your cinematic AI tutor. Your subject is set to <span className=\"text-indigo-500 font-bold\">{subject}</span>.\n                    </p>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pt-8\">\n                    {pickStarterSuggestions({ seed: lastActionTime, role, country, level, subject, topic }).map((s, idx) => (\n                      <button\n                        key={idx}\n                        onClick={() => {\n                          setChatText(s);\n                          // Auto send if they click? For now just fill input\n                        }}\n                        className=\"p-5 rounded-[2rem] bg-slate-50 dark:bg-white/5 border border-transparent hover:border-indigo-500/20 hover:bg-white dark:hover:bg-slate-900 text-left transition-all hover:shadow-xl group\"\n                      >\n                        <div className=\"text-[10px] font-black uppercase tracking-widest text-indigo-500 mb-2\">Suggestion {idx + 1}</div>\n                        <p className=\"text-[13px] font-bold text-slate-600 dark:text-slate-300 leading-relaxed group-hover:text-indigo-600 transition-colors\">{s}</p>\n                      </button>\n                    ))}\n                  </div>\n                </motion.div>\n              </div>\n            ) : (\n              <div className=\"max-w-4xl mx-auto space-y-12 pb-32\">\n                {messages.map((m, idx) => {\n                  const isElora = m.from === \"elora\";\n                  // const isUser = m.from === \"user\"; // Removed\n                  // Extract quiz data if present\n                  const quizMatch = m.text?.match(/<quiz_data>([\\s\\S]*?)<\\/quiz_data>/i);\n                  const quizJson = quizMatch ? JSON.parse(quizMatch[1]) : null;\n                  const cleanText = m.text?.replace(/<quiz_data>[\\s\\S]*?<\\/quiz_data>/gi, \"\").trim();\n\n                  return (\n                    <motion.div\n                      key={idx}\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      className={cn(\"flex group\", isElora ? \"justify-start\" : \"justify-end\")}\n                    >\n                      <div className={cn(\"max-w-[85%] sm:max-w-2xl flex gap-4 sm:gap-6\", isElora ? \"flex-row\" : \"flex-row-reverse\")}>\n                        {isElora && (\n                          <div className=\"w-10 h-10 bg-indigo-600 rounded-2xl flex items-center justify-center text-xl shadow-xl shadow-indigo-500/20 shrink-0 mt-1\"></div>\n                        )}\n\n                        <div className=\"space-y-4 min-w-0\">\n                          {cleanText && (\n                            <div className={cn(\n                              \"p-6 sm:p-8 rounded-[2.5rem] relative overflow-hidden\",\n                              isElora\n                                ? \"bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5 text-slate-800 dark:text-slate-100\"\n                                : \"bg-indigo-600 text-white shadow-2xl shadow-indigo-600/20\"\n                            )}>\n                              {isElora && (\n                                <div className=\"absolute top-0 right-0 p-4 opacity-0 transition-opacity\">\n                                  <button onClick={() => copyToClipboard(cleanText, idx)} className=\"p-2 hover:bg-slate-200 dark:hover:bg-white/10 rounded-xl transition-all\">\n                                    {copiedIdx === idx ? \"\" : \"\"}\n                                  </button>\n                                </div>\n                              )}\n                              <div className=\"prose prose-slate dark:prose-invert max-w-none text-[15px] font-medium leading-[1.8] tracking-tight whitespace-pre-wrap\">\n                                {cleanText}\n                              </div>\n                            </div>\n                          )}\n\n                          {isElora && m.error && (\n                            <div className=\"bg-red-500/10 border border-red-500/20 rounded-3xl p-6 text-red-500 backdrop-blur-md shadow-premium-lg\">\n                              <div className=\"flex items-center gap-3 mb-2 font-black text-[10px] uppercase tracking-widest\">\n                                <span> System Recovery</span>\n                                <div className=\"h-px flex-1 bg-red-500/20\" />\n                              </div>\n                              <p className=\"text-sm font-bold mb-4\">{m.message || \"Something went wrong. Let's try that again.\"}</p>\n                              <button\n                                onClick={() => sendChat()}\n                                className=\"px-4 py-2 bg-red-500 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-red-600 transition-all shadow-lg shadow-red-500/30\"\n                              >\n                                Retry Connection\n                              </button>\n                            </div>\n                          )}\n\n                          {isElora && quizJson && (\n                            <InteractiveQuiz data={quizJson} onComplete={() => { }} />\n                          )}\n\n                          {isElora && idx === messages.length - 1 && action && REFINEMENT_CHIPS[action] && !loading && (\n                            <div className=\"flex flex-wrap gap-2 pt-2\">\n                              {REFINEMENT_CHIPS[action].map(chip => (\n                                <button\n                                  key={chip.id}\n                                  onClick={() => applyRefinement(chip.id)}\n                                  className=\"px-4 py-2 rounded-full border border-slate-200 dark:border-white/10 bg-white dark:bg-slate-900 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-indigo-600 transition-all\"\n                                >\n                                  {chip.label}\n                                </button>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </motion.div>\n                  );\n                })}\n                {loading && (\n                  <div className=\"flex justify-start animate-reveal\">\n                    <div className=\"flex gap-4 sm:gap-6 max-w-2xl\">\n                      <div className=\"w-10 h-10 bg-indigo-600 rounded-2xl flex items-center justify-center text-xl shadow-xl shadow-indigo-500/20 shrink-0\"></div>\n                      <div className=\"flex items-center gap-1.5 p-6 rounded-[2.5rem] bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5\">\n                        <div className=\"w-2 h-2 bg-indigo-500 rounded-full animate-bounce\" />\n                        <div className=\"w-2 h-2 bg-indigo-500 rounded-full animate-bounce [animation-delay:0.2s]\" />\n                        <div className=\"w-2 h-2 bg-indigo-500 rounded-full animate-bounce [animation-delay:0.4s]\" />\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Composer */}\n          <div className=\"p-6 lg:p-10 bg-white dark:bg-slate-950 pt-20 shrink-0 relative z-20\">\n            {/* Jump to latest */}\n            <AnimatePresence>\n              {showJump && (\n                <motion.button\n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: 10 }}\n                  onClick={jumpToLatest}\n                  className=\"absolute top-0 left-1/2 -translate-x-1/2 px-6 py-2.5 bg-indigo-600 text-white text-[10px] font-black uppercase tracking-widest rounded-full shadow-2xl hover:scale-105 transition-all flex items-center gap-2\"\n                >\n                  <span>New Message </span>\n                </motion.button>\n              )}\n            </AnimatePresence>\n\n            <div className=\"max-w-4xl mx-auto space-y-6\">\n              {/* Attachment Preview */}\n              <AnimatePresence>\n                {attachedImage && (\n                  <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: 10 }}\n                    className=\"flex items-center gap-4 p-3 bg-slate-50 dark:bg-white/5 rounded-2xl border border-indigo-500/20 w-fit\"\n                  >\n                    <div className=\"w-12 h-12 rounded-xl overflow-hidden bg-indigo-500/10 border border-white/10\">\n                      {/* eslint-disable-next-line @next/next/no-img-element */}\n                      <img src={attachedImage.dataUrl} alt=\"Preview\" className=\"w-full h-full object-cover\" />\n                    </div>\n                    <div>\n                      <div className=\"text-[10px] font-black uppercase tracking-widest text-indigo-500\">Attachment</div>\n                      <div className=\"text-[11px] font-bold text-slate-500 truncate max-w-[120px]\">{attachedImage.name}</div>\n                    </div>\n                    <button onClick={() => setAttachedImage(null)} className=\"p-2 hover:bg-slate-200 dark:hover:bg-white/10 rounded-xl transition-all font-black\"></button>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n\n              {attachErr && (\n                <div className=\"text-[10px] font-black uppercase tracking-widest text-rose-500 ml-4 animate-reveal\">\n                   {attachErr}\n                </div>\n              )}\n\n              <div className=\"relative group\">\n                <div className=\"absolute -inset-1 rounded-[2.5rem] bg-slate-200 dark:bg-slate-800 blur opacity-10 group-focus-within:opacity-30 transition duration-1000\" />\n\n                <div className=\"relative flex items-end gap-3 p-3 bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-white/5 shadow-2xl\">\n                  <div className=\"flex flex-col gap-2 pb-1 pl-1\">\n                    <label className=\"cursor-pointer p-3 hover:bg-slate-100 dark:hover:bg-white/10 rounded-2xl transition-all text-xl\" title=\"Attach Image\">\n                      \n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        className=\"hidden\"\n                        onChange={(e) => onPickImage(e.target.files?.[0])}\n                        disabled={loading}\n                      />\n                    </label>\n                  </div>\n\n                  <textarea\n                    placeholder={loading ? `${assistantName} is thinking...` : `Ask ${assistantName} anything about ${topic || subject}...`}\n                    value={chatText}\n                    onChange={(e) => setChatText(e.target.value)}\n                    className=\"flex-1 bg-transparent border-none focus:ring-0 p-4 min-h-[56px] max-h-48 text-[15px] font-medium placeholder:text-slate-400 custom-scrollbar resize-none\"\n                    disabled={loading}\n                  />\n\n                  <div className=\"flex flex-col gap-2 pb-1 pr-1\">\n                    <button\n                      onClick={sendChat}\n                      disabled={loading || (!chatText.trim() && !attachedImage)}\n                      className={cn(\n                        \"w-12 h-12 rounded-2xl flex items-center justify-center text-xl transition-all shadow-xl\",\n                        chatText.trim() || attachedImage\n                          ? \"bg-indigo-600 text-white hover:scale-105 active:scale-95 shadow-indigo-500/40\"\n                          : \"bg-slate-100 dark:bg-white/5 text-slate-400 cursor-not-allowed\"\n                      )}\n                    >\n                      {loading ? \"\" : \"\"}\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              {/* Status / Export */}\n              <div className=\"flex items-center justify-between px-6\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className={cn(\"w-2 h-2 rounded-full\", verified ? \"bg-emerald-500\" : \"bg-amber-500 animate-pulse\")} />\n                    <span className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">\n                      {verified ? \"Neural Link Secured\" : \"Guest Mode Active\"}\n                    </span>\n                  </div>\n                  {!verified && (\n                    <Link href=\"/login\" className=\"text-[10px] font-black uppercase tracking-widest text-indigo-500 hover:text-indigo-400 transition-colors\">\n                      Sync Account \n                    </Link>\n                  )}\n                </div>\n\n                <div className=\"flex items-center gap-4\">\n                  <button\n                    onClick={() => onClearAll()}\n                    className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-rose-500 transition-colors\"\n                  >\n                    Clear Path\n                  </button>\n                  <div className=\"h-3 w-px bg-slate-100 dark:border-white/5\" />\n                  <div className=\"flex gap-2\">\n                    {[\"docx\", \"pptx\", \"pdf\"].map(type => (\n                      <button\n                        key={type}\n                        onClick={() => exportLast(type)}\n                        className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-indigo-500 transition-colors\"\n                      >\n                        {type}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              {/* Chat History Menu */}\n              <AnimatePresence>\n                {chatMenuOpen && (\n                  <>\n                    <motion.div\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      exit={{ opacity: 0 }}\n                      onClick={() => setChatMenuOpen(false)}\n                      className=\"fixed inset-0 bg-slate-950/20 backdrop-blur-sm z-[60]\"\n                    />\n                    <motion.div\n                      initial={{ x: \"100%\" }}\n                      animate={{ x: 0 }}\n                      exit={{ x: \"100%\" }}\n                      transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\n                      className=\"fixed top-0 right-0 h-full w-full max-w-sm bg-white dark:bg-slate-900 border-l border-slate-100 dark:border-white/5 z-[61] shadow-2xl flex flex-col\"\n                    >\n                      <div className=\"p-8 border-b border-slate-100 dark:border-white/5 flex items-center justify-between\">\n                        <h3 className=\"text-xl font-black italic tracking-tighter\">THREAD HISTORY</h3>\n                        <button onClick={() => setChatMenuOpen(false)} className=\"text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors\"></button>\n                      </div>\n\n                      <div className=\"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar\">\n                        <button\n                          onClick={() => { onNewChat(); setChatMenuOpen(false); }}\n                          className=\"w-full flex items-center justify-center gap-3 p-4 rounded-2xl bg-indigo-600 text-white font-black text-xs uppercase tracking-widest shadow-xl shadow-indigo-500/20 hover:scale-[1.02] active:scale-95 transition-all mb-4\"\n                        >\n                          <span>Initiate New Session</span>\n                          <span></span>\n                        </button>\n\n                        {threads.length === 0 ? (\n                          <div className=\"text-center py-10 text-slate-400 text-xs font-bold uppercase tracking-widest opacity-40 italic\">No stored threads</div>\n                        ) : (\n                          threads.map((t) => {\n                            const isActive = activeChatId === t.id;\n                            return (\n                              <div\n                                key={t.id}\n                                className={cn(\n                                  \"group p-4 rounded-2xl border transition-all cursor-pointer relative\",\n                                  isActive\n                                    ? \"bg-indigo-500/10 border-indigo-500/40\"\n                                    : \"bg-white dark:bg-slate-800/50 border-transparent hover:border-slate-200 dark:hover:border-white/10\"\n                                )}\n                                onClick={() => { setActiveThreadAndLoad(t.id); setChatMenuOpen(false); }}\n                              >\n                                <div className=\"flex items-center gap-3\">\n                                  <span className=\"text-lg\">{t.pinned ? \"\" : \"\"}</span>\n                                  <div className=\"flex-1 min-w-0\">\n                                    <h4 className={cn(\"text-xs font-black truncate\", isActive ? \"text-indigo-600\" : \"text-slate-600 dark:text-slate-200\")}>{t.name}</h4>\n                                    <p className=\"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-1\">\n                                      {new Date(t.ts).toLocaleDateString([], { month: 'short', day: 'numeric' })}\n                                    </p>\n                                  </div>\n                                </div>\n                                <div className=\"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                                  <button\n                                    onClick={(e) => { e.stopPropagation(); onTogglePin(t.id); }}\n                                    className=\"p-1.5 hover:bg-slate-200 dark:hover:bg-white/10 rounded-lg text-[10px]\"\n                                  >\n                                    {t.pinned ? \"\" : \"\"}\n                                  </button>\n                                  <button\n                                    onClick={(e) => { e.stopPropagation(); onRenameChatStart(t); }}\n                                    className=\"p-1.5 hover:bg-slate-200 dark:hover:bg-white/10 rounded-lg text-[10px]\"\n                                  >\n                                    \n                                  </button>\n                                  <button\n                                    onClick={(e) => { e.stopPropagation(); onDeleteChat(t.id); }}\n                                    className=\"p-1.5 hover:bg-slate-200 dark:hover:bg-white/10 rounded-lg text-[10px] text-rose-500\"\n                                  >\n                                    \n                                  </button>\n                                </div>\n                              </div>\n                            );\n                          })\n                        )}\n                      </div>\n                    </motion.div>\n                  </>\n                )}\n              </AnimatePresence>\n\n              <AIResourceDrawer\n                open={resourceDrawerOpen}\n                onClose={() => setResourceDrawerOpen(false)}\n                topic={topic}\n                subject={subject}\n              />\n\n              {/* Global Modals */}\n              <Modal open={!!renameThreadId} onClose={() => setRenameThreadId(\"\")} title=\"Rename Thread\">\n                <div className=\"space-y-6\">\n                  <input\n                    id=\"rename-input\"\n                    type=\"text\"\n                    value={renameValue}\n                    onChange={(e) => setRenameValue(e.target.value)}\n                    className=\"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-white/5 rounded-2xl p-4 text-sm font-bold focus:ring-2 ring-indigo-500/20\"\n                    onKeyDown={(e) => e.key === \"Enter\" && onRenameConfirm()}\n                    autoFocus\n                  />\n                  <div className=\"flex gap-3\">\n                    <button\n                      onClick={() => setRenameThreadId(\"\")}\n                      className=\"flex-1 py-3 rounded-xl bg-slate-100 dark:bg-white/5 text-[10px] font-black uppercase tracking-widest hover:bg-slate-200 dark:hover:bg-white/10 transition-all\"\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      onClick={onRenameConfirm}\n                      className=\"flex-1 py-3 rounded-xl bg-indigo-600 text-white text-[10px] font-black uppercase tracking-widest shadow-xl shadow-indigo-500/20 hover:scale-[1.02] active:scale-95 transition-all\"\n                    >\n                      Confirm Rename\n                    </button>\n                  </div>\n                </div>\n              </Modal>\n\n              <Modal open={verifyGateOpen} onClose={() => setVerifyGateOpen(false)} title=\"Security Breach Detected\">\n                <div className=\"text-center space-y-6 py-4\">\n                  <div className=\"w-20 h-20 bg-amber-500/10 text-amber-500 rounded-3xl flex items-center justify-center text-3xl mx-auto shadow-xl\"></div>\n                  <div className=\"space-y-2\">\n                    <h4 className=\"text-xl font-black tracking-tight\">Access Restricted</h4>\n                    <p className=\"text-xs font-medium text-slate-500 leading-relaxed px-4\">\n                      Advanced learning tools, cloud persistence, and high-level exports require a verified neural link (your email).\n                    </p>\n                  </div>\n                  <div className=\"flex flex-col gap-3\">\n                    <Link href=\"/login\" className=\"py-4 rounded-2xl bg-indigo-600 text-white text-xs font-black uppercase tracking-widest shadow-xl shadow-indigo-500/20 hover:scale-[1.02] active:scale-95 transition-all no-underline\">\n                      Secure Connection Now\n                    </Link>\n                    <button\n                      onClick={() => setVerifyGateOpen(false)}\n                      className=\"py-4 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-slate-600 transition-colors\"\n                    >\n                      Continue in Sandbox Mode\n                    </button>\n                  </div>\n                </div>\n              </Modal>\n\n              <Modal open={teacherGateOpen} onClose={() => setTeacherGateOpen(false)} title=\"Teacher Authorization\">\n                <div className=\"space-y-6 py-2\">\n                  <div className=\"flex items-center gap-4 p-4 bg-indigo-500/10 rounded-2xl border border-indigo-500/20\">\n                    <div className=\"text-2xl\"></div>\n                    <p className=\"text-[11px] font-bold text-indigo-700 dark:text-indigo-300 leading-relaxed\">\n                      Educator tools (Lesson Plans, Worksheets) require a verified teacher invitation code.\n                    </p>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <label className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-2\">Access Key</label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"ELORA-XXXX-XXXX\"\n                      className=\"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-white/5 rounded-2xl p-4 text-sm font-bold uppercase tracking-widest placeholder:text-slate-300 focus:ring-2 ring-indigo-500/20\"\n                      onKeyUp={(e) => {\n                        if (e.key === 'Enter') {\n                          validateAndActivateInvite(e.target.value).then(ok => {\n                            if (ok) setTimeout(() => setTeacherGateOpen(false), 2000);\n                          });\n                        }\n                      }}\n                      id=\"teacher-code-input\"\n                    />\n                    {teacherGateStatus && (\n                      <div className={cn(\"text-[9px] font-black uppercase tracking-widest ml-2\", teacherGateStatus.includes(\"\") ? \"text-emerald-500\" : \"text-rose-500\")}>\n                        {teacherGateStatus}\n                      </div>\n                    )}\n                  </div>\n\n                  <button\n                    onClick={async () => {\n                      const input = document.getElementById(\"teacher-code-input\");\n                      if (input) {\n                        const ok = await validateAndActivateInvite(input.value);\n                        if (ok) setTimeout(() => setTeacherGateOpen(false), 2000);\n                      }\n                    }}\n                    className=\"w-full py-4 rounded-2xl bg-slate-900 dark:bg-white text-white dark:text-slate-900 text-xs font-black uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-95 transition-all\"\n                  >\n                    Verify Credentials\n                  </button>\n                  <p className=\"text-center text-[10px] font-medium text-slate-400\">\n                    Need a code? <a href=\"mailto:support@elora.ai\" className=\"text-indigo-500 font-bold\">Request Access</a>\n                  </p>\n                </div>\n              </Modal>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Floating Preview Notice */}\n      {!verified && !dismissPreviewNotice && (\n        <motion.div\n          initial={{ y: 100 }}\n          animate={{ y: 0 }}\n          className=\"fixed bottom-6 left-1/2 -translate-x-1/2 w-[calc(100%-3rem)] max-w-xl bg-white/10 dark:bg-slate-900/10 backdrop-blur-2xl border border-white/20 p-2 pl-6 rounded-full flex items-center justify-between shadow-2xl z-50 ring-1 ring-white/10\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <span className=\"flex w-2 h-2 rounded-full bg-amber-500 animate-pulse\" />\n            <p className=\"text-[10px] font-black text-slate-900 dark:text-white uppercase tracking-widest\">\n              Limited Sandbox: <span className=\"opacity-60 font-medium\">Messages won&apos;t save.</span>\n            </p>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Link href=\"/login\" className=\"px-4 py-2 bg-white dark:bg-white text-slate-900 rounded-full text-[10px] font-black uppercase tracking-widest no-underline\">\n              Secure Link\n            </Link>\n            <button onClick={dismissPreview} className=\"p-2 text-slate-400 hover:text-white transition-opacity\">\n              \n            </button>\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\classes\\index.js",["624"],[],"// pages/classes/index.js\n// Classes list page - Premium UI\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport Navigation from '../../components/Navigation';\nimport { getUserClasses, createClass } from '../../lib/firestore/classes';\nimport { EmptyClasses } from '../../components/ui/EmptyStates';\nimport { useApp } from '../../lib/contexts/AppContext';\nimport { useNotifications } from '../../lib/contexts/NotificationContext';\n\nexport default function ClassesPage() {\n    const { user } = useApp();\n    const notify = useNotifications();\n    const [classes, setClasses] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [showCreateModal, setShowCreateModal] = useState(false);\n\n    useEffect(() => {\n        loadClasses();\n    }, [user]);\n\n    const loadClasses = async () => {\n        if (!user) return;\n        setLoading(true);\n        try {\n            const userClasses = await getUserClasses(user.uid);\n            setClasses(userClasses);\n        } catch (error) {\n            console.error('Failed to load classes:', error);\n            notify.error('Failed to load classes');\n        }\n        setLoading(false);\n    };\n\n    const handleCreateClass = async (classData) => {\n        try {\n            await createClass({ ...classData, teacherId: user.uid });\n            notify.success('Class created successfully!');\n            setShowCreateModal(false);\n            loadClasses();\n        } catch (error) {\n            console.error('Failed to create class:', error);\n            notify.error('Failed to create class');\n        }\n    };\n\n    if (loading) {\n        return (\n            <>\n                <Navigation />\n                <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900\">\n                    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                            {[1, 2, 3, 4, 5, 6].map((i) => (\n                                <div key={i} className=\"skeleton h-48 rounded-2xl\" />\n                            ))}\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n\n    return (\n        <>\n            <Navigation />\n            <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                    {/* Header */}\n                    <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8\">\n                        <div>\n                            <h1 className=\"text-3xl font-bold text-neutral-900 dark:text-white\">My Classes</h1>\n                            <p className=\"text-neutral-600 dark:text-neutral-400 mt-1\">\n                                Manage your classes and students\n                            </p>\n                        </div>\n                        <button\n                            onClick={() => setShowCreateModal(true)}\n                            className=\"btn btn-primary group\"\n                        >\n                            <svg className=\"w-5 h-5 transition-transform group-hover:rotate-90\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                            </svg>\n                            Create Class\n                        </button>\n                    </div>\n\n                    {/* Classes Grid */}\n                    {classes.length === 0 ? (\n                        <EmptyClasses onCreate={() => setShowCreateModal(true)} />\n                    ) : (\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                            {classes.map((classItem, idx) => (\n                                <motion.div\n                                    key={classItem.id}\n                                    initial={{ opacity: 0, y: 20 }}\n                                    animate={{ opacity: 1, y: 0 }}\n                                    transition={{ delay: idx * 0.05 }}\n                                >\n                                    <Link href={`/classes/${classItem.id}`}>\n                                        <div className=\"group relative bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 p-6 hover:shadow-xl hover:shadow-primary-500/10 transition-all cursor-pointer overflow-hidden\">\n                                            {/* Gradient Background */}\n                                            <div className=\"absolute inset-0 bg-gradient-to-br from-primary-500/5 via-transparent to-secondary-500/5 opacity-0 group-hover:opacity-100 transition-opacity\" />\n\n                                            <div className=\"relative\">\n                                                {/* Class Icon */}\n                                                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center mb-4 shadow-lg shadow-primary-500/25 group-hover:shadow-primary-500/40 transition-shadow\">\n                                                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                                                    </svg>\n                                                </div>\n\n                                                {/* Class Info */}\n                                                <h3 className=\"text-lg font-bold text-neutral-900 dark:text-white mb-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors\">\n                                                    {classItem.name}\n                                                </h3>\n                                                <p className=\"text-sm text-neutral-600 dark:text-neutral-400 mb-4 line-clamp-2\">\n                                                    {classItem.description || `${classItem.subject}  ${classItem.level}`}\n                                                </p>\n\n                                                {/* Stats */}\n                                                <div className=\"flex items-center gap-4 text-sm\">\n                                                    <div className=\"flex items-center gap-1.5 text-neutral-600 dark:text-neutral-400\">\n                                                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />\n                                                        </svg>\n                                                        <span>{classItem.students?.length || 0} students</span>\n                                                    </div>\n                                                    <div className=\"flex items-center gap-1.5 text-neutral-600 dark:text-neutral-400\">\n                                                        <div className=\"w-2 h-2 rounded-full bg-secondary-500\" />\n                                                        <span>{classItem.joinCode}</span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </Link>\n                                </motion.div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* Create Class Modal */}\n            {showCreateModal && (\n                <CreateClassModal\n                    onClose={() => setShowCreateModal(false)}\n                    onCreate={handleCreateClass}\n                />\n            )}\n        </>\n    );\n}\n\nfunction CreateClassModal({ onClose, onCreate }) {\n    const [formData, setFormData] = useState({\n        name: '',\n        subject: '',\n        level: '',\n        description: '',\n    });\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        onCreate(formData);\n    };\n\n    return (\n        <>\n            <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-modal-backdrop\" onClick={onClose} />\n            <div className=\"fixed inset-0 flex items-center justify-center z-modal p-4\">\n                <motion.div\n                    initial={{ opacity: 0, scale: 0.95 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    className=\"bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl max-w-md w-full p-6\"\n                >\n                    <h3 className=\"text-2xl font-bold text-neutral-900 dark:text-white mb-6\">Create New Class</h3>\n\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\n                        <div>\n                            <label className=\"label\">Class Name *</label>\n                            <input\n                                type=\"text\"\n                                value={formData.name}\n                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                className=\"input\"\n                                placeholder=\"e.g., Math 101\"\n                                required\n                            />\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"label\">Subject *</label>\n                                <input\n                                    type=\"text\"\n                                    value={formData.subject}\n                                    onChange={(e) => setFormData({ ...formData, subject: e.target.value })}\n                                    className=\"input\"\n                                    placeholder=\"e.g., Math\"\n                                    required\n                                />\n                            </div>\n                            <div>\n                                <label className=\"label\">Level *</label>\n                                <input\n                                    type=\"text\"\n                                    value={formData.level}\n                                    onChange={(e) => setFormData({ ...formData, level: e.target.value })}\n                                    className=\"input\"\n                                    placeholder=\"e.g., Grade 5\"\n                                    required\n                                />\n                            </div>\n                        </div>\n\n                        <div>\n                            <label className=\"label\">Description</label>\n                            <textarea\n                                value={formData.description}\n                                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                                className=\"input\"\n                                placeholder=\"Optional description...\"\n                                rows={3}\n                            />\n                        </div>\n\n                        <div className=\"flex gap-3 pt-4\">\n                            <button type=\"button\" onClick={onClose} className=\"btn btn-outline flex-1\">\n                                Cancel\n                            </button>\n                            <button type=\"submit\" className=\"btn btn-primary flex-1\">\n                                Create Class\n                            </button>\n                        </div>\n                    </form>\n                </motion.div>\n            </div>\n        </>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\classes\\[classId].js",["625"],[],"// pages/classes/[classId].js\n// Individual class detail page with tabs\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { motion } from 'framer-motion';\nimport ClassRoster from '../../components/classes/ClassRoster';\nimport { getClassById, addStudentToClass, removeStudentFromClass, markAttendance, addBehavioralNote } from '../../lib/firestore/classes';\nimport { useApp } from '../../lib/contexts/AppContext';\nimport { useNotifications } from '../../lib/contexts/NotificationContext';\n\nexport default function ClassDetailPage() {\n    const router = useRouter();\n    const { classId } = router.query;\n    const { user } = useApp();\n    const notify = useNotifications();\n\n    const [classData, setClassData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [activeTab, setActiveTab] = useState('roster');\n\n    useEffect(() => {\n        if (classId) loadClassData();\n    }, [classId]);\n\n    const loadClassData = async () => {\n        setLoading(true);\n        try {\n            const data = await getClassById(classId);\n            setClassData(data);\n        } catch (error) {\n            console.error('Failed to load class:', error);\n            notify.error('Failed to load class');\n        }\n        setLoading(false);\n    };\n\n    const handleAddStudent = async (studentData) => {\n        try {\n            await addStudentToClass(classId, studentData);\n            notify.success('Student added successfully!');\n            loadClassData();\n        } catch (error) {\n            notify.error('Failed to add student');\n        }\n    };\n\n    const handleRemoveStudent = async (studentId) => {\n        try {\n            await removeStudentFromClass(classId, studentId);\n            notify.success('Student removed');\n            loadClassData();\n        } catch (error) {\n            notify.error('Failed to remove student');\n        }\n    };\n\n    const handleMarkAttendance = async (date, studentId, status) => {\n        try {\n            await markAttendance(classId, date, studentId, status);\n            loadClassData();\n        } catch (error) {\n            notify.error('Failed to update attendance');\n        }\n    };\n\n    const handleAddBehavioralNote = async (studentId, note) => {\n        try {\n            await addBehavioralNote(classId, studentId, note);\n            notify.success('Note added');\n            loadClassData();\n        } catch (error) {\n            notify.error('Failed to add note');\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                    <div className=\"skeleton h-32 rounded-2xl mb-6\" />\n                    <div className=\"skeleton h-96 rounded-2xl\" />\n                </div>\n            </div>\n        );\n    }\n\n    if (!classData) {\n        return (\n            <div className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900 flex items-center justify-center\">\n                <div className=\"text-center\">\n                    <h2 className=\"text-2xl font-bold text-neutral-900 dark:text-white mb-2\">Class Not Found</h2>\n                    <p className=\"text-neutral-600 dark:text-neutral-400 mb-6\">This class doesn&apos;t exist or you don&apos;t have access.</p>\n                    <button onClick={() => router.push('/classes')} className=\"btn btn-primary\">\n                        Back to Classes\n                    </button>\n                </div>\n            </div>\n        );\n    }\n\n    const tabs = [\n        { id: 'roster', name: 'Roster', icon: UsersIcon },\n        { id: 'assignments', name: 'Assignments', icon: AssignmentsIcon },\n        { id: 'analytics', name: 'Analytics', icon: ChartIcon },\n    ];\n\n    return (\n        <div className=\"min-h-screen bg-premium transition-colors duration-500 pb-20\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                {/* Class Header */}\n                <div className=\"bg-gradient-to-r from-primary-600 to-secondary-600 rounded-2xl p-8 mb-6 shadow-premium-xl border-premium backdrop-blur-md\">\n                    <div className=\"flex items-start justify-between\">\n                        <div className=\"text-white\">\n                            <h1 className=\"text-3xl font-bold mb-2\">{classData.name}</h1>\n                            <p className=\"text-white/80 mb-4\">{classData.subject}  {classData.level}</p>\n                            <div className=\"flex items-center gap-4 text-sm\">\n                                <div className=\"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-lg\">\n                                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />\n                                    </svg>\n                                    <span>{classData.students?.length || 0} Students</span>\n                                </div>\n                                <div className=\"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-lg font-mono\">\n                                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\" />\n                                    </svg>\n                                    <span>{classData.joinCode}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <button className=\"bg-white/20 hover:bg-white/30 backdrop-blur-sm px-4 py-2 rounded-lg text-white transition-colors\">\n                            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n\n                {/* Tabs */}\n                <div className=\"bg-premium-card rounded-2xl border-premium overflow-hidden shadow-premium-sm\">\n                    <div className=\"flex border-b border-premium\">\n                        {tabs.map((tab) => {\n                            const Icon = tab.icon;\n                            return (\n                                <button\n                                    key={tab.id}\n                                    onClick={() => setActiveTab(tab.id)}\n                                    className={`flex-1 flex items-center justify-center gap-2 px-6 py-4 text-sm font-medium transition-colors relative ${activeTab === tab.id\n                                        ? 'text-primary-600 dark:text-primary-400'\n                                        : 'text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100'\n                                        }`}\n                                >\n                                    <Icon className=\"w-4 h-4\" />\n                                    <span>{tab.name}</span>\n                                    {activeTab === tab.id && (\n                                        <motion.div\n                                            layoutId=\"activeTabIndicator\"\n                                            className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-600\"\n                                            transition={{ type: 'spring', bounce: 0.2, duration: 0.6 }}\n                                        />\n                                    )}\n                                </button>\n                            );\n                        })}\n                    </div>\n\n                    {/* Tab Content */}\n                    <div className=\"p-6\">\n                        {activeTab === 'roster' && (\n                            <ClassRoster\n                                classData={classData}\n                                students={classData.students || []}\n                                onAddStudent={handleAddStudent}\n                                onRemoveStudent={handleRemoveStudent}\n                                onMarkAttendance={handleMarkAttendance}\n                                onAddBehavioralNote={handleAddBehavioralNote}\n                                isTeacher={true}\n                            />\n                        )}\n\n                        {activeTab === 'assignments' && (\n                            <div className=\"text-center py-12\">\n                                <svg className=\"w-16 h-16 text-neutral-300 dark:text-neutral-700 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                                </svg>\n                                <h3 className=\"text-lg font-semibold text-neutral-900 dark:text-white mb-2\">No Assignments Yet</h3>\n                                <p className=\"text-neutral-600 dark:text-neutral-400 mb-6\">Create your first assignment for this class</p>\n                                <button onClick={() => router.push('/assignments')} className=\"btn btn-primary\">\n                                    Create Assignment\n                                </button>\n                            </div>\n                        )}\n\n                        {activeTab === 'analytics' && (\n                            <div className=\"text-center py-12\">\n                                <svg className=\"w-16 h-16 text-neutral-300 dark:text-neutral-700 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                                </svg>\n                                <h3 className=\"text-lg font-semibold text-neutral-900 dark:text-white mb-2\">Analytics Coming Soon</h3>\n                                <p className=\"text-neutral-600 dark:text-neutral-400\">Class analytics will appear here after students complete assignments</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction UsersIcon({ className }) {\n    return (\n        <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />\n        </svg>\n    );\n}\n\nfunction AssignmentsIcon({ className }) {\n    return (\n        <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n        </svg>\n    );\n}\n\nfunction ChartIcon({ className }) {\n    return (\n        <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n        </svg>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\classes.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\dashboard\\educator.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\dashboard\\index.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\dashboard\\learner.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\demo.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\grades\\index.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\help.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\index.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\invite.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\onboarding.js",["626"],[],"// pages/onboarding.js\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\n\nexport default function Onboarding() {\n  const router = useRouter();\n\n  useEffect(() => {\n    try {\n      const role = localStorage.getItem(\"elora_role\");\n      const isGuest = localStorage.getItem(\"elora_guest\");\n      const verified = localStorage.getItem(\"elora_verified\");\n\n      // If no role was selected, send back to homepage\n      if (!role && !isGuest) {\n        router.replace(\"/\");\n        return;\n      }\n\n      // Guest users skip verification\n      if (isGuest === \"true\") {\n        router.replace(\"/assistant\");\n        return;\n      }\n\n      // If not verified  go verify\n      if (verified !== \"true\") {\n        router.replace(\"/verify\");\n        return;\n      }\n\n      // Verified + has role  Assistant\n      router.replace(\"/assistant\");\n    } catch (e) {\n      console.error(e);\n      router.replace(\"/\");\n    }\n  }, []);\n\n  return null;\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\settings.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\story.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\success.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\verified.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\verify.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\pages\\_app.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\analytics\\InterventionAlerts.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\analytics\\PerformanceHeatmap.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\AssignmentComponents.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\assignments\\AssignmentWizard.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\assignments\\GradingInterface.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\chat\\PersonalitySelector.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\classes\\ClassRoster.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\AssignmentWizard.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\ClassWizard.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\DashboardShared.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\DashboardUI.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\ParentModule.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\QuizGenerator.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\StudentModule.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\TeacherModule.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\TeacherOverview.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\TeacherSidebar.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\TeacherVideoExplorer.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\dashboard\\VoiceAssistant.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\DashboardPreview.js",["627"],[],"import { useMemo } from \"react\";\nimport Link from \"next/link\";\n \nimport { LineChart } from \"./SimpleCharts\";\n\n \n\nexport default function DashboardPreview({ role = \"all\" }) {\n    const modules = [\n        {\n            title: \"Student Progress\",\n            subtitle: \"Real-time learning momentum\",\n            chartData: [40, 55, 48, 62, 75, 82],\n        },\n        {\n            title: \"Parent Insights\",\n            subtitle: \"Weekly activity breakdown\",\n            stats: [\n                { value: \"A+\", label: \"Grade\" },\n                { value: \"15%\", label: \"Growth\" },\n            ],\n        },\n        {\n            title: \"Teacher Automations\",\n            subtitle: \"3.5 hours saved this week\",\n            stats: [\n                { value: \"2.5h\", label: \"Saved\" },\n                { value: \"48\", label: \"Tasks\" },\n            ],\n        },\n    ];\n\n    // Filter modules based on role\n    const filteredModules = useMemo(() => {\n        if (!role || role === \"all\") return modules;\n        if (role === \"student\") return modules.filter(m => m.title.includes(\"Student\"));\n        if (role === \"educator\") return modules.filter(m => m.title.includes(\"Teacher\"));\n        if (role === \"parent\") return modules.filter(m => m.title.includes(\"Parent\"));\n        return modules;\n    }, [role, modules]);\n\n    return (\n        <section className=\"p-6\">\n            <header className=\"mb-4\">\n                <h3 className=\"text-xl font-semibold text-text-primary\">Dashboard Preview</h3>\n            </header>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                {filteredModules.map((m, index) => (\n                    <article key={index} className=\"elora-card p-4\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                            <p className=\"text-sm font-semibold text-text-primary\">{m.title}</p>\n                            <span className=\"text-xs text-text-secondary\">{m.subtitle}</span>\n                        </div>\n                        {m.chartData ? (\n                            <div className=\"h-12\">\n                                <LineChart data={m.chartData} color=\"neutral\" />\n                            </div>\n                        ) : (\n                            <div className=\"flex items-center gap-4\">\n                                {(m.stats || []).map((stat, i) => (\n                                    <div key={i} className=\"text-center\">\n                                        <div className=\"text-base font-semibold text-text-primary\">\n                                            {stat.value}\n                                        </div>\n                                        <div className=\"text-xs text-text-secondary uppercase tracking-wider\">\n                                            {stat.label}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        )}\n                        <div className=\"mt-3 flex items-center gap-2\">\n                            <Link className=\"elora-btn elora-btn-primary\" href=\"/dashboard\">Open</Link>\n                            <Link className=\"elora-btn elora-btn-secondary\" href=\"/dashboard\">Details</Link>\n                        </div>\n                    </article>\n                ))}\n            </div>\n        </section>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\EloraStats.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ErrorBoundary.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\GradingModal.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\HeroScene.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\landing\\FeatureHighlights.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\landing\\FounderStory.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\landing\\HeroSection.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Layout.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Modal.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\MotionPolyfill.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Navbar.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Navigation.js",["628"],[],"// components/Navigation.js\n// Professional navigation bar - Notion/Linear quality\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useApp } from '../lib/contexts/AppContext';\nimport ThemeToggle from './ThemeToggle';\n\nexport default function Navigation() {\n    const router = useRouter();\n    const { session, user } = useApp();\n    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n    const [userMenuOpen, setUserMenuOpen] = useState(false);\n\n    const navigation = [\n        { name: 'Dashboard', href: '/dashboard', icon: DashboardIcon },\n        { name: 'Assistant', href: '/assistant', icon: AssistantIcon },\n        { name: 'Classes', href: '/classes', icon: ClassesIcon },\n        { name: 'Assignments', href: '/assignments', icon: AssignmentsIcon },\n        { name: 'Analytics', href: '/analytics', icon: AnalyticsIcon },\n    ];\n\n    const isActive = (href) => router.pathname.startsWith(href);\n\n    return (\n        <>\n            {/* Desktop Navigation */}\n            <nav className=\"sticky top-0 z-[1100] bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                    <div className=\"flex items-center justify-between h-16\">\n                        {/* Logo */}\n                        <Link href=\"/dashboard\" className=\"flex items-center gap-2\">\n                            <div className=\"w-6 h-6 rounded bg-neutral-900 dark:bg-white flex items-center justify-center border border-neutral-200 dark:border-neutral-700\">\n                                <svg className=\"w-4 h-4 text-white dark:text-neutral-900\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                                </svg>\n                            </div>\n                            <span className=\"text-xl font-semibold text-neutral-900 dark:text-white\">Elora</span>\n                        </Link>\n\n                        {/* Desktop Nav Links */}\n                        <div className=\"hidden md:flex items-center gap-2\">\n                            {navigation.map((item) => {\n                                const Icon = item.icon;\n                                const active = isActive(item.href);\n\n                                return (\n                                    <Link\n                                        key={item.name}\n                                        href={item.href}\n                                        className={`relative px-4 py-2 rounded text-sm font-semibold ${active\n                                            ? 'text-neutral-900 dark:text-white'\n                                            : 'text-neutral-600 dark:text-neutral-400'\n                                            }`}\n                                    >\n                                        <div className=\"flex items-center gap-2\">\n                                            <Icon className=\"w-4 h-4\" />\n                                            <span>{item.name}</span>\n                                        </div>\n                                        {active && (\n                                            <span\n                                                className=\"absolute bottom-0 left-2 right-2 h-[2px] bg-neutral-900 dark:bg-neutral-100 rounded\"\n                                                aria-hidden=\"true\"\n                                            />\n                                        )}\n                                    </Link>\n                                );\n                            })}\n                        </div>\n\n                        {/* Right Side - User Menu */}\n                        <div className=\"flex items-center gap-3\">\n                            {/* Theme Toggle */}\n                            <ThemeToggle />\n\n                            {/* Notifications removed for Tines-aligned minimal shell */}\n\n                            {/* User Menu */}\n                            {session?.verified ? (<div className=\"relative\">\n                                <button\n                                    onClick={() => setUserMenuOpen(!userMenuOpen)}\n                                    className=\"flex items-center gap-2 px-3 py-2 rounded focus-visible:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral-900 dark:focus-visible:outline-neutral-100\"\n                                    type=\"button\"\n                                    aria-haspopup=\"menu\"\n                                    aria-expanded={userMenuOpen}\n                                    aria-controls=\"user-dropdown\"\n                                    aria-pressed={userMenuOpen}\n                                    onKeyDown={(e) => { if (e.key === 'Escape') setUserMenuOpen(false); }}\n                                >\n                                    <div className=\"w-6 h-6 rounded bg-neutral-200 dark:bg-neutral-700 flex items-center justify-center text-neutral-900 dark:text-white font-semibold text-xs\">\n                                        {session?.name?.charAt(0) || 'U'}\n                                    </div>\n                                    <div className=\"hidden lg:block text-left\">\n                                        <div className=\"text-sm font-semibold text-neutral-900 dark:text-white\">\n                                            {session?.name || 'User'}\n                                        </div>\n                                        <div className=\"text-xs text-neutral-500 dark:text-neutral-400 capitalize\">\n                                            {session?.role || 'Student'}\n                                        </div>\n                                    </div>\n                                    <svg className=\"w-4 h-4 text-neutral-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                                    </svg>\n                                </button>\n\n                                {/* User Dropdown */}\n                                <AnimatePresence>\n                                    {userMenuOpen && (\n                                        <motion.div\n                                            initial={{ opacity: 0 }}\n                                            animate={{ opacity: 1 }}\n                                            exit={{ opacity: 0 }}\n                                            className=\"absolute right-0 mt-2 w-56 bg-white dark:bg-neutral-800 rounded border border-neutral-200 dark:border-neutral-700 py-2 z-[1000]\"\n                                            id=\"user-dropdown\"\n                                            role=\"menu\"\n                                        >\n                                            <Link href=\"/settings\" className=\"flex items-center gap-2 px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300\" role=\"menuitem\">\n                                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                </svg>\n                                                Settings\n                                            </Link>\n                                            <Link href=\"/help\" className=\"flex items-center gap-2 px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300\" role=\"menuitem\">\n                                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                                                </svg>\n                                                Help\n                                            </Link>\n                                            <div className=\"border-t border-neutral-200 dark:border-neutral-700 my-2\" />\n                                            {session?.verified ? (\n                                                <button className=\"flex items-center gap-2 px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 w-full\" role=\"menuitem\" type=\"button\" aria-pressed=\"false\">\n                                                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                                                    </svg>\n                                                    Sign Out\n                                                </button>\n                                            ) : null}\n                                        </motion.div>\n                                    )}\n                                </AnimatePresence>\n                            </div>) : (<Link href=\"/verify\" className=\"elora-btn elora-btn-secondary\">Verify</Link>)}\n\n                            {/* Mobile Menu Button */}\n                            <button\n                                onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n                                className=\"md:hidden flex items-center justify-center w-6 h-6 rounded focus-visible:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral-900 dark:focus-visible:outline-neutral-100\"\n                                type=\"button\"\n                                aria-pressed={mobileMenuOpen}\n                            >\n                                <svg className=\"w-5 h-5 text-neutral-600 dark:text-neutral-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    {mobileMenuOpen ? (\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                    ) : (\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n                                    )}\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Mobile Navigation */}\n                <AnimatePresence>\n                    {mobileMenuOpen && (\n                        <motion.div\n                            initial={{ opacity: 0 }}\n                            animate={{ opacity: 1 }}\n                            exit={{ opacity: 0 }}\n                            className=\"md:hidden border-t border-neutral-200 dark:border-neutral-800\"\n                        >\n                            <div className=\"px-4 py-4 space-y-2\">\n                                {navigation.map((item) => {\n                                    const Icon = item.icon;\n                                    const active = isActive(item.href);\n\n                                    return (\n                                        <Link\n                                            key={item.name}\n                                            href={item.href}\n                                            onClick={() => setMobileMenuOpen(false)}\n                                            className={`flex items-center gap-2 px-4 py-3 rounded text-sm font-semibold ${active\n                                                ? 'bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100'\n                                                : 'text-neutral-600 dark:text-neutral-400'\n                                                }`}\n                                        >\n                                            <Icon className=\"w-4 h-4\" />\n                                            <span>{item.name}</span>\n                                        </Link>\n                                    );\n                                })}\n                            </div>\n                        </motion.div>\n                    )}\n                </AnimatePresence>\n            </nav>\n        </>\n    );\n}\n\n// Icon Components\nfunction DashboardIcon({ className }) {\n    return (\n        <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n        </svg>\n    );\n}\n\nfunction ClassesIcon({ className }) {\n    return (\n        <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n        </svg>\n    );\n}\n\nfunction AssignmentsIcon({ className }) {\n    return (\n        <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n        </svg>\n    );\n}\n\nfunction AnalyticsIcon({ className }) {\n    return (\n        <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n        </svg>\n    );\n}\n\nfunction AssistantIcon({ className }) {\n    return (\n        <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n        </svg>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\Notifications.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\parent\\ProgressDashboard.js",["629"],[],"// components/parent/ProgressDashboard.js\n// Parent view of student progress and performance\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { format, subDays } from 'date-fns';\nimport { getStudentAnalytics, generateWeeklyDigest, getLearningGaps } from '../../lib/firestore/analytics';\n\nexport default function ProgressDashboard({ studentId, studentName }) {\n    const [analytics, setAnalytics] = useState(null);\n    const [weeklyDigest, setWeeklyDigest] = useState(null);\n    const [learningGaps, setLearningGaps] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [timeframe, setTimeframe] = useState(30); // days\n\n    useEffect(() => {\n        loadData();\n    }, [studentId, timeframe]);\n\n    const loadData = async () => {\n        setLoading(true);\n        try {\n            const [analyticsData, digestData, gapsData] = await Promise.all([\n                getStudentAnalytics(studentId, timeframe),\n                generateWeeklyDigest(studentId),\n                getLearningGaps(studentId),\n            ]);\n\n            setAnalytics(analyticsData);\n            setWeeklyDigest(digestData);\n            setLearningGaps(gapsData);\n        } catch (error) {\n            console.error('Failed to load analytics:', error);\n        }\n        setLoading(false);\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center p-12\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-4 border-primary-600\"></div>\n            </div>\n        );\n    }\n\n    if (!analytics) {\n        return (\n            <div className=\"card p-12 text-center\">\n                <p className=\"text-text-secondary\">No data available yet</p>\n            </div>\n        );\n    }\n\n    const getTrendIcon = (trend) => {\n        if (trend === 'improving') {\n            return (\n                <svg className=\"w-5 h-5 text-secondary-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n                </svg>\n            );\n        }\n        if (trend === 'declining') {\n            return (\n                <svg className=\"w-5 h-5 text-error\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6\" />\n                </svg>\n            );\n        }\n        return (\n            <svg className=\"w-5 h-5 text-neutral-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 12h14\" />\n            </svg>\n        );\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h2 className=\"text-2xl font-bold text-text-primary\">{studentName}&apos;s Progress</h2>\n                    <p className=\"text-text-secondary mt-1\">Track learning journey and achievements</p>\n                </div>\n\n                {/* Timeframe Selector */}\n                <select\n                    value={timeframe}\n                    onChange={(e) => setTimeframe(Number(e.target.value))}\n                    className=\"input\"\n                >\n                    <option value={7}>Last 7 days</option>\n                    <option value={30}>Last 30 days</option>\n                    <option value={90}>Last 90 days</option>\n                </select>\n            </div>\n\n            {/* Key Metrics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"card p-6 bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20\"\n                >\n                    <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-primary-700 dark:text-primary-300\">Average Grade</span>\n                        {getTrendIcon(analytics.performanceTrend)}\n                    </div>\n                    <div className=\"text-3xl font-bold text-primary-900 dark:text-primary-100\">\n                        {analytics.averageGrade ? `${analytics.averageGrade}%` : 'N/A'}\n                    </div>\n                    <p className=\"text-xs text-primary-600 dark:text-primary-400 mt-1\">\n                        {analytics.performanceTrend === 'improving' && ' Improving'}\n                        {analytics.performanceTrend === 'declining' && ' Needs attention'}\n                        {analytics.performanceTrend === 'stable' && ' Consistent'}\n                    </p>\n                </motion.div>\n\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: 0.1 }}\n                    className=\"card p-6 bg-gradient-to-br from-secondary-50 to-secondary-100 dark:from-secondary-900/20 dark:to-secondary-800/20\"\n                >\n                    <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-secondary-700 dark:text-secondary-300\">Assignments Done</span>\n                        <svg className=\"w-5 h-5 text-secondary-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                    </div>\n                    <div className=\"text-3xl font-bold text-secondary-900 dark:text-secondary-100\">\n                        {analytics.assignmentsCompleted}\n                    </div>\n                    <p className=\"text-xs text-secondary-600 dark:text-secondary-400 mt-1\">\n                        Past {timeframe} days\n                    </p>\n                </motion.div>\n\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: 0.2 }}\n                    className=\"card p-6 bg-gradient-to-br from-tertiary-50 to-tertiary-100 dark:from-tertiary-900/20 dark:to-tertiary-800/20\"\n                >\n                    <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-tertiary-700 dark:text-tertiary-300\">Learning Streak</span>\n                        <svg className=\"w-5 h-5 text-tertiary-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z\" />\n                        </svg>\n                    </div>\n                    <div className=\"text-3xl font-bold text-tertiary-900 dark:text-tertiary-100\">\n                        {analytics.streakDays} \n                    </div>\n                    <p className=\"text-xs text-tertiary-600 dark:text-tertiary-400 mt-1\">\n                        {analytics.streakDays === 1 ? 'day' : 'days'} in a row\n                    </p>\n                </motion.div>\n\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: 0.3 }}\n                    className=\"card p-6 bg-gradient-to-br from-neutral-50 to-neutral-100 dark:from-neutral-800 dark:to-neutral-700\"\n                >\n                    <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-neutral-700 dark:text-neutral-300\">Total Activity</span>\n                        <svg className=\"w-5 h-5 text-neutral-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                        </svg>\n                    </div>\n                    <div className=\"text-3xl font-bold text-neutral-900 dark:text-neutral-100\">\n                        {analytics.totalActivities}\n                    </div>\n                    <p className=\"text-xs text-neutral-600 dark:text-neutral-400 mt-1\">\n                        Learning actions\n                    </p>\n                </motion.div>\n            </div>\n\n            {/* Weekly Digest */}\n            {weeklyDigest && (\n                <div className=\"card p-6\">\n                    <h3 className=\"text-lg font-bold text-text-primary mb-4\">This Week&apos;s Summary</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <div>\n                            <h4 className=\"font-medium text-text-secondary text-sm mb-3\">Highlights</h4>\n                            <ul className=\"space-y-2\">\n                                <li className=\"flex items-start gap-2 text-sm text-text-primary\">\n                                    <span className=\"text-secondary-600 mt-0.5\"></span>\n                                    Active {weeklyDigest.summary.activeDays} out of 7 days\n                                </li>\n                                <li className=\"flex items-start gap-2 text-sm text-text-primary\">\n                                    <span className=\"text-secondary-600 mt-0.5\"></span>\n                                    Completed {weeklyDigest.summary.assignmentsCompleted} assignments\n                                </li>\n                                {weeklyDigest.summary.averageGrade && (\n                                    <li className=\"flex items-start gap-2 text-sm text-text-primary\">\n                                        <span className=\"text-secondary-600 mt-0.5\"></span>\n                                        Average grade: {weeklyDigest.summary.averageGrade}%\n                                    </li>\n                                )}\n                            </ul>\n\n                            {weeklyDigest.achievements.length > 0 && (\n                                <div className=\"mt-4\">\n                                    <h5 className=\"font-medium text-text-secondary text-sm mb-2\">Achievements</h5>\n                                    <div className=\"flex flex-wrap gap-2\">\n                                        {weeklyDigest.achievements.map((achievement, idx) => (\n                                            <span key={idx} className=\"px-3 py-1 bg-secondary-100 dark:bg-secondary-900/30 text-secondary-700 dark:text-secondary-300 rounded-full text-xs font-medium\">\n                                                {achievement}\n                                            </span>\n                                        ))}\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n\n                        <div>\n                            {weeklyDigest.concerns && weeklyDigest.concerns.length > 0 && (\n                                <div className=\"mb-4\">\n                                    <h4 className=\"font-medium text-text-secondary text-sm mb-3\">Areas of Focus</h4>\n                                    <ul className=\"space-y-2\">\n                                        {weeklyDigest.concerns.map((concern, idx) => (\n                                            <li key={idx} className=\"flex items-start gap-2 text-sm text-warning\">\n                                                <span className=\"mt-0.5\"></span>\n                                                {concern}\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            )}\n\n                            <h4 className=\"font-medium text-text-secondary text-sm mb-3\">Next Steps</h4>\n                            <ul className=\"space-y-2\">\n                                {weeklyDigest.nextSteps.map((step, idx) => (\n                                    <li key={idx} className=\"flex items-start gap-2 text-sm text-text-primary\">\n                                        <span className=\"text-primary-600 mt-0.5\"></span>\n                                        {step}\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Learning Gaps */}\n            {learningGaps.length > 0 && (\n                <div className=\"card p-6\">\n                    <h3 className=\"text-lg font-bold text-text-primary mb-4\">Areas Needing Practice</h3>\n                    <div className=\"space-y-3\">\n                        {learningGaps.map((gap, idx) => (\n                            <div key={idx} className=\"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800\">\n                                <div className=\"flex items-center justify-between mb-2\">\n                                    <h4 className=\"font-medium text-text-primary\">{gap.topic}</h4>\n                                    <span className=\"text-lg font-bold text-orange-600\">\n                                        {Math.round(gap.averageScore)}%\n                                    </span>\n                                </div>\n                                <p className=\"text-sm text-text-secondary mb-2\">{gap.attempts} attempt{gap.attempts !== 1 && 's'}</p>\n                                <div className=\"mt-3\">\n                                    <p className=\"text-xs font-medium text-text-secondary mb-1\">Recommendations:</p>\n                                    <ul className=\"space-y-1\">\n                                        {gap.recommendations.slice(0, 2).map((rec, recIdx) => (\n                                            <li key={recIdx} className=\"text-xs text-text-tertiary flex items-start gap-1\">\n                                                <span></span>\n                                                <span>{rec}</span>\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            )}\n\n            {/* Top Subjects */}\n            {analytics.topSubjects && analytics.topSubjects.length > 0 && (\n                <div className=\"card p-6\">\n                    <h3 className=\"text-lg font-bold text-text-primary mb-4\">Most Active Subjects</h3>\n                    <div className=\"space-y-3\">\n                        {analytics.topSubjects.map((subject, idx) => (\n                            <div key={idx} className=\"flex items-center gap-4\">\n                                <div className=\"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400 font-bold\">\n                                    #{idx + 1}\n                                </div>\n                                <div className=\"flex-1\">\n                                    <div className=\"font-medium text-text-primary\">{subject.subject}</div>\n                                    <div className=\"text-sm text-text-tertiary\">{subject.activities} activities</div>\n                                </div>\n                                <div className=\"w-32 bg-neutral-200 dark:bg-neutral-700 rounded-full h-2\">\n                                    <div\n                                        className=\"bg-primary-500 h-2 rounded-full\"\n                                        style={{ width: `${(subject.activities / analytics.topSubjects[0].activities) * 100}%` }}\n                                    />\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\PersonaFeatures.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\RoleIllustration.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\RubricBuilder.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\SimpleCharts.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\student\\SubmissionForm.js",["630"],[],"// components/student/SubmissionForm.js\n// Student assignment submission interface with draft auto-save\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { format } from 'date-fns';\nimport { saveSubmissionDraft, submitAssignment } from '../../lib/firestore/submissions';\nimport { useNotifications } from '../../lib/contexts/NotificationContext';\n\nexport default function SubmissionForm({ assignment, existingSubmission, studentId, onSubmit }) {\n    const [content, setContent] = useState(existingSubmission?.content || '');\n    const [attachments, setAttachments] = useState(existingSubmission?.attachments || []);\n    const [saving, setSaving] = useState(false);\n    const [submitting, setSubmitting] = useState(false);\n    const [lastSaved, setLastSaved] = useState(existingSubmission?.lastSaved || null);\n    const notify = useNotifications();\n\n    // Auto-save draft every 30 seconds\n    useEffect(() => {\n        if (!content && attachments.length === 0) return;\n\n        const timer = setTimeout(async () => {\n            await handleSaveDraft(true); // Silent save\n        }, 30000);\n\n        return () => clearTimeout(timer);\n    }, [content, attachments]);\n\n    const handleSaveDraft = async (silent = false) => {\n        if (!content && attachments.length === 0) return;\n\n        setSaving(true);\n        try {\n            await saveSubmissionDraft({\n                assignmentId: assignment.id,\n                studentId,\n                content,\n                attachments,\n            });\n            setLastSaved(new Date());\n            if (!silent) {\n                notify.success('Draft saved');\n            }\n        } catch (error) {\n            console.error('Failed to save draft:', error);\n            if (!silent) {\n                notify.error('Failed to save draft');\n            }\n        }\n        setSaving(false);\n    };\n\n    const handleSubmit = async () => {\n        if (!content && attachments.length === 0) {\n            notify.error('Please add content or attachments before submitting');\n            return;\n        }\n\n        setSubmitting(true);\n        try {\n            await submitAssignment({\n                assignmentId: assignment.id,\n                studentId,\n                content,\n                attachments,\n            });\n            notify.success('Assignment submitted successfully! ');\n            if (onSubmit) onSubmit();\n        } catch (error) {\n            console.error('Failed to submit:', error);\n            notify.error('Failed to submit assignment');\n        }\n        setSubmitting(false);\n    };\n\n    const isPastDue = new Date() > new Date(assignment.dueDate);\n    const canSubmit = !existingSubmission?.submittedAt;\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Assignment Header */}\n            <div className=\"card p-6 bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-primary-900/20 dark:to-secondary-900/20\">\n                <h2 className=\"text-2xl font-bold text-text-primary mb-2\">{assignment.title}</h2>\n                <p className=\"text-text-secondary mb-4\">{assignment.description}</p>\n\n                <div className=\"flex flex-wrap gap-4 text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                        <svg className=\"w-5 h-5 text-primary-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                        </svg>\n                        <span className={isPastDue ? 'text-error font-semibold' : 'text-text-secondary'}>\n                            Due: {format(new Date(assignment.dueDate), 'MMM dd, yyyy h:mm a')}\n                            {isPastDue && ' (Past Due)'}\n                        </span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <svg className=\"w-5 h-5 text-primary-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z\" />\n                        </svg>\n                        <span className=\"text-text-secondary\">{assignment.points} points</span>\n                    </div>\n                </div>\n            </div>\n\n            {/* Status */}\n            {existingSubmission?.submittedAt ? (\n                <div className=\"card p-6 bg-secondary-50 dark:bg-secondary-900/20 border-2 border-secondary-300 dark:border-secondary-700\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"w-12 h-12 rounded-full bg-secondary-500 flex items-center justify-center\">\n                            <svg className=\"w-6 h-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                            </svg>\n                        </div>\n                        <div className=\"flex-1\">\n                            <h3 className=\"font-bold text-secondary-900 dark:text-secondary-100\">Submitted!</h3>\n                            <p className=\"text-sm text-secondary-700 dark:text-secondary-300\">\n                                {format(new Date(existingSubmission.submittedAt), 'MMM dd, yyyy h:mm a')}\n                            </p>\n                        </div>\n                        {existingSubmission.grade !== null && (\n                            <div className=\"text-right\">\n                                <div className=\"text-3xl font-bold text-secondary-900 dark:text-secondary-100\">\n                                    {existingSubmission.grade}\n                                </div>\n                                <div className=\"text-sm text-secondary-700 dark:text-secondary-300\">\n                                    / {assignment.points}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {existingSubmission.feedback && (\n                        <div className=\"mt-4 p-4 bg-white dark:bg-neutral-800 rounded-lg\">\n                            <h4 className=\"font-semibold text-text-primary text-sm mb-2\">Teacher Feedback</h4>\n                            <p className=\"text-text-secondary whitespace-pre-wrap\">{existingSubmission.feedback}</p>\n                        </div>\n                    )}\n                </div>\n            ) : (\n                <>\n                    {/* Submission Form */}\n                    <div className=\"card p-6\">\n                        <div className=\"mb-4 flex items-center justify-between\">\n                            <label className=\"label\">Your Response</label>\n                            {lastSaved && (\n                                <span className=\"text-xs text-text-tertiary\">\n                                    {saving ? 'Saving...' : `Last saved ${format(lastSaved, 'h:mm a')}`}\n                                </span>\n                            )}\n                        </div>\n                        <textarea\n                            value={content}\n                            onChange={(e) => setContent(e.target.value)}\n                            className=\"input min-h-[300px] font-mono text-sm\"\n                            placeholder=\"Type your response here...\"\n                            rows={12}\n                            disabled={!canSubmit}\n                        />\n                        <p className=\"text-xs text-text-tertiary mt-2\">\n                            Your work is automatically saved every 30 seconds\n                        </p>\n                    </div>\n\n                    {/* Attachments */}\n                    <div className=\"card p-6\">\n                        <label className=\"label mb-3\">Attachments (Optional)</label>\n                        <div className=\"border-2 border-dashed border-border-primary rounded-xl p-8 text-center hover:bg-neutral-50 dark:hover:bg-neutral-800/50 transition-colors cursor-pointer\">\n                            <svg className=\"w-12 h-12 text-neutral-400 mx-auto mb-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                            </svg>\n                            <p className=\"text-text-secondary mb-1\">Click to upload or drag and drop</p>\n                            <p className=\"text-xs text-text-tertiary\">PDF, DOC, Images (Max 10MB)</p>\n                        </div>\n\n                        {attachments.length > 0 && (\n                            <div className=\"mt-4 space-y-2\">\n                                {attachments.map((file, idx) => (\n                                    <div key={idx} className=\"flex items-center gap-3 p-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg\">\n                                        <svg className=\"w-5 h-5 text-primary-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                                        </svg>\n                                        <span className=\"flex-1 text-sm text-text-primary\">{file.name}</span>\n                                        <button className=\"text-error hover:bg-red-50 dark:hover:bg-red-900/20 p-1.5 rounded transition-colors\">\n                                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                            </svg>\n                                        </button>\n                                    </div>\n                                ))}\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Actions */}\n                    <div className=\"flex gap-3 sticky bottom-0 bg-white dark:bg-neutral-900 border-t border-border-primary p-4 -mx-6 -mb-6\">\n                        <button\n                            onClick={() => handleSaveDraft()}\n                            disabled={saving || !canSubmit}\n                            className=\"btn btn-outline flex-1\"\n                        >\n                            {saving ? 'Saving...' : 'Save Draft'}\n                        </button>\n                        <button\n                            onClick={handleSubmit}\n                            disabled={submitting || !canSubmit || (!content && attachments.length === 0)}\n                            className=\"btn btn-primary flex-1\"\n                        >\n                            {submitting ? (\n                                <>\n                                    <div className=\"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n                                    Submitting...\n                                </>\n                            ) : (\n                                <>\n                                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                                    </svg>\n                                    Submit Assignment\n                                </>\n                            )}\n                        </button>\n                    </div>\n\n                    {isPastDue && assignment.settings?.allowLateSubmissions && (\n                        <div className=\"text-center text-sm text-warning\">\n                             This assignment is past due. A {assignment.settings.latePenalty}% penalty may apply.\n                        </div>\n                    )}\n                </>\n            )}\n        </div>\n    );\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\SubmissionModal.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ThemeToggle.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\TrustedByBar.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ui\\ConfirmationFeedback.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ui\\EmptyStates.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ui\\ErrorMessages.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\components\\ui\\LoadingStates.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\chatThreads.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\contentModeration.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\contexts\\AppContext.js",["631"],[],"// lib/contexts/AppContext.js\n// Global application state management with React Context\n\nimport { createContext, useContext, useEffect, useState, useCallback } from 'react';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from '../firebase';\nimport { getSession, saveSession } from '../session';\n\nconst AppContext = createContext(null);\n\nexport function AppProvider({ children }) {\n    const [session, setSession] = useState(null);\n    const [user, setUser] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [notifications, setNotifications] = useState([]);\n\n    // Initialize session\n    useEffect(() => {\n        const initialSession = getSession();\n        setSession(initialSession);\n\n        // Listen for auth state changes\n        const unsubscribe = onAuthStateChanged(auth, (firebaseUser) => {\n            setUser(firebaseUser);\n            setLoading(false);\n        });\n\n        // Listen for storage events (cross-tab sync)\n        const handleStorageChange = () => {\n            const updatedSession = getSession();\n            setSession(updatedSession);\n        };\n\n        window.addEventListener('elora:session', handleStorageChange);\n\n        return () => {\n            unsubscribe();\n            window.removeEventListener('elora:session', handleStorageChange);\n        };\n    }, []);\n\n    // Update session\n    const updateSession = useCallback((updates) => {\n        const newSession = { ...session, ...updates };\n        saveSession(newSession);\n        setSession(newSession);\n    }, [session]);\n\n    // Add notification\n    const addNotification = useCallback((notification) => {\n        const id = Date.now().toString();\n        setNotifications(prev => [...prev, { id, ...notification }]);\n\n        // Auto-remove after 5 seconds\n        setTimeout(() => {\n            removeNotification(id);\n        }, 5000);\n\n        return id;\n    }, []);\n\n    // Remove notification\n    const removeNotification = useCallback((id) => {\n        setNotifications(prev => prev.filter(n => n.id !== id));\n    }, []);\n\n    const value = {\n        session,\n        user,\n        loading,\n        updateSession,\n        notifications,\n        addNotification,\n        removeNotification,\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-neutral-900 dark:to-neutral-800\">\n                <div className=\"text-center\">\n                    <div className=\"animate-spin rounded-full h-16 w-16 border-b-4 border-primary-600 mx-auto mb-4\"></div>\n                    <p className=\"text-text-secondary text-lg\">Loading Elora...</p>\n                </div>\n            </div>\n        );\n    }\n\n    return <AppContext.Provider value={value}>{children}</AppContext.Provider>;\n}\n\nexport function useApp() {\n    const context = useContext(AppContext);\n    if (!context) {\n        throw new Error('useApp must be used within AppProvider');\n    }\n    return context;\n}\n","C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\contexts\\NotificationContext.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\curriculum\\standards.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\dashboard-utils.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\demo-data.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\demoData.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firebase.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\analytics.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\assignments.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\classes.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\messaging.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\resources.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\firestore\\submissions.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\formatting.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\plagiarismCheck.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\promptTemplates.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\server\\emailVerification.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\server\\teacher.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\server\\verification.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\session.js",[],[],"C:\\Users\\tweet\\Downloads\\elora-verification-ui-main\\elora-verification-ui-main\\lib\\videoLibrary.js",[],[],{"ruleId":"632","severity":1,"message":"633","line":24,"column":8,"nodeType":"634","endLine":24,"endColumn":14,"suggestions":"635"},{"ruleId":"632","severity":1,"message":"636","line":30,"column":8,"nodeType":"634","endLine":30,"endColumn":23,"suggestions":"637"},{"ruleId":"632","severity":1,"message":"638","line":26,"column":8,"nodeType":"634","endLine":26,"endColumn":14,"suggestions":"639"},{"ruleId":"632","severity":1,"message":"640","line":31,"column":8,"nodeType":"634","endLine":31,"endColumn":22,"suggestions":"641"},{"ruleId":"632","severity":1,"message":"642","line":1363,"column":6,"nodeType":"634","endLine":1363,"endColumn":80,"suggestions":"643"},{"ruleId":"632","severity":1,"message":"644","line":713,"column":6,"nodeType":"634","endLine":713,"endColumn":15,"suggestions":"645","suppressions":"646"},{"ruleId":"632","severity":1,"message":"647","line":870,"column":6,"nodeType":"634","endLine":870,"endColumn":8,"suggestions":"648","suppressions":"649"},{"ruleId":"632","severity":1,"message":"650","line":885,"column":6,"nodeType":"634","endLine":885,"endColumn":32,"suggestions":"651","suppressions":"652"},{"ruleId":"632","severity":1,"message":"650","line":1378,"column":6,"nodeType":"634","endLine":1378,"endColumn":41,"suggestions":"653","suppressions":"654"},{"ruleId":"655","severity":1,"message":"656","line":1832,"column":23,"nodeType":"657","endLine":1832,"endColumn":111,"suppressions":"658"},{"ruleId":"632","severity":1,"message":"633","line":22,"column":8,"nodeType":"634","endLine":22,"endColumn":14,"suggestions":"659"},{"ruleId":"632","severity":1,"message":"660","line":24,"column":8,"nodeType":"634","endLine":24,"endColumn":17,"suggestions":"661"},{"ruleId":"632","severity":1,"message":"662","line":38,"column":6,"nodeType":"634","endLine":38,"endColumn":8,"suggestions":"663"},{"ruleId":"632","severity":1,"message":"664","line":9,"column":11,"nodeType":"665","endLine":31,"endColumn":6},{"ruleId":"666","severity":1,"message":"667","line":134,"column":49,"nodeType":"657","endLine":134,"endColumn":208},{"ruleId":"632","severity":1,"message":"638","line":18,"column":8,"nodeType":"634","endLine":18,"endColumn":30,"suggestions":"668"},{"ruleId":"632","severity":1,"message":"669","line":27,"column":8,"nodeType":"634","endLine":27,"endColumn":30,"suggestions":"670"},{"ruleId":"632","severity":1,"message":"671","line":60,"column":8,"nodeType":"634","endLine":60,"endColumn":10,"suggestions":"672"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'loadClasses'. Either include it or remove the dependency array.","ArrayExpression",["673"],"React Hook useEffect has a missing dependency: 'loadAnalytics'. Either include it or remove the dependency array.",["674"],"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.",["675"],"React Hook useEffect has a missing dependency: 'loadAssignmentData'. Either include it or remove the dependency array.",["676"],"React Hook useEffect has a missing dependency: 'sendChat'. Either include it or remove the dependency array.",["677"],"React Hook useEffect has a missing dependency: 'level'. Either include it or remove the dependency array.",["678"],["679"],"React Hook useEffect has a missing dependency: 'syncThreadsState'. Either include it or remove the dependency array.",["680"],["681"],"React Hook useEffect has missing dependencies: 'chatUserKey' and 'syncThreadsState'. Either include them or remove the dependency array.",["682"],["683"],["684"],["685"],"@next/next/no-img-element","Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","JSXOpeningElement",["686"],["687"],"React Hook useEffect has a missing dependency: 'loadClassData'. Either include it or remove the dependency array.",["688"],"React Hook useEffect has a missing dependency: 'router'. Either include it or remove the dependency array.",["689"],"The 'modules' array makes the dependencies of useMemo Hook (at line 40) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'modules' in its own useMemo() Hook.","VariableDeclarator","jsx-a11y/role-supports-aria-props","The attribute aria-pressed is not supported by the role menuitem.",["690"],"React Hook useEffect has a missing dependency: 'handleSaveDraft'. Either include it or remove the dependency array.",["691"],"React Hook useCallback has a missing dependency: 'removeNotification'. Either include it or remove the dependency array.",["692"],{"desc":"693","fix":"694"},{"desc":"695","fix":"696"},{"desc":"697","fix":"698"},{"desc":"699","fix":"700"},{"desc":"701","fix":"702"},{"desc":"703","fix":"704"},{"kind":"705","justification":"706"},{"desc":"707","fix":"708"},{"kind":"705","justification":"706"},{"desc":"709","fix":"710"},{"kind":"705","justification":"706"},{"desc":"711","fix":"712"},{"kind":"705","justification":"706"},{"kind":"705","justification":"706"},{"desc":"693","fix":"713"},{"desc":"714","fix":"715"},{"desc":"716","fix":"717"},{"desc":"718","fix":"719"},{"desc":"720","fix":"721"},{"desc":"722","fix":"723"},"Update the dependencies array to be: [loadClasses, user]",{"range":"724","text":"725"},"Update the dependencies array to be: [loadAnalytics, selectedClass]",{"range":"726","text":"727"},"Update the dependencies array to be: [loadData, user]",{"range":"728","text":"729"},"Update the dependencies array to be: [assignmentId, loadAssignmentData]",{"range":"730","text":"731"},"Update the dependencies array to be: [chatText, loading, attachedImage, messages, action, role, lastActionTime, sendChat]",{"range":"732","text":"733"},"Update the dependencies array to be: [country, level]",{"range":"734","text":"735"},"directive","","Update the dependencies array to be: [syncThreadsState]",{"range":"736","text":"737"},"Update the dependencies array to be: [verified, session.email, chatUserKey, syncThreadsState]",{"range":"738","text":"739"},"Update the dependencies array to be: [chatUserKey, session.email, session.verified, syncThreadsState]",{"range":"740","text":"741"},{"range":"742","text":"725"},"Update the dependencies array to be: [classId, loadClassData]",{"range":"743","text":"744"},"Update the dependencies array to be: [router]",{"range":"745","text":"746"},"Update the dependencies array to be: [loadData, studentId, timeframe]",{"range":"747","text":"748"},"Update the dependencies array to be: [content, attachments, handleSaveDraft]",{"range":"749","text":"750"},"Update the dependencies array to be: [removeNotification]",{"range":"751","text":"752"},[966,972],"[loadClasses, user]",[1073,1088],"[loadAnalytics, selectedClass]",[1102,1108],"[loadData, user]",[1357,1371],"[assignmentId, loadAssignmentData]",[50540,50614],"[chatText, loading, attachedImage, messages, action, role, lastActionTime, sendChat]",[30762,30771],"[country, level]",[35015,35017],"[syncThreadsState]",[35473,35499],"[verified, session.email, chatUserKey, syncThreadsState]",[51080,51115],"[chatUserKey, session.email, session.verified, syncThreadsState]",[829,835],[948,957],"[classId, loadClassData]",[940,942],"[router]",[736,758],"[loadData, studentId, timeframe]",[1184,1206],"[content, attachments, handleSaveDraft]",[1912,1914],"[removeNotification]"]